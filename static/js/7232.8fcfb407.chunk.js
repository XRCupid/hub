"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[6415,7232],{7232:(e,a,t)=>{t.r(a),t.d(a,{ConferenceSetup:()=>l});var s=t(89379),o=t(65043),n=t(5399),i=t(94695),c=t(48970),r=(t(36415),t(70579));const l=e=>{let{mode:a}=e;const[t,l]=(0,o.useState)(""),[d,m]=(0,o.useState)(!1),[u,h]=(0,o.useState)(null),[p,v]=(0,o.useState)(null),[x,j]=(0,o.useState)(""),[b,N]=(0,o.useState)("Host"),[g,f]=(0,o.useState)("Mobile User"),[w,S]=(0,o.useState)(!1),[C,y]=(0,o.useState)(!0),[O,R]=(0,o.useState)(""),A=(0,o.useRef)(null);(0,o.useEffect)((()=>{A.current&&u&&(A.current.srcObject=u)}),[u]),(0,o.useEffect)((()=>{if("mobile"===a){const e=new URLSearchParams(window.location.search).get("room");e&&l(e)}}),[a]);return(0,r.jsxs)("div",{className:"conference-setup",children:[(0,r.jsxs)("div",{className:"setup-header",children:[(0,r.jsx)("h1",{children:"XRCupid Conference Booth"}),(0,r.jsxs)("p",{className:"mode-indicator",children:["Mode: ","host-display"===a?"HOST + DISPLAY":"MOBILE PARTICIPANT"]})]}),w?(0,r.jsxs)("div",{className:"analytics-view",children:[(0,r.jsxs)("div",{className:"analytics-header",children:[(0,r.jsx)("h2",{children:"Live Speed Dating Analytics"}),(0,r.jsxs)("div",{className:"room-badge",children:["Room: ",t]})]}),(0,r.jsx)(i.default,{participant1Stream:u||null,participant2Stream:p||null,participant1Name:b,participant2Name:g,roomId:t,showPresenceAvatars:C,enableRealTimeCoaching:!0})]}):(0,r.jsx)("div",{className:"setup-form",children:"host-display"===a?(0,r.jsxs)("div",{className:"host-setup",children:[(0,r.jsx)("h2",{children:"Host Computer Setup"}),(0,r.jsx)("p",{className:"setup-description",children:"This computer will capture webcam video AND display the audience analytics"}),(0,r.jsx)("input",{type:"text",placeholder:"Host participant name",value:x,onChange:e=>j(e.target.value),className:"name-input"}),(0,r.jsx)("button",{onClick:async()=>{try{const a=Math.random().toString(36).substring(2,8).toUpperCase();if(l(a),n.OO){const e=n.OO.ref("conference-rooms/".concat(a));await e.set({createdAt:(new Date).toISOString(),hostName:x||"Host",status:"waiting"})}const t=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});h(t);const s="".concat(window.location.origin,"/conference-mobile?room=").concat(a);try{const e=await c.toDataURL(s,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});R(e)}catch(e){console.error("Error generating QR code:",e)}if(n.OO){n.OO.ref("conference-rooms/".concat(a)).on("value",(e=>{const a=e.val();null!==a&&void 0!==a&&a.mobileConnected&&(m(!0),f(a.mobileName||"Mobile User"),S(!0))}))}}catch(a){console.error("Error setting up room:",a)}},className:"setup-button",children:"Create Room & Start Webcam"}),t&&!d&&(0,r.jsxs)("div",{className:"room-info",children:[(0,r.jsx)("h3",{children:"Room Created!"}),(0,r.jsx)("div",{className:"room-code",children:t}),O&&(0,r.jsxs)("div",{className:"qr-section",children:[(0,r.jsx)("p",{className:"qr-instruction",children:"Scan with mobile device:"}),(0,r.jsx)("img",{src:O,alt:"QR Code",className:"qr-code"}),(0,r.jsxs)("p",{className:"mobile-scan-info",children:["Or enter code: ",(0,r.jsx)("strong",{children:t})]})]}),(0,r.jsx)("p",{className:"waiting-status",children:"Waiting for mobile participant..."})]})]}):(0,r.jsxs)("div",{className:"mobile-setup",children:[(0,r.jsx)("h2",{children:"Mobile Participant Setup"}),(0,r.jsx)("input",{type:"text",placeholder:"Your name",value:x,onChange:e=>j(e.target.value),className:"name-input"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Room Code",value:t,onChange:e=>l(e.target.value.toUpperCase()),className:"room-input",maxLength:6}),(0,r.jsx)("button",{onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});if(h(e),n.OO){const e=n.OO.ref("conference-rooms/".concat(t)),a=await new Promise((a=>{e.once("value",a)}));if(!a.exists())return void alert("Room not found. Please check the room code.");const o=a.val();await e.set((0,s.A)((0,s.A)({},o),{},{mobileConnected:!0,mobileName:x||"Mobile User",status:"connected"}))}m(!0)}catch(e){console.error("Error joining room:",e)}},className:"setup-button",children:"Join Room with Camera"}),d&&(0,r.jsxs)("div",{className:"mobile-connected",children:[(0,r.jsxs)("h3",{children:["Connected to Room: ",t]}),(0,r.jsx)("video",{ref:A,autoPlay:!0,muted:!0,playsInline:!0,className:"mobile-preview"}),(0,r.jsx)("p",{className:"mobile-status",children:"Your video is being shared with the audience display"})]})]})})]})}},36415:(e,a,t)=>{t.r(a),t.d(a,{default:()=>s});const s={}}}]);
//# sourceMappingURL=7232.8fcfb407.chunk.js.map