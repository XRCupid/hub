"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[1017,3143,5477,5888,7173,7868],{7173:(e,n,a)=>{a.r(n),a.d(n,{RPMAvatarGenerator:()=>l,default:()=>d});var r=a(9950),t=a(35888),o=a(13143),i=a(44414);const s=[{id:"alex",name:"Alex",avatarUrl:"https://models.readyplayer.me/64bfa15f0e72c63d7c3f5a1e.glb",gender:"male",style:"realistic",personality:["intellectual","thoughtful","adventurous"],emotions:{concentration:.3,joy:.2}},{id:"jamie",name:"Jamie",avatarUrl:"https://models.readyplayer.me/64bfa15f0e72c63d7c3f5a2f.glb",gender:"female",style:"realistic",personality:["creative","passionate","witty"],emotions:{joy:.4,excitement:.3}},{id:"sam",name:"Sam",avatarUrl:"https://models.readyplayer.me/64bfa15f0e72c63d7c3f5a3g.glb",gender:"female",style:"realistic",personality:["ambitious","practical","warm"],emotions:{concentration:.2,joy:.3}},{id:"river",name:"River",avatarUrl:"https://models.readyplayer.me/64bfa15f0e72c63d7c3f5a4h.glb",gender:"male",style:"stylized",personality:["artistic","mysterious","sensitive"],emotions:{contemplation:.4,mystery:.3}}],l=e=>{let{onAvatarSelect:n,selectedAvatarId:a,showGenerator:l=!0}=e;const[d,c]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[h,u]=(0,r.useState)(!1),[g,x]=(0,r.useState)("preset"),[f,v]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(a){const e=s.find((e=>e.id===a));e&&c(e)}}),[a]);const b=e=>{c(e),null===n||void 0===n||n(e)};return l?(0,i.jsxs)("div",{className:"rpm-avatar-generator",children:[(0,i.jsxs)("div",{className:"generator-header",children:[(0,i.jsx)("h3",{children:"\ud83c\udfad Choose Your Avatar"}),(0,i.jsxs)("div",{className:"mode-selector",children:[(0,i.jsx)("button",{className:"preset"===g?"active":"",onClick:()=>x("preset"),children:"\ud83d\udccb Presets"}),(0,i.jsx)("button",{className:"generate"===g?"active":"",onClick:()=>x("generate"),children:"\ud83c\udfb2 Generate"}),(0,i.jsx)("button",{className:"custom"===g?"active":"",onClick:()=>x("custom"),children:"\ud83d\udd17 Custom URL"}),(0,i.jsx)("button",{className:"creator"===g?"active":"",onClick:()=>{x("creator"),v(!0)},children:"\ud83c\udfa8 Create"})]})]}),"preset"===g&&(0,i.jsx)("div",{className:"preset-avatars",children:(0,i.jsx)("div",{className:"avatar-grid",children:s.map((e=>(0,i.jsxs)("div",{className:"avatar-card ".concat((null===d||void 0===d?void 0:d.id)===e.id?"selected":""),onClick:()=>b(e),children:[(0,i.jsx)("div",{className:"avatar-preview",children:(0,i.jsx)(t.default,{avatarUrl:e.avatarUrl,emotions:e.emotions,isAnimating:!1,enableControls:!1})}),(0,i.jsxs)("div",{className:"avatar-info",children:[(0,i.jsx)("h4",{children:e.name}),(0,i.jsxs)("div",{className:"avatar-tags",children:[(0,i.jsx)("span",{className:"gender-tag ".concat(e.gender),children:e.gender}),(0,i.jsx)("span",{className:"style-tag ".concat(e.style),children:e.style})]}),(0,i.jsx)("div",{className:"personality-tags",children:e.personality.slice(0,2).map(((e,n)=>(0,i.jsx)("span",{className:"personality-tag",children:e},n)))})]})]},e.id)))})}),"generate"===g&&(0,i.jsx)("div",{className:"avatar-generator",children:(0,i.jsxs)("div",{className:"generator-options",children:[(0,i.jsx)("h4",{children:"\ud83c\udfa8 Generate New Avatar"}),(0,i.jsx)("p",{children:"Create a unique avatar using Ready Player Me's generator"}),(0,i.jsxs)("div",{className:"generation-controls",children:[(0,i.jsxs)("div",{className:"option-group",children:[(0,i.jsx)("label",{children:"Gender:"}),(0,i.jsxs)("select",{children:[(0,i.jsx)("option",{value:"random",children:"Random"}),(0,i.jsx)("option",{value:"male",children:"Male"}),(0,i.jsx)("option",{value:"female",children:"Female"}),(0,i.jsx)("option",{value:"non-binary",children:"Non-binary"})]})]}),(0,i.jsxs)("div",{className:"option-group",children:[(0,i.jsx)("label",{children:"Style:"}),(0,i.jsxs)("select",{children:[(0,i.jsx)("option",{value:"realistic",children:"Realistic"}),(0,i.jsx)("option",{value:"stylized",children:"Stylized"}),(0,i.jsx)("option",{value:"anime",children:"Anime"})]})]})]}),(0,i.jsx)("button",{className:"generate-btn",onClick:async()=>{u(!0);try{await new Promise((e=>setTimeout(e,2e3)));const e="https://models.readyplayer.me/generated-".concat(Date.now(),".glb"),n={id:"generated-".concat(Date.now()),name:"Generated Avatar",avatarUrl:e,gender:"non-binary",style:"realistic",personality:["unique","generated"],emotions:{neutral:.5}};b(n)}catch(e){console.error("Avatar generation failed:",e)}finally{u(!1)}},disabled:h,children:h?"\ud83c\udfb2 Generating...":"\ud83c\udfb2 Generate Avatar"}),(0,i.jsx)("div",{className:"rpm-integration-note",children:(0,i.jsxs)("p",{children:["\ud83d\udca1 ",(0,i.jsx)("strong",{children:"Pro Tip:"})," Visit ",(0,i.jsx)("a",{href:"https://readyplayer.me",target:"_blank",rel:"noopener noreferrer",children:"ReadyPlayer.Me"})," to create custom avatars"]})})]})}),"custom"===g&&(0,i.jsxs)("div",{className:"custom-avatar",children:[(0,i.jsx)("h4",{children:"\ud83d\udd17 Custom Avatar URL"}),(0,i.jsx)("p",{children:"Enter a Ready Player Me avatar URL (.glb file)"}),(0,i.jsxs)("div",{className:"url-input-group",children:[(0,i.jsx)("input",{type:"url",placeholder:"https://models.readyplayer.me/your-avatar.glb",value:p,onChange:e=>m(e.target.value)}),(0,i.jsx)("button",{onClick:()=>{if(p.trim()){const e={id:"custom-".concat(Date.now()),name:"Custom Avatar",avatarUrl:p.trim(),gender:"non-binary",style:"realistic",personality:["custom"],emotions:{neutral:.5}};b(e),m("")}},disabled:!p.trim(),children:"Load Avatar"})]}),(0,i.jsxs)("div",{className:"url-help",children:[(0,i.jsx)("h5",{children:"How to get your avatar URL:"}),(0,i.jsxs)("ol",{children:[(0,i.jsxs)("li",{children:["Visit ",(0,i.jsx)("a",{href:"https://readyplayer.me",target:"_blank",rel:"noopener noreferrer",children:"ReadyPlayer.Me"})]}),(0,i.jsx)("li",{children:"Create or customize your avatar"}),(0,i.jsx)("li",{children:"Copy the .glb model URL"}),(0,i.jsx)("li",{children:"Paste it above"})]})]})]}),"creator"===g&&(0,i.jsx)(o.default,{isOpen:f,onClose:()=>v(!1),onAvatarCreated:e=>{const n={id:"rpm-".concat(Date.now()),name:"My Avatar",avatarUrl:e,gender:"non-binary",style:"realistic",personality:["custom","unique"],emotions:{neutral:.5}};b(n),v(!1)}}),d&&(0,i.jsxs)("div",{className:"selected-avatar-preview",children:[(0,i.jsxs)("h4",{children:["Selected Avatar: ",d.name]}),(0,i.jsx)("div",{className:"preview-container",children:(0,i.jsx)(t.default,{avatarUrl:d.avatarUrl,emotions:d.emotions,enableControls:!0})})]}),(0,i.jsx)("style",{children:"\n        .rpm-avatar-generator {\n          background: white;\n          border-radius: 12px;\n          padding: 24px;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n        }\n\n        .generator-header {\n          margin-bottom: 24px;\n        }\n\n        .generator-header h3 {\n          margin: 0 0 16px 0;\n          color: #333;\n        }\n\n        .mode-selector {\n          display: flex;\n          gap: 8px;\n          background: #f5f5f5;\n          padding: 4px;\n          border-radius: 8px;\n        }\n\n        .mode-selector button {\n          flex: 1;\n          padding: 8px 16px;\n          border: none;\n          background: transparent;\n          border-radius: 6px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: 14px;\n        }\n\n        .mode-selector button.active {\n          background: white;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n          color: #667eea;\n          font-weight: 600;\n        }\n\n        .avatar-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 16px;\n        }\n\n        .avatar-card {\n          border: 2px solid #e9ecef;\n          border-radius: 12px;\n          padding: 16px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          background: white;\n        }\n\n        .avatar-card:hover {\n          border-color: #667eea;\n          transform: translateY(-2px);\n          box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);\n        }\n\n        .avatar-card.selected {\n          border-color: #667eea;\n          background: #f8f9ff;\n        }\n\n        .avatar-preview {\n          height: 200px;\n          margin-bottom: 12px;\n          border-radius: 8px;\n          overflow: hidden;\n          background: #f8f9fa;\n        }\n\n        .avatar-info h4 {\n          margin: 0 0 8px 0;\n          color: #333;\n        }\n\n        .avatar-tags {\n          display: flex;\n          gap: 8px;\n          margin-bottom: 8px;\n        }\n\n        .gender-tag, .style-tag {\n          padding: 4px 8px;\n          border-radius: 12px;\n          font-size: 12px;\n          font-weight: 600;\n          text-transform: capitalize;\n        }\n\n        .gender-tag.male { background: #e3f2fd; color: #1976d2; }\n        .gender-tag.female { background: #fce4ec; color: #c2185b; }\n        .gender-tag.non-binary { background: #f3e5f5; color: #7b1fa2; }\n\n        .style-tag.realistic { background: #e8f5e8; color: #2e7d32; }\n        .style-tag.stylized { background: #fff3e0; color: #f57c00; }\n        .style-tag.anime { background: #e1f5fe; color: #0277bd; }\n\n        .personality-tags {\n          display: flex;\n          gap: 4px;\n          flex-wrap: wrap;\n        }\n\n        .personality-tag {\n          background: #f5f5f5;\n          color: #666;\n          padding: 2px 6px;\n          border-radius: 8px;\n          font-size: 11px;\n        }\n\n        .generator-options {\n          text-align: center;\n          padding: 24px;\n        }\n\n        .generation-controls {\n          display: flex;\n          gap: 16px;\n          justify-content: center;\n          margin: 20px 0;\n        }\n\n        .option-group {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .option-group label {\n          font-size: 14px;\n          font-weight: 600;\n          color: #333;\n        }\n\n        .option-group select {\n          padding: 8px 12px;\n          border: 1px solid #ddd;\n          border-radius: 6px;\n          font-size: 14px;\n        }\n\n        .generate-btn {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 8px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: transform 0.2s ease;\n        }\n\n        .generate-btn:hover:not(:disabled) {\n          transform: translateY(-2px);\n        }\n\n        .generate-btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .rpm-integration-note {\n          margin-top: 20px;\n          padding: 16px;\n          background: #f8f9ff;\n          border-radius: 8px;\n          border-left: 4px solid #667eea;\n        }\n\n        .rpm-integration-note a {\n          color: #667eea;\n          text-decoration: none;\n          font-weight: 600;\n        }\n\n        .url-input-group {\n          display: flex;\n          gap: 8px;\n          margin: 16px 0;\n        }\n\n        .url-input-group input {\n          flex: 1;\n          padding: 12px;\n          border: 1px solid #ddd;\n          border-radius: 6px;\n          font-size: 14px;\n        }\n\n        .url-input-group button {\n          background: #667eea;\n          color: white;\n          border: none;\n          padding: 12px 20px;\n          border-radius: 6px;\n          cursor: pointer;\n          font-weight: 600;\n        }\n\n        .url-help {\n          background: #f8f9fa;\n          padding: 16px;\n          border-radius: 8px;\n          text-align: left;\n        }\n\n        .url-help h5 {\n          margin: 0 0 8px 0;\n          color: #333;\n        }\n\n        .url-help ol {\n          margin: 0;\n          padding-left: 20px;\n        }\n\n        .url-help li {\n          margin-bottom: 4px;\n        }\n\n        .selected-avatar-preview {\n          margin-top: 24px;\n          padding-top: 24px;\n          border-top: 1px solid #e9ecef;\n        }\n\n        .selected-avatar-preview h4 {\n          margin: 0 0 16px 0;\n          color: #333;\n        }\n\n        .preview-container {\n          height: 300px;\n          border-radius: 12px;\n          overflow: hidden;\n          background: #f8f9fa;\n        }\n      "})]}):d?(0,i.jsx)(t.default,{avatarUrl:d.avatarUrl,emotions:d.emotions,className:"selected-avatar"}):null},d=l},13143:(e,n,a)=>{a.r(n),a.d(n,{default:()=>i});var r=a(9950),t=a(73017),o=a(44414);const i=e=>{let{isOpen:n,onClose:a,onAvatarCreated:i,title:s="Create Your Avatar"}=e;const l=(0,r.useRef)(null),[d,c]=(0,r.useState)(!0),[p,m]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(!n)return;const e=t.F.setupAvatarCreatorListener((e=>{console.log("Avatar created successfully:",e),i(e),a()}),(e=>{console.error("Avatar creation error:",e),m(e)}));return e}),[n,i,a]);if(!n)return null;const h=t.F.getAvatarCreatorUrl({bodyType:"halfbody",quickStart:!1,clearCache:!0});return(0,o.jsxs)("div",{className:"rpm-modal-overlay",children:[(0,o.jsxs)("div",{className:"rpm-modal",children:[(0,o.jsxs)("div",{className:"rpm-modal-header",children:[(0,o.jsx)("h2",{children:s}),(0,o.jsx)("button",{className:"rpm-close-btn",onClick:a,children:"\u2715"})]}),(0,o.jsxs)("div",{className:"rpm-modal-content",children:[d&&(0,o.jsxs)("div",{className:"rpm-loading",children:[(0,o.jsx)("div",{className:"rpm-spinner"}),(0,o.jsx)("p",{children:"Loading avatar creator..."})]}),p&&(0,o.jsxs)("div",{className:"rpm-error",children:[(0,o.jsx)("h3",{children:"Configuration Required"}),(0,o.jsx)("p",{children:p}),(0,o.jsxs)("div",{className:"rpm-setup-instructions",children:[(0,o.jsx)("h4",{children:"Setup Instructions:"}),(0,o.jsxs)("ol",{children:[(0,o.jsxs)("li",{children:["Go to ",(0,o.jsx)("a",{href:"https://studio.readyplayer.me",target:"_blank",rel:"noopener noreferrer",children:"studio.readyplayer.me"})]}),(0,o.jsx)("li",{children:"Create a free developer account"}),(0,o.jsx)("li",{children:"Create a new Application"}),(0,o.jsx)("li",{children:"Copy your subdomain and App ID"}),(0,o.jsxs)("li",{children:["Update the configuration in ",(0,o.jsx)("code",{children:"src/services/readyPlayerMeService.ts"})]})]})]})]}),(0,o.jsx)("iframe",{ref:l,src:h,className:"rpm-iframe",onLoad:()=>{c(!1)},onError:()=>{c(!1),m("Failed to load avatar creator. Please check your RPM configuration.")},allow:"camera; microphone"})]})]}),(0,o.jsx)("style",{children:"\n        .rpm-modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.8);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n        }\n\n        .rpm-modal {\n          background: white;\n          border-radius: 12px;\n          width: 90vw;\n          height: 90vh;\n          max-width: 800px;\n          max-height: 600px;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        }\n\n        .rpm-modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 20px;\n          border-bottom: 1px solid #eee;\n          background: #f8f9fa;\n        }\n\n        .rpm-modal-header h2 {\n          margin: 0;\n          color: #333;\n        }\n\n        .rpm-close-btn {\n          background: none;\n          border: none;\n          font-size: 24px;\n          cursor: pointer;\n          color: #666;\n          padding: 0;\n          width: 30px;\n          height: 30px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .rpm-close-btn:hover {\n          color: #333;\n        }\n\n        .rpm-modal-content {\n          flex: 1;\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n\n        .rpm-iframe {\n          width: 100%;\n          height: 100%;\n          border: none;\n          flex: 1;\n        }\n\n        .rpm-loading {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          background: white;\n          z-index: 10;\n        }\n\n        .rpm-spinner {\n          width: 40px;\n          height: 40px;\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid #007bff;\n          border-radius: 50%;\n          animation: rpm-spin 1s linear infinite;\n          margin-bottom: 16px;\n        }\n\n        @keyframes rpm-spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .rpm-error {\n          padding: 40px;\n          text-align: center;\n          color: #666;\n        }\n\n        .rpm-error h3 {\n          color: #dc3545;\n          margin-bottom: 16px;\n        }\n\n        .rpm-setup-instructions {\n          background: #f8f9fa;\n          padding: 20px;\n          border-radius: 8px;\n          margin-top: 20px;\n          text-align: left;\n        }\n\n        .rpm-setup-instructions h4 {\n          margin-top: 0;\n          color: #333;\n        }\n\n        .rpm-setup-instructions ol {\n          margin: 16px 0;\n          padding-left: 20px;\n        }\n\n        .rpm-setup-instructions li {\n          margin-bottom: 8px;\n        }\n\n        .rpm-setup-instructions a {\n          color: #007bff;\n          text-decoration: none;\n        }\n\n        .rpm-setup-instructions a:hover {\n          text-decoration: underline;\n        }\n\n        .rpm-setup-instructions code {\n          background: #e9ecef;\n          padding: 2px 6px;\n          border-radius: 4px;\n          font-family: 'Monaco', 'Consolas', monospace;\n          font-size: 14px;\n        }\n      "})]})}},21432:(e,n,a)=>{a.d(n,{du:()=>r,gr:()=>o});const r=[{id:"demo-male-1",name:"Alex",gender:"male",style:"realistic",avatarUrl:"https://models.readyplayer.me/6409c2e6d4bb6b0001b84d5d.glb"},{id:"demo-female-1",name:"Jordan",gender:"female",style:"realistic",avatarUrl:"https://models.readyplayer.me/6409c2e6d4bb6b0001b84d5e.glb"},{id:"demo-female-2",name:"Sam",gender:"female",style:"realistic",avatarUrl:"https://models.readyplayer.me/6409c2e6d4bb6b0001b84d5f.glb"},{id:"demo-male-2",name:"River",gender:"male",style:"realistic",avatarUrl:"https://models.readyplayer.me/6409c2e6d4bb6b0001b84d60.glb"},{id:"haseeb-avatar",name:"Haseeb",gender:"male",style:"realistic",avatarUrl:"/avatars/Haseeb.glb"},{id:"dougie-avatar",name:"Dougie",gender:"male",style:"realistic",avatarUrl:"/avatars/Dougie.glb"}],t="\n\ud83c\udfad HOW TO GET REAL RPM AVATARS:\n\n1. CREATE AVATARS:\n   \u2022 Visit https://readyplayer.me\n   \u2022 Create free avatars for your NPCs\n   \u2022 Copy the .glb URLs (e.g., https://models.readyplayer.me/your-avatar-id.glb)\n\n2. UPDATE AVATAR URLS:\n   \u2022 Replace empty URLs in DEMO_RPM_AVATARS with your real avatar URLs\n   \u2022 Or use the RPMAvatarCreator component to let users input custom URLs\n\n3. CURRENT STATUS:\n   \u2022 Fallback geometric avatars are showing (blue 3D shapes with simple faces)\n   \u2022 These demonstrate the 3D avatar positioning and emotion system\n   \u2022 Replace URLs to see actual RPM avatars with realistic faces and bodies\n\n4. WHERE TO SEE AVATARS:\n   \u2022 Dating Simulation \u2192 Match with someone \u2192 Chat \u2192 Video Date\n   \u2022 The 3D avatar appears in the video call interface\n   \u2022 Emotions change based on conversation (via Hume AI)\n";class o{static getAvatarCreatorUrl(e){const n=new URLSearchParams;null!==e&&void 0!==e&&e.bodyType&&n.set("bodyType",e.bodyType),null!==e&&void 0!==e&&e.quickStart&&n.set("quickStart","true"),null!==e&&void 0!==e&&e.clearCache&&n.set("clearCache","true");const a=n.toString(),r="https://".concat(this.RPM_SUBDOMAIN,".readyplayer.me/avatar");return a?"".concat(r,"?").concat(a):r}static isValidAvatarUrl(e){return/^https:\/\/(models\.readyplayer\.me|d1a370nemizbjq\.cloudfront\.net)\/.+\.glb$/.test(e)}static getRandomDemoAvatar(){const e=r;return e[Math.floor(Math.random()*e.length)]}static getAvatarByName(e){return r.find((n=>n.name.toLowerCase()===e.toLowerCase()))||null}static logSetupInstructions(){console.log(t)}}o.RPM_SUBDOMAIN="demo",o.RPM_API_BASE="https://api.readyplayer.me/v1"},25477:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const r={}},35888:(e,n,a)=>{a.r(n),a.d(n,{RPMAvatar:()=>v,default:()=>b});var r=a(89379),t=a(9950),o=a(12880),i=a(52111),s=a(42092),l=a(68057),d=a(6005),c=a(15061),p=a(13437),m=a(21432),h=(a(25477),a(97868)),u=a(44414);const g={mouthSmile_L:"joy",mouthSmile_R:"joy",cheekSquint_L:"joy",cheekSquint_R:"joy",mouthFrown_L:"sadness",mouthFrown_R:"sadness",browInnerUp:"sadness",browDown_L:"anger",browDown_R:"anger",mouthPress_L:"anger",mouthPress_R:"anger",nostrilDilate_L:"anger",nostrilDilate_R:"anger",eyeWide_L_fear:"fear",eyeWide_R_fear:"fear",browUp_L_fear:"fear",browUp_R_fear:"fear",mouthOpen_fear:"fear",eyeWide_L_surprise:"surprise",eyeWide_R_surprise:"surprise",browUp_L_surprise:"surprise",browUp_R_surprise:"surprise",mouthOpen_surprise:"surprise",noseSneer_L:"disgust",noseSneer_R:"disgust",mouthUpperUp_L:"disgust",mouthUpperUp_R:"disgust",mouthSmile_L_contempt:"contempt",noseSneer_L_contempt:"contempt",mouthSmile_L_excitement:"excitement",mouthSmile_R_excitement:"excitement",eyeWide_L_excitement:"excitement",eyeWide_R_excitement:"excitement",browDown_L_concentration:"concentration",browDown_R_concentration:"concentration",eyeSquint_L:"concentration",eyeSquint_R:"concentration"},x=e=>{let{avatarUrl:n,position:a=[0,0,0],blendShapes:o}=e;const i=t.useMemo((()=>{const e=(n||"default").split("").reduce(((e,n)=>e+n.charCodeAt(0)),0);return(0,h.generateAvatarConfig)({gender:e%2===0?"male":"female",ethnicity:["caucasian","asian","african","hispanic"][e%4],style:["professional","casual","creative","elegant"][e%4],age:e%3===0?"young":"middle"})}),[n]);return(0,u.jsx)(h.ProceduralAvatar,(0,r.A)((0,r.A)({},i),{},{position:a,blendShapes:o}))},f=e=>{let{avatarUrl:n,emotions:a={},isAnimating:r=!1,position:i=[0,0,0],blendShapes:l={}}=e;const d=(0,t.useRef)(null),[m,h]=(0,t.useState)([]),[f,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),[j,w]=(0,t.useState)(0),{actions:S,names:A}=(0,s.f)((null===b||void 0===b?void 0:b.animations)||[],d);return(0,t.useEffect)((()=>{if(!n)return console.log("RPMAvatar: No avatar URL provided, showing fallback"),void v(!0);console.log("RPMAvatar: Attempting to load avatar from:",n);(new c.B).load(n,(e=>{console.log("RPMAvatar: Successfully loaded avatar:",e),y(e),v(!1)}),(e=>{console.log("RPMAvatar: Loading progress:",e)}),(e=>{console.error("RPMAvatar: Failed to load avatar from",n,"Error:",e),v(!0)}))}),[n]),(0,t.useEffect)((()=>{if(b&&b.scene&&b.scene.children){const e=[];b.scene.traverse((n=>{if(n instanceof p.Mesh&&n.morphTargetDictionary){console.log("\ud83c\udfaf Available morph targets:",Object.keys(n.morphTargetDictionary)),e.push(n);const a=n.morphTargetDictionary.mouthSmileLeft,r=n.morphTargetDictionary.mouthSmileRight;void 0!==a&&void 0!==r&&n.morphTargetInfluences&&(n.morphTargetInfluences[a]=.2,n.morphTargetInfluences[r]=.2);const t=n.morphTargetDictionary.eyeBlinkLeft,o=n.morphTargetDictionary.eyeBlinkRight;console.log("\ud83d\udc41\ufe0f Blink morph targets found:",{leftBlink:void 0!==t,rightBlink:void 0!==o})}})),h(e)}}),[b]),(0,t.useEffect)((()=>{if(!b||!d.current)return;(new c.B).load("/animations/Idle.glb",(e=>{if(e.animations.length>0&&d.current){const n=new p.AnimationMixer(d.current);n.clipAction(e.animations[0]).play(),d.current.mixer=n}}),void 0,(e=>{console.log("Could not load idle animation, avatar will remain in T-pose")}))}),[b]),(0,t.useEffect)((()=>{m.length>0&&m.forEach((e=>{e.morphTargetInfluences&&e.morphTargetInfluences.fill(0),Object.entries(a).forEach((n=>{let[a,r]=n;Object.entries(g).forEach((n=>{let[t,o]=n;if(o===a&&void 0!==e.morphTargetDictionary[t]){const n=e.morphTargetDictionary[t];e.morphTargetInfluences&&void 0!==n&&(e.morphTargetInfluences[n]=Math.min(r,1))}}))}))}))}),[a,m]),(0,t.useEffect)((()=>{m.length>0&&m.forEach((e=>{Object.entries(l).forEach((n=>{let[a,r]=n;if(e.morphTargetDictionary&&e.morphTargetInfluences){const n=e.morphTargetDictionary[a];void 0!==n&&(e.morphTargetInfluences[n]=r)}}))}))}),[m,l]),(0,o.F)(((e,n)=>{if(r&&d.current,d.current&&d.current.mixer&&d.current.mixer.update(n),w((e=>e+n)),m.length>0&&j>2&&m.forEach((e=>{if(e.morphTargetDictionary&&e.morphTargetInfluences){const n=e.morphTargetDictionary.eyeBlinkLeft,a=e.morphTargetDictionary.eyeBlinkRight;if(void 0!==n&&void 0!==a){const r=15*(j-2);if(r<1){const t=Math.sin(r*Math.PI);e.morphTargetInfluences[n]=t,e.morphTargetInfluences[a]=t}else e.morphTargetInfluences[n]=0,e.morphTargetInfluences[a]=0,r>1.5&&w(0)}}})),d.current){const n=.01*Math.sin(.5*e.clock.elapsedTime);d.current.scale.y=1+n}})),f||!n?(console.log("\ud83c\udfad Avatar3D: Rendering fallback avatar. loadError:",f,"avatarUrl:",n),(0,u.jsx)(x,{avatarUrl:n,position:i,blendShapes:l})):b?(0,u.jsx)("group",{ref:d,position:i,children:(0,u.jsx)("primitive",{object:b.scene})}):(console.log("\ud83c\udfad Avatar3D: No GLTF loaded yet, returning null"),null)},v=e=>{let{avatarUrl:n,emotions:a={},isAnimating:r=!0,scale:o=1,position:s=[0,-1,0],enableControls:c=!1,className:p="",blendShapes:h={}}=e;const[g,x]=(0,t.useState)(!0),[v,b]=(0,t.useState)(null);return(0,t.useEffect)((()=>{console.log(" RPMAvatar render - URL:",n,"isEmpty:",!n),n||(console.log(" RPM Avatar: No URL provided, showing fallback avatar"),x(!1),m.gr.logSetupInstructions())}),[n]),(0,u.jsxs)("div",{className:"rpm-avatar-container ".concat(p),style:{width:"100%",height:"100%",position:"relative"},children:[g&&(0,u.jsxs)("div",{className:"avatar-loading",children:[(0,u.jsx)("div",{className:"loading-spinner"}),(0,u.jsx)("p",{children:"Loading avatar..."})]}),v&&(0,u.jsxs)("div",{className:"avatar-error",children:[(0,u.jsxs)("p",{children:[" ",v]}),(0,u.jsx)("p",{children:"Using fallback image"})]}),(0,u.jsxs)(i.Hl,{camera:{position:[0,1.6,1.2],fov:30},style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",width:"100%",height:"100%"},gl:{preserveDrawingBuffer:!0,antialias:!0,alpha:!0},onCreated:e=>{console.log("\ud83c\udfa8 Canvas created successfully!",e);const n=e.gl.domElement;n.addEventListener("webglcontextlost",(e=>{console.warn("\ud83d\udea8 WebGL context lost, preventing default"),e.preventDefault()})),n.addEventListener("webglcontextrestored",(()=>{console.log("\u2705 WebGL context restored")})),x(!1)},onError:e=>{console.error("\ud83d\udea8 Canvas error:",e),(e=>{console.error("RPM Avatar loading error:",e),b("Failed to load avatar"),x(!1)})(e)},children:[(0,u.jsx)("ambientLight",{intensity:.5}),(0,u.jsx)("directionalLight",{position:[0,2,3],intensity:1.2}),(0,u.jsx)("pointLight",{position:[-2,1,2],intensity:.8,color:"#ffd700"}),(0,u.jsx)("pointLight",{position:[2,1,2],intensity:.6,color:"#87ceeb"}),(0,u.jsx)(f,{avatarUrl:n,emotions:a,isAnimating:r,position:s,blendShapes:h}),(0,u.jsx)(l.N,{enableZoom:!1,enablePan:!1,enableRotate:!1,target:[0,1.5,0]}),(0,u.jsx)(d.OH,{preset:"studio"})]})]})},b=v},97868:(e,n,a)=>{a.r(n),a.d(n,{ProceduralAvatar:()=>i,generateAvatarConfig:()=>s});var r=a(9950),t=a(12880),o=a(44414);const i=e=>{let{gender:n,skinTone:a,hairColor:i,hairStyle:s,clothingColor:l,position:d=[0,0,0],blendShapes:c={}}=e;const p=(0,r.useRef)(null),m=(0,r.useRef)(null),h=(0,r.useMemo)((()=>{const e={light:"#fdbcb4",medium:"#d4a574",dark:"#8b6f47",pale:"#ffe0bd",tan:"#cd853f"};return e[a]||e.medium}),[a]),u=(0,r.useMemo)((()=>"female"===n?{shoulderWidth:.35,hipWidth:.4,chestSize:.15,waistSize:.3,headSize:.25}:{shoulderWidth:.45,hipWidth:.35,chestSize:.1,waistSize:.35,headSize:.28}),[n]);return(0,t.F)((e=>{p.current&&(p.current.scale.y=1+.01*Math.sin(2*e.clock.elapsedTime),p.current.rotation.y=.05*Math.sin(.5*e.clock.elapsedTime)),m.current&&c&&(c.mouthSmile,c.eyesClosed)})),(0,o.jsxs)("group",{ref:p,position:d,children:[(0,o.jsxs)("mesh",{ref:m,position:[0,1.6,0],children:[(0,o.jsx)("sphereGeometry",{args:[u.headSize,16,16]}),(0,o.jsx)("meshStandardMaterial",{color:h})]}),(0,o.jsxs)("mesh",{position:[-.08,1.65,.2],children:[(0,o.jsx)("sphereGeometry",{args:[.03,8,8]}),(0,o.jsx)("meshStandardMaterial",{color:"#333"})]}),(0,o.jsxs)("mesh",{position:[.08,1.65,.2],children:[(0,o.jsx)("sphereGeometry",{args:[.03,8,8]}),(0,o.jsx)("meshStandardMaterial",{color:"#333"})]}),"bald"!==s&&(0,o.jsxs)("mesh",{position:[0,1.75,0],children:[(0,o.jsx)("sphereGeometry",{args:[u.headSize+.05,16,16,0,2*Math.PI,0,"short"===s?.4*Math.PI:"medium"===s?.5*Math.PI:.6*Math.PI]}),(0,o.jsx)("meshStandardMaterial",{color:i})]}),(0,o.jsxs)("mesh",{position:[0,1,0],children:[(0,o.jsx)("cylinderGeometry",{args:[u.shoulderWidth,u.hipWidth,.8,8]}),(0,o.jsx)("meshStandardMaterial",{color:l})]}),(0,o.jsxs)("mesh",{position:[-u.shoulderWidth-.15,1,0],rotation:[0,0,-.3],children:[(0,o.jsx)("cylinderGeometry",{args:[.08,.06,.7,8]}),(0,o.jsx)("meshStandardMaterial",{color:h})]}),(0,o.jsxs)("mesh",{position:[u.shoulderWidth+.15,1,0],rotation:[0,0,.3],children:[(0,o.jsx)("cylinderGeometry",{args:[.08,.06,.7,8]}),(0,o.jsx)("meshStandardMaterial",{color:h})]}),(0,o.jsxs)("mesh",{position:[-.15,.2,0],children:[(0,o.jsx)("cylinderGeometry",{args:[.1,.08,.8,8]}),(0,o.jsx)("meshStandardMaterial",{color:"#2c3e50"})]}),(0,o.jsxs)("mesh",{position:[.15,.2,0],children:[(0,o.jsx)("cylinderGeometry",{args:[.1,.08,.8,8]}),(0,o.jsx)("meshStandardMaterial",{color:"#2c3e50"})]})]})},s=e=>{const n=["#2c3e50","#8b4513","#daa520","#dc143c","#696969"];return{gender:e.gender||"female",skinTone:{caucasian:"light",asian:"pale",african:"dark",hispanic:"medium",middleEastern:"tan"}[e.ethnicity||"caucasian"]||"medium",hairColor:n[Math.floor(Math.random()*n.length)],hairStyle:["short","medium","long"][Math.floor(3*Math.random())],clothingColor:{professional:"#2c3e50",casual:"#3498db",creative:"#9b59b6",elegant:"#c0392b",athletic:"#27ae60"}[e.style||"casual"]||"#3498db"}}}}]);