{"version":3,"file":"static/js/8452.e33a259c.chunk.js","mappings":"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","sources":["../node_modules/src/curves/NURBSUtils.js","../node_modules/src/curves/NURBSCurve.js","../node_modules/src/_polyfill/uv1.ts","../node_modules/src/loaders/FBXLoader.js","../node_modules/@readyplayerme/visage/dist/index.esm.js"],"sourcesContent":["import { Vector3, Vector4 } from 'three'\n\n/**\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n **/\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\n/*\nFinds knot vector span.\n\np : degree\nu : parametric value\nU : knot vector\n\nreturns the span\n*/\nfunction findSpan(p, u, U) {\n  const n = U.length - p - 1\n\n  if (u >= U[n]) {\n    return n - 1\n  }\n\n  if (u <= U[p]) {\n    return p\n  }\n\n  let low = p\n  let high = n\n  let mid = Math.floor((low + high) / 2)\n\n  while (u < U[mid] || u >= U[mid + 1]) {\n    if (u < U[mid]) {\n      high = mid\n    } else {\n      low = mid\n    }\n\n    mid = Math.floor((low + high) / 2)\n  }\n\n  return mid\n}\n\n/*\nCalculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nU    : knot vector\n\nreturns array[p+1] with basis functions values.\n*/\nfunction calcBasisFunctions(span, u, p, U) {\n  const N = []\n  const left = []\n  const right = []\n  N[0] = 1.0\n\n  for (let j = 1; j <= p; ++j) {\n    left[j] = u - U[span + 1 - j]\n    right[j] = U[span + j] - u\n\n    let saved = 0.0\n\n    for (let r = 0; r < j; ++r) {\n      const rv = right[r + 1]\n      const lv = left[j - r]\n      const temp = N[r] / (rv + lv)\n      N[r] = saved + rv * temp\n      saved = lv * temp\n    }\n\n    N[j] = saved\n  }\n\n  return N\n}\n\n/*\nCalculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n\np : degree of B-Spline\nU : knot vector\nP : control points (x, y, z, w)\nu : parametric point\n\nreturns point for given u\n*/\nfunction calcBSplinePoint(p, U, P, u) {\n  const span = findSpan(p, u, U)\n  const N = calcBasisFunctions(span, u, p, U)\n  const C = new Vector4(0, 0, 0, 0)\n\n  for (let j = 0; j <= p; ++j) {\n    const point = P[span - p + j]\n    const Nj = N[j]\n    const wNj = point.w * Nj\n    C.x += point.x * wNj\n    C.y += point.y * wNj\n    C.z += point.z * wNj\n    C.w += point.w * Nj\n  }\n\n  return C\n}\n\n/*\nCalculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nn    : number of derivatives to calculate\nU    : knot vector\n\nreturns array[n+1][p+1] with basis functions derivatives\n*/\nfunction calcBasisFunctionDerivatives(span, u, p, n, U) {\n  const zeroArr = []\n  for (let i = 0; i <= p; ++i) zeroArr[i] = 0.0\n\n  const ders = []\n\n  for (let i = 0; i <= n; ++i) ders[i] = zeroArr.slice(0)\n\n  const ndu = []\n\n  for (let i = 0; i <= p; ++i) ndu[i] = zeroArr.slice(0)\n\n  ndu[0][0] = 1.0\n\n  const left = zeroArr.slice(0)\n  const right = zeroArr.slice(0)\n\n  for (let j = 1; j <= p; ++j) {\n    left[j] = u - U[span + 1 - j]\n    right[j] = U[span + j] - u\n\n    let saved = 0.0\n\n    for (let r = 0; r < j; ++r) {\n      const rv = right[r + 1]\n      const lv = left[j - r]\n      ndu[j][r] = rv + lv\n\n      const temp = ndu[r][j - 1] / ndu[j][r]\n      ndu[r][j] = saved + rv * temp\n      saved = lv * temp\n    }\n\n    ndu[j][j] = saved\n  }\n\n  for (let j = 0; j <= p; ++j) {\n    ders[0][j] = ndu[j][p]\n  }\n\n  for (let r = 0; r <= p; ++r) {\n    let s1 = 0\n    let s2 = 1\n\n    const a = []\n    for (let i = 0; i <= p; ++i) {\n      a[i] = zeroArr.slice(0)\n    }\n\n    a[0][0] = 1.0\n\n    for (let k = 1; k <= n; ++k) {\n      let d = 0.0\n      const rk = r - k\n      const pk = p - k\n\n      if (r >= k) {\n        a[s2][0] = a[s1][0] / ndu[pk + 1][rk]\n        d = a[s2][0] * ndu[rk][pk]\n      }\n\n      const j1 = rk >= -1 ? 1 : -rk\n      const j2 = r - 1 <= pk ? k - 1 : p - r\n\n      for (let j = j1; j <= j2; ++j) {\n        a[s2][j] = (a[s1][j] - a[s1][j - 1]) / ndu[pk + 1][rk + j]\n        d += a[s2][j] * ndu[rk + j][pk]\n      }\n\n      if (r <= pk) {\n        a[s2][k] = -a[s1][k - 1] / ndu[pk + 1][r]\n        d += a[s2][k] * ndu[r][pk]\n      }\n\n      ders[k][r] = d\n\n      const j = s1\n      s1 = s2\n      s2 = j\n    }\n  }\n\n  let r = p\n\n  for (let k = 1; k <= n; ++k) {\n    for (let j = 0; j <= p; ++j) {\n      ders[k][j] *= r\n    }\n\n    r *= p - k\n  }\n\n  return ders\n}\n\n/*\n\tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n\n\tp  : degree\n\tU  : knot vector\n\tP  : control points\n\tu  : Parametric points\n\tnd : number of derivatives\n\n\treturns array[d+1] with derivatives\n\t*/\nfunction calcBSplineDerivatives(p, U, P, u, nd) {\n  const du = nd < p ? nd : p\n  const CK = []\n  const span = findSpan(p, u, U)\n  const nders = calcBasisFunctionDerivatives(span, u, p, du, U)\n  const Pw = []\n\n  for (let i = 0; i < P.length; ++i) {\n    const point = P[i].clone()\n    const w = point.w\n\n    point.x *= w\n    point.y *= w\n    point.z *= w\n\n    Pw[i] = point\n  }\n\n  for (let k = 0; k <= du; ++k) {\n    const point = Pw[span - p].clone().multiplyScalar(nders[k][0])\n\n    for (let j = 1; j <= p; ++j) {\n      point.add(Pw[span - p + j].clone().multiplyScalar(nders[k][j]))\n    }\n\n    CK[k] = point\n  }\n\n  for (let k = du + 1; k <= nd + 1; ++k) {\n    CK[k] = new Vector4(0, 0, 0)\n  }\n\n  return CK\n}\n\n/*\nCalculate \"K over I\"\n\nreturns k!/(i!(k-i)!)\n*/\nfunction calcKoverI(k, i) {\n  let nom = 1\n\n  for (let j = 2; j <= k; ++j) {\n    nom *= j\n  }\n\n  let denom = 1\n\n  for (let j = 2; j <= i; ++j) {\n    denom *= j\n  }\n\n  for (let j = 2; j <= k - i; ++j) {\n    denom *= j\n  }\n\n  return nom / denom\n}\n\n/*\nCalculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n\nPders : result of function calcBSplineDerivatives\n\nreturns array with derivatives for rational curve.\n*/\nfunction calcRationalCurveDerivatives(Pders) {\n  const nd = Pders.length\n  const Aders = []\n  const wders = []\n\n  for (let i = 0; i < nd; ++i) {\n    const point = Pders[i]\n    Aders[i] = new Vector3(point.x, point.y, point.z)\n    wders[i] = point.w\n  }\n\n  const CK = []\n\n  for (let k = 0; k < nd; ++k) {\n    const v = Aders[k].clone()\n\n    for (let i = 1; i <= k; ++i) {\n      v.sub(CK[k - i].clone().multiplyScalar(calcKoverI(k, i) * wders[i]))\n    }\n\n    CK[k] = v.divideScalar(wders[0])\n  }\n\n  return CK\n}\n\n/*\nCalculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n\np  : degree\nU  : knot vector\nP  : control points in homogeneous space\nu  : parametric points\nnd : number of derivatives\n\nreturns array with derivatives.\n*/\nfunction calcNURBSDerivatives(p, U, P, u, nd) {\n  const Pders = calcBSplineDerivatives(p, U, P, u, nd)\n  return calcRationalCurveDerivatives(Pders)\n}\n\n/*\nCalculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n\np1, p2 : degrees of B-Spline surface\nU1, U2 : knot vectors\nP      : control points (x, y, z, w)\nu, v   : parametric values\n\nreturns point for given (u, v)\n*/\nfunction calcSurfacePoint(p, q, U, V, P, u, v, target) {\n  const uspan = findSpan(p, u, U)\n  const vspan = findSpan(q, v, V)\n  const Nu = calcBasisFunctions(uspan, u, p, U)\n  const Nv = calcBasisFunctions(vspan, v, q, V)\n  const temp = []\n\n  for (let l = 0; l <= q; ++l) {\n    temp[l] = new Vector4(0, 0, 0, 0)\n    for (let k = 0; k <= p; ++k) {\n      const point = P[uspan - p + k][vspan - q + l].clone()\n      const w = point.w\n      point.x *= w\n      point.y *= w\n      point.z *= w\n      temp[l].add(point.multiplyScalar(Nu[k]))\n    }\n  }\n\n  const Sw = new Vector4(0, 0, 0, 0)\n  for (let l = 0; l <= q; ++l) {\n    Sw.add(temp[l].multiplyScalar(Nv[l]))\n  }\n\n  Sw.divideScalar(Sw.w)\n  target.set(Sw.x, Sw.y, Sw.z)\n}\n\nexport {\n  findSpan,\n  calcBasisFunctions,\n  calcBSplinePoint,\n  calcBasisFunctionDerivatives,\n  calcBSplineDerivatives,\n  calcKoverI,\n  calcRationalCurveDerivatives,\n  calcNURBSDerivatives,\n  calcSurfacePoint,\n}\n","import { Curve, Vector3, Vector4 } from 'three'\nimport * as NURBSUtils from '../curves/NURBSUtils'\n\n/**\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nclass NURBSCurve extends Curve {\n  constructor(\n    degree,\n    knots /* array of reals */,\n    controlPoints /* array of Vector(2|3|4) */,\n    startKnot /* index in knots */,\n    endKnot /* index in knots */,\n  ) {\n    super()\n\n    this.degree = degree\n    this.knots = knots\n    this.controlPoints = []\n    // Used by periodic NURBS to remove hidden spans\n    this.startKnot = startKnot || 0\n    this.endKnot = endKnot || this.knots.length - 1\n    for (let i = 0; i < controlPoints.length; ++i) {\n      // ensure Vector4 for control points\n      const point = controlPoints[i]\n      this.controlPoints[i] = new Vector4(point.x, point.y, point.z, point.w)\n    }\n  }\n\n  getPoint(t, optionalTarget) {\n    const point = optionalTarget || new Vector3()\n\n    const u = this.knots[this.startKnot] + t * (this.knots[this.endKnot] - this.knots[this.startKnot]) // linear mapping t->u\n\n    // following results in (wx, wy, wz, w) homogeneous point\n    const hpoint = NURBSUtils.calcBSplinePoint(this.degree, this.knots, this.controlPoints, u)\n\n    if (hpoint.w != 1.0) {\n      // project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n      hpoint.divideScalar(hpoint.w)\n    }\n\n    return point.set(hpoint.x, hpoint.y, hpoint.z)\n  }\n\n  getTangent(t, optionalTarget) {\n    const tangent = optionalTarget || new Vector3()\n\n    const u = this.knots[0] + t * (this.knots[this.knots.length - 1] - this.knots[0])\n    const ders = NURBSUtils.calcNURBSDerivatives(this.degree, this.knots, this.controlPoints, u, 1)\n    tangent.copy(ders[1]).normalize()\n\n    return tangent\n  }\n}\n\nexport { NURBSCurve }\n","import { version } from \"./constants\";\n\n/** uv2 renamed to uv1 in r125\n * \n * https://github.com/mrdoob/three.js/pull/25943\n*/\nexport const UV1 = version >= 125 ? 'uv1' : 'uv2'","import {\n  AmbientLight,\n  AnimationClip,\n  Bone,\n  BufferGeometry,\n  ClampToEdgeWrapping,\n  Color,\n  DirectionalLight,\n  EquirectangularReflectionMapping,\n  Euler,\n  FileLoader,\n  Float32BufferAttribute,\n  Group,\n  Line,\n  LineBasicMaterial,\n  Loader,\n  LoaderUtils,\n  MathUtils,\n  Matrix3,\n  Matrix4,\n  Mesh,\n  MeshLambertMaterial,\n  MeshPhongMaterial,\n  NumberKeyframeTrack,\n  Object3D,\n  OrthographicCamera,\n  PerspectiveCamera,\n  PointLight,\n  PropertyBinding,\n  Quaternion,\n  QuaternionKeyframeTrack,\n  RepeatWrapping,\n  Skeleton,\n  SkinnedMesh,\n  SpotLight,\n  Texture,\n  TextureLoader,\n  Uint16BufferAttribute,\n  Vector3,\n  Vector4,\n  VectorKeyframeTrack,\n} from 'three'\nimport { unzlibSync } from 'fflate'\nimport { NURBSCurve } from '../curves/NURBSCurve'\nimport { decodeText } from '../_polyfill/LoaderUtils'\nimport { UV1 } from '../_polyfill/uv1'\n\n/**\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * Binary format specification:\n *\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\nlet fbxTree\nlet connections\nlet sceneGraph\n\nclass FBXLoader extends Loader {\n  constructor(manager) {\n    super(manager)\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const scope = this\n\n    const path = scope.path === '' ? LoaderUtils.extractUrlBase(url) : scope.path\n\n    const loader = new FileLoader(this.manager)\n    loader.setPath(scope.path)\n    loader.setResponseType('arraybuffer')\n    loader.setRequestHeader(scope.requestHeader)\n    loader.setWithCredentials(scope.withCredentials)\n\n    loader.load(\n      url,\n      function (buffer) {\n        try {\n          onLoad(scope.parse(buffer, path))\n        } catch (e) {\n          if (onError) {\n            onError(e)\n          } else {\n            console.error(e)\n          }\n\n          scope.manager.itemError(url)\n        }\n      },\n      onProgress,\n      onError,\n    )\n  }\n\n  parse(FBXBuffer, path) {\n    if (isFbxFormatBinary(FBXBuffer)) {\n      fbxTree = new BinaryParser().parse(FBXBuffer)\n    } else {\n      const FBXText = convertArrayBufferToString(FBXBuffer)\n\n      if (!isFbxFormatASCII(FBXText)) {\n        throw new Error('THREE.FBXLoader: Unknown format.')\n      }\n\n      if (getFbxVersion(FBXText) < 7000) {\n        throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion(FBXText))\n      }\n\n      fbxTree = new TextParser().parse(FBXText)\n    }\n\n    // console.log( fbxTree );\n\n    const textureLoader = new TextureLoader(this.manager)\n      .setPath(this.resourcePath || path)\n      .setCrossOrigin(this.crossOrigin)\n\n    return new FBXTreeParser(textureLoader, this.manager).parse(fbxTree)\n  }\n}\n\n// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\nclass FBXTreeParser {\n  constructor(textureLoader, manager) {\n    this.textureLoader = textureLoader\n    this.manager = manager\n  }\n\n  parse() {\n    connections = this.parseConnections()\n\n    const images = this.parseImages()\n    const textures = this.parseTextures(images)\n    const materials = this.parseMaterials(textures)\n    const deformers = this.parseDeformers()\n    const geometryMap = new GeometryParser().parse(deformers)\n\n    this.parseScene(deformers, geometryMap, materials)\n\n    return sceneGraph\n  }\n\n  // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n  // and details the connection type\n  parseConnections() {\n    const connectionMap = new Map()\n\n    if ('Connections' in fbxTree) {\n      const rawConnections = fbxTree.Connections.connections\n\n      rawConnections.forEach(function (rawConnection) {\n        const fromID = rawConnection[0]\n        const toID = rawConnection[1]\n        const relationship = rawConnection[2]\n\n        if (!connectionMap.has(fromID)) {\n          connectionMap.set(fromID, {\n            parents: [],\n            children: [],\n          })\n        }\n\n        const parentRelationship = { ID: toID, relationship: relationship }\n        connectionMap.get(fromID).parents.push(parentRelationship)\n\n        if (!connectionMap.has(toID)) {\n          connectionMap.set(toID, {\n            parents: [],\n            children: [],\n          })\n        }\n\n        const childRelationship = { ID: fromID, relationship: relationship }\n        connectionMap.get(toID).children.push(childRelationship)\n      })\n    }\n\n    return connectionMap\n  }\n\n  // Parse FBXTree.Objects.Video for embedded image data\n  // These images are connected to textures in FBXTree.Objects.Textures\n  // via FBXTree.Connections.\n  parseImages() {\n    const images = {}\n    const blobs = {}\n\n    if ('Video' in fbxTree.Objects) {\n      const videoNodes = fbxTree.Objects.Video\n\n      for (const nodeID in videoNodes) {\n        const videoNode = videoNodes[nodeID]\n\n        const id = parseInt(nodeID)\n\n        images[id] = videoNode.RelativeFilename || videoNode.Filename\n\n        // raw image data is in videoNode.Content\n        if ('Content' in videoNode) {\n          const arrayBufferContent = videoNode.Content instanceof ArrayBuffer && videoNode.Content.byteLength > 0\n          const base64Content = typeof videoNode.Content === 'string' && videoNode.Content !== ''\n\n          if (arrayBufferContent || base64Content) {\n            const image = this.parseImage(videoNodes[nodeID])\n\n            blobs[videoNode.RelativeFilename || videoNode.Filename] = image\n          }\n        }\n      }\n    }\n\n    for (const id in images) {\n      const filename = images[id]\n\n      if (blobs[filename] !== undefined) images[id] = blobs[filename]\n      else images[id] = images[id].split('\\\\').pop()\n    }\n\n    return images\n  }\n\n  // Parse embedded image data in FBXTree.Video.Content\n  parseImage(videoNode) {\n    const content = videoNode.Content\n    const fileName = videoNode.RelativeFilename || videoNode.Filename\n    const extension = fileName.slice(fileName.lastIndexOf('.') + 1).toLowerCase()\n\n    let type\n\n    switch (extension) {\n      case 'bmp':\n        type = 'image/bmp'\n        break\n\n      case 'jpg':\n      case 'jpeg':\n        type = 'image/jpeg'\n        break\n\n      case 'png':\n        type = 'image/png'\n        break\n\n      case 'tif':\n        type = 'image/tiff'\n        break\n\n      case 'tga':\n        if (this.manager.getHandler('.tga') === null) {\n          console.warn('FBXLoader: TGA loader not found, skipping ', fileName)\n        }\n\n        type = 'image/tga'\n        break\n\n      default:\n        console.warn('FBXLoader: Image type \"' + extension + '\" is not supported.')\n        return\n    }\n\n    if (typeof content === 'string') {\n      // ASCII format\n\n      return 'data:' + type + ';base64,' + content\n    } else {\n      // Binary Format\n\n      const array = new Uint8Array(content)\n      return window.URL.createObjectURL(new Blob([array], { type: type }))\n    }\n  }\n\n  // Parse nodes in FBXTree.Objects.Texture\n  // These contain details such as UV scaling, cropping, rotation etc and are connected\n  // to images in FBXTree.Objects.Video\n  parseTextures(images) {\n    const textureMap = new Map()\n\n    if ('Texture' in fbxTree.Objects) {\n      const textureNodes = fbxTree.Objects.Texture\n      for (const nodeID in textureNodes) {\n        const texture = this.parseTexture(textureNodes[nodeID], images)\n        textureMap.set(parseInt(nodeID), texture)\n      }\n    }\n\n    return textureMap\n  }\n\n  // Parse individual node in FBXTree.Objects.Texture\n  parseTexture(textureNode, images) {\n    const texture = this.loadTexture(textureNode, images)\n\n    texture.ID = textureNode.id\n\n    texture.name = textureNode.attrName\n\n    const wrapModeU = textureNode.WrapModeU\n    const wrapModeV = textureNode.WrapModeV\n\n    const valueU = wrapModeU !== undefined ? wrapModeU.value : 0\n    const valueV = wrapModeV !== undefined ? wrapModeV.value : 0\n\n    // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n    // 0: repeat(default), 1: clamp\n\n    texture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping\n    texture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping\n\n    if ('Scaling' in textureNode) {\n      const values = textureNode.Scaling.value\n\n      texture.repeat.x = values[0]\n      texture.repeat.y = values[1]\n    }\n\n    return texture\n  }\n\n  // load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n  loadTexture(textureNode, images) {\n    let fileName\n\n    const currentPath = this.textureLoader.path\n\n    const children = connections.get(textureNode.id).children\n\n    if (children !== undefined && children.length > 0 && images[children[0].ID] !== undefined) {\n      fileName = images[children[0].ID]\n\n      if (fileName.indexOf('blob:') === 0 || fileName.indexOf('data:') === 0) {\n        this.textureLoader.setPath(undefined)\n      }\n    }\n\n    let texture\n\n    const extension = textureNode.FileName.slice(-3).toLowerCase()\n\n    if (extension === 'tga') {\n      const loader = this.manager.getHandler('.tga')\n\n      if (loader === null) {\n        console.warn('FBXLoader: TGA loader not found, creating placeholder texture for', textureNode.RelativeFilename)\n        texture = new Texture()\n      } else {\n        loader.setPath(this.textureLoader.path)\n        texture = loader.load(fileName)\n      }\n    } else if (extension === 'psd') {\n      console.warn(\n        'FBXLoader: PSD textures are not supported, creating placeholder texture for',\n        textureNode.RelativeFilename,\n      )\n      texture = new Texture()\n    } else {\n      texture = this.textureLoader.load(fileName)\n    }\n\n    this.textureLoader.setPath(currentPath)\n\n    return texture\n  }\n\n  // Parse nodes in FBXTree.Objects.Material\n  parseMaterials(textureMap) {\n    const materialMap = new Map()\n\n    if ('Material' in fbxTree.Objects) {\n      const materialNodes = fbxTree.Objects.Material\n\n      for (const nodeID in materialNodes) {\n        const material = this.parseMaterial(materialNodes[nodeID], textureMap)\n\n        if (material !== null) materialMap.set(parseInt(nodeID), material)\n      }\n    }\n\n    return materialMap\n  }\n\n  // Parse single node in FBXTree.Objects.Material\n  // Materials are connected to texture maps in FBXTree.Objects.Textures\n  // FBX format currently only supports Lambert and Phong shading models\n  parseMaterial(materialNode, textureMap) {\n    const ID = materialNode.id\n    const name = materialNode.attrName\n    let type = materialNode.ShadingModel\n\n    // Case where FBX wraps shading model in property object.\n    if (typeof type === 'object') {\n      type = type.value\n    }\n\n    // Ignore unused materials which don't have any connections.\n    if (!connections.has(ID)) return null\n\n    const parameters = this.parseParameters(materialNode, textureMap, ID)\n\n    let material\n\n    switch (type.toLowerCase()) {\n      case 'phong':\n        material = new MeshPhongMaterial()\n        break\n      case 'lambert':\n        material = new MeshLambertMaterial()\n        break\n      default:\n        console.warn('THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type)\n        material = new MeshPhongMaterial()\n        break\n    }\n\n    material.setValues(parameters)\n    material.name = name\n\n    return material\n  }\n\n  // Parse FBX material and return parameters suitable for a three.js material\n  // Also parse the texture map and return any textures associated with the material\n  parseParameters(materialNode, textureMap, ID) {\n    const parameters = {}\n\n    if (materialNode.BumpFactor) {\n      parameters.bumpScale = materialNode.BumpFactor.value\n    }\n\n    if (materialNode.Diffuse) {\n      parameters.color = new Color().fromArray(materialNode.Diffuse.value)\n    } else if (\n      materialNode.DiffuseColor &&\n      (materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB')\n    ) {\n      // The blender exporter exports diffuse here instead of in materialNode.Diffuse\n      parameters.color = new Color().fromArray(materialNode.DiffuseColor.value)\n    }\n\n    if (materialNode.DisplacementFactor) {\n      parameters.displacementScale = materialNode.DisplacementFactor.value\n    }\n\n    if (materialNode.Emissive) {\n      parameters.emissive = new Color().fromArray(materialNode.Emissive.value)\n    } else if (\n      materialNode.EmissiveColor &&\n      (materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB')\n    ) {\n      // The blender exporter exports emissive color here instead of in materialNode.Emissive\n      parameters.emissive = new Color().fromArray(materialNode.EmissiveColor.value)\n    }\n\n    if (materialNode.EmissiveFactor) {\n      parameters.emissiveIntensity = parseFloat(materialNode.EmissiveFactor.value)\n    }\n\n    if (materialNode.Opacity) {\n      parameters.opacity = parseFloat(materialNode.Opacity.value)\n    }\n\n    if (parameters.opacity < 1.0) {\n      parameters.transparent = true\n    }\n\n    if (materialNode.ReflectionFactor) {\n      parameters.reflectivity = materialNode.ReflectionFactor.value\n    }\n\n    if (materialNode.Shininess) {\n      parameters.shininess = materialNode.Shininess.value\n    }\n\n    if (materialNode.Specular) {\n      parameters.specular = new Color().fromArray(materialNode.Specular.value)\n    } else if (materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color') {\n      // The blender exporter exports specular color here instead of in materialNode.Specular\n      parameters.specular = new Color().fromArray(materialNode.SpecularColor.value)\n    }\n\n    const scope = this\n    connections.get(ID).children.forEach(function (child) {\n      const type = child.relationship\n\n      switch (type) {\n        case 'Bump':\n          parameters.bumpMap = scope.getTexture(textureMap, child.ID)\n          break\n\n        case 'Maya|TEX_ao_map':\n          parameters.aoMap = scope.getTexture(textureMap, child.ID)\n          break\n\n        case 'DiffuseColor':\n        case 'Maya|TEX_color_map':\n          parameters.map = scope.getTexture(textureMap, child.ID)\n          if (parameters.map !== undefined) {\n            if ('colorSpace' in parameters.map) parameters.map.colorSpace = 'srgb'\n            else parameters.map.encoding = 3001 // sRGBEncoding\n          }\n\n          break\n\n        case 'DisplacementColor':\n          parameters.displacementMap = scope.getTexture(textureMap, child.ID)\n          break\n\n        case 'EmissiveColor':\n          parameters.emissiveMap = scope.getTexture(textureMap, child.ID)\n          if (parameters.emissiveMap !== undefined) {\n            if ('colorSpace' in parameters.emissiveMap) parameters.emissiveMap.colorSpace = 'srgb'\n            else parameters.emissiveMap.encoding = 3001 // sRGBEncoding\n          }\n\n          break\n\n        case 'NormalMap':\n        case 'Maya|TEX_normal_map':\n          parameters.normalMap = scope.getTexture(textureMap, child.ID)\n          break\n\n        case 'ReflectionColor':\n          parameters.envMap = scope.getTexture(textureMap, child.ID)\n          if (parameters.envMap !== undefined) {\n            parameters.envMap.mapping = EquirectangularReflectionMapping\n\n            if ('colorSpace' in parameters.envMap) parameters.envMap.colorSpace = 'srgb'\n            else parameters.envMap.encoding = 3001 // sRGBEncoding\n          }\n\n          break\n\n        case 'SpecularColor':\n          parameters.specularMap = scope.getTexture(textureMap, child.ID)\n          if (parameters.specularMap !== undefined) {\n            if ('colorSpace' in parameters.specularMap) parameters.specularMap.colorSpace = 'srgb'\n            else parameters.specularMap.encoding = 3001 // sRGBEncoding\n          }\n\n          break\n\n        case 'TransparentColor':\n        case 'TransparencyFactor':\n          parameters.alphaMap = scope.getTexture(textureMap, child.ID)\n          parameters.transparent = true\n          break\n\n        case 'AmbientColor':\n        case 'ShininessExponent': // AKA glossiness map\n        case 'SpecularFactor': // AKA specularLevel\n        case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n        default:\n          console.warn('THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type)\n          break\n      }\n    })\n\n    return parameters\n  }\n\n  // get a texture from the textureMap for use by a material.\n  getTexture(textureMap, id) {\n    // if the texture is a layered texture, just use the first layer and issue a warning\n    if ('LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture) {\n      console.warn('THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.')\n      id = connections.get(id).children[0].ID\n    }\n\n    return textureMap.get(id)\n  }\n\n  // Parse nodes in FBXTree.Objects.Deformer\n  // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n  // Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n  parseDeformers() {\n    const skeletons = {}\n    const morphTargets = {}\n\n    if ('Deformer' in fbxTree.Objects) {\n      const DeformerNodes = fbxTree.Objects.Deformer\n\n      for (const nodeID in DeformerNodes) {\n        const deformerNode = DeformerNodes[nodeID]\n\n        const relationships = connections.get(parseInt(nodeID))\n\n        if (deformerNode.attrType === 'Skin') {\n          const skeleton = this.parseSkeleton(relationships, DeformerNodes)\n          skeleton.ID = nodeID\n\n          if (relationships.parents.length > 1) {\n            console.warn('THREE.FBXLoader: skeleton attached to more than one geometry is not supported.')\n          }\n          skeleton.geometryID = relationships.parents[0].ID\n\n          skeletons[nodeID] = skeleton\n        } else if (deformerNode.attrType === 'BlendShape') {\n          const morphTarget = {\n            id: nodeID,\n          }\n\n          morphTarget.rawTargets = this.parseMorphTargets(relationships, DeformerNodes)\n          morphTarget.id = nodeID\n\n          if (relationships.parents.length > 1) {\n            console.warn('THREE.FBXLoader: morph target attached to more than one geometry is not supported.')\n          }\n\n          morphTargets[nodeID] = morphTarget\n        }\n      }\n    }\n\n    return {\n      skeletons: skeletons,\n      morphTargets: morphTargets,\n    }\n  }\n\n  // Parse single nodes in FBXTree.Objects.Deformer\n  // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n  // Each skin node represents a skeleton and each cluster node represents a bone\n  parseSkeleton(relationships, deformerNodes) {\n    const rawBones = []\n\n    relationships.children.forEach(function (child) {\n      const boneNode = deformerNodes[child.ID]\n\n      if (boneNode.attrType !== 'Cluster') return\n\n      const rawBone = {\n        ID: child.ID,\n        indices: [],\n        weights: [],\n        transformLink: new Matrix4().fromArray(boneNode.TransformLink.a),\n        // transform: new Matrix4().fromArray( boneNode.Transform.a ),\n        // linkMode: boneNode.Mode,\n      }\n\n      if ('Indexes' in boneNode) {\n        rawBone.indices = boneNode.Indexes.a\n        rawBone.weights = boneNode.Weights.a\n      }\n\n      rawBones.push(rawBone)\n    })\n\n    return {\n      rawBones: rawBones,\n      bones: [],\n    }\n  }\n\n  // The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n  parseMorphTargets(relationships, deformerNodes) {\n    const rawMorphTargets = []\n\n    for (let i = 0; i < relationships.children.length; i++) {\n      const child = relationships.children[i]\n\n      const morphTargetNode = deformerNodes[child.ID]\n\n      const rawMorphTarget = {\n        name: morphTargetNode.attrName,\n        initialWeight: morphTargetNode.DeformPercent,\n        id: morphTargetNode.id,\n        fullWeights: morphTargetNode.FullWeights.a,\n      }\n\n      if (morphTargetNode.attrType !== 'BlendShapeChannel') return\n\n      rawMorphTarget.geoID = connections.get(parseInt(child.ID)).children.filter(function (child) {\n        return child.relationship === undefined\n      })[0].ID\n\n      rawMorphTargets.push(rawMorphTarget)\n    }\n\n    return rawMorphTargets\n  }\n\n  // create the main Group() to be returned by the loader\n  parseScene(deformers, geometryMap, materialMap) {\n    sceneGraph = new Group()\n\n    const modelMap = this.parseModels(deformers.skeletons, geometryMap, materialMap)\n\n    const modelNodes = fbxTree.Objects.Model\n\n    const scope = this\n    modelMap.forEach(function (model) {\n      const modelNode = modelNodes[model.ID]\n      scope.setLookAtProperties(model, modelNode)\n\n      const parentConnections = connections.get(model.ID).parents\n\n      parentConnections.forEach(function (connection) {\n        const parent = modelMap.get(connection.ID)\n        if (parent !== undefined) parent.add(model)\n      })\n\n      if (model.parent === null) {\n        sceneGraph.add(model)\n      }\n    })\n\n    this.bindSkeleton(deformers.skeletons, geometryMap, modelMap)\n\n    this.createAmbientLight()\n\n    sceneGraph.traverse(function (node) {\n      if (node.userData.transformData) {\n        if (node.parent) {\n          node.userData.transformData.parentMatrix = node.parent.matrix\n          node.userData.transformData.parentMatrixWorld = node.parent.matrixWorld\n        }\n\n        const transform = generateTransform(node.userData.transformData)\n\n        node.applyMatrix4(transform)\n        node.updateWorldMatrix()\n      }\n    })\n\n    const animations = new AnimationParser().parse()\n\n    // if all the models where already combined in a single group, just return that\n    if (sceneGraph.children.length === 1 && sceneGraph.children[0].isGroup) {\n      sceneGraph.children[0].animations = animations\n      sceneGraph = sceneGraph.children[0]\n    }\n\n    sceneGraph.animations = animations\n  }\n\n  // parse nodes in FBXTree.Objects.Model\n  parseModels(skeletons, geometryMap, materialMap) {\n    const modelMap = new Map()\n    const modelNodes = fbxTree.Objects.Model\n\n    for (const nodeID in modelNodes) {\n      const id = parseInt(nodeID)\n      const node = modelNodes[nodeID]\n      const relationships = connections.get(id)\n\n      let model = this.buildSkeleton(relationships, skeletons, id, node.attrName)\n\n      if (!model) {\n        switch (node.attrType) {\n          case 'Camera':\n            model = this.createCamera(relationships)\n            break\n          case 'Light':\n            model = this.createLight(relationships)\n            break\n          case 'Mesh':\n            model = this.createMesh(relationships, geometryMap, materialMap)\n            break\n          case 'NurbsCurve':\n            model = this.createCurve(relationships, geometryMap)\n            break\n          case 'LimbNode':\n          case 'Root':\n            model = new Bone()\n            break\n          case 'Null':\n          default:\n            model = new Group()\n            break\n        }\n\n        model.name = node.attrName ? PropertyBinding.sanitizeNodeName(node.attrName) : ''\n\n        model.ID = id\n      }\n\n      this.getTransformData(model, node)\n      modelMap.set(id, model)\n    }\n\n    return modelMap\n  }\n\n  buildSkeleton(relationships, skeletons, id, name) {\n    let bone = null\n\n    relationships.parents.forEach(function (parent) {\n      for (const ID in skeletons) {\n        const skeleton = skeletons[ID]\n\n        skeleton.rawBones.forEach(function (rawBone, i) {\n          if (rawBone.ID === parent.ID) {\n            const subBone = bone\n            bone = new Bone()\n\n            bone.matrixWorld.copy(rawBone.transformLink)\n\n            // set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n            bone.name = name ? PropertyBinding.sanitizeNodeName(name) : ''\n            bone.ID = id\n\n            skeleton.bones[i] = bone\n\n            // In cases where a bone is shared between multiple meshes\n            // duplicate the bone here and and it as a child of the first bone\n            if (subBone !== null) {\n              bone.add(subBone)\n            }\n          }\n        })\n      }\n    })\n\n    return bone\n  }\n\n  // create a PerspectiveCamera or OrthographicCamera\n  createCamera(relationships) {\n    let model\n    let cameraAttribute\n\n    relationships.children.forEach(function (child) {\n      const attr = fbxTree.Objects.NodeAttribute[child.ID]\n\n      if (attr !== undefined) {\n        cameraAttribute = attr\n      }\n    })\n\n    if (cameraAttribute === undefined) {\n      model = new Object3D()\n    } else {\n      let type = 0\n      if (cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1) {\n        type = 1\n      }\n\n      let nearClippingPlane = 1\n      if (cameraAttribute.NearPlane !== undefined) {\n        nearClippingPlane = cameraAttribute.NearPlane.value / 1000\n      }\n\n      let farClippingPlane = 1000\n      if (cameraAttribute.FarPlane !== undefined) {\n        farClippingPlane = cameraAttribute.FarPlane.value / 1000\n      }\n\n      let width = window.innerWidth\n      let height = window.innerHeight\n\n      if (cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined) {\n        width = cameraAttribute.AspectWidth.value\n        height = cameraAttribute.AspectHeight.value\n      }\n\n      const aspect = width / height\n\n      let fov = 45\n      if (cameraAttribute.FieldOfView !== undefined) {\n        fov = cameraAttribute.FieldOfView.value\n      }\n\n      const focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null\n\n      switch (type) {\n        case 0: // Perspective\n          model = new PerspectiveCamera(fov, aspect, nearClippingPlane, farClippingPlane)\n          if (focalLength !== null) model.setFocalLength(focalLength)\n          break\n\n        case 1: // Orthographic\n          model = new OrthographicCamera(\n            -width / 2,\n            width / 2,\n            height / 2,\n            -height / 2,\n            nearClippingPlane,\n            farClippingPlane,\n          )\n          break\n\n        default:\n          console.warn('THREE.FBXLoader: Unknown camera type ' + type + '.')\n          model = new Object3D()\n          break\n      }\n    }\n\n    return model\n  }\n\n  // Create a DirectionalLight, PointLight or SpotLight\n  createLight(relationships) {\n    let model\n    let lightAttribute\n\n    relationships.children.forEach(function (child) {\n      const attr = fbxTree.Objects.NodeAttribute[child.ID]\n\n      if (attr !== undefined) {\n        lightAttribute = attr\n      }\n    })\n\n    if (lightAttribute === undefined) {\n      model = new Object3D()\n    } else {\n      let type\n\n      // LightType can be undefined for Point lights\n      if (lightAttribute.LightType === undefined) {\n        type = 0\n      } else {\n        type = lightAttribute.LightType.value\n      }\n\n      let color = 0xffffff\n\n      if (lightAttribute.Color !== undefined) {\n        color = new Color().fromArray(lightAttribute.Color.value)\n      }\n\n      let intensity = lightAttribute.Intensity === undefined ? 1 : lightAttribute.Intensity.value / 100\n\n      // light disabled\n      if (lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0) {\n        intensity = 0\n      }\n\n      let distance = 0\n      if (lightAttribute.FarAttenuationEnd !== undefined) {\n        if (lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0) {\n          distance = 0\n        } else {\n          distance = lightAttribute.FarAttenuationEnd.value\n        }\n      }\n\n      // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n      const decay = 1\n\n      switch (type) {\n        case 0: // Point\n          model = new PointLight(color, intensity, distance, decay)\n          break\n\n        case 1: // Directional\n          model = new DirectionalLight(color, intensity)\n          break\n\n        case 2: // Spot\n          let angle = Math.PI / 3\n\n          if (lightAttribute.InnerAngle !== undefined) {\n            angle = MathUtils.degToRad(lightAttribute.InnerAngle.value)\n          }\n\n          let penumbra = 0\n          if (lightAttribute.OuterAngle !== undefined) {\n            // TODO: this is not correct - FBX calculates outer and inner angle in degrees\n            // with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n            // while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n            penumbra = MathUtils.degToRad(lightAttribute.OuterAngle.value)\n            penumbra = Math.max(penumbra, 1)\n          }\n\n          model = new SpotLight(color, intensity, distance, angle, penumbra, decay)\n          break\n\n        default:\n          console.warn(\n            'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.',\n          )\n          model = new PointLight(color, intensity)\n          break\n      }\n\n      if (lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1) {\n        model.castShadow = true\n      }\n    }\n\n    return model\n  }\n\n  createMesh(relationships, geometryMap, materialMap) {\n    let model\n    let geometry = null\n    let material = null\n    const materials = []\n\n    // get geometry and materials(s) from connections\n    relationships.children.forEach(function (child) {\n      if (geometryMap.has(child.ID)) {\n        geometry = geometryMap.get(child.ID)\n      }\n\n      if (materialMap.has(child.ID)) {\n        materials.push(materialMap.get(child.ID))\n      }\n    })\n\n    if (materials.length > 1) {\n      material = materials\n    } else if (materials.length > 0) {\n      material = materials[0]\n    } else {\n      material = new MeshPhongMaterial({ color: 0xcccccc })\n      materials.push(material)\n    }\n\n    if ('color' in geometry.attributes) {\n      materials.forEach(function (material) {\n        material.vertexColors = true\n      })\n    }\n\n    if (geometry.FBX_Deformer) {\n      model = new SkinnedMesh(geometry, material)\n      model.normalizeSkinWeights()\n    } else {\n      model = new Mesh(geometry, material)\n    }\n\n    return model\n  }\n\n  createCurve(relationships, geometryMap) {\n    const geometry = relationships.children.reduce(function (geo, child) {\n      if (geometryMap.has(child.ID)) geo = geometryMap.get(child.ID)\n\n      return geo\n    }, null)\n\n    // FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n    const material = new LineBasicMaterial({ color: 0x3300ff, linewidth: 1 })\n    return new Line(geometry, material)\n  }\n\n  // parse the model node for transform data\n  getTransformData(model, modelNode) {\n    const transformData = {}\n\n    if ('InheritType' in modelNode) transformData.inheritType = parseInt(modelNode.InheritType.value)\n\n    if ('RotationOrder' in modelNode) transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value)\n    else transformData.eulerOrder = 'ZYX'\n\n    if ('Lcl_Translation' in modelNode) transformData.translation = modelNode.Lcl_Translation.value\n\n    if ('PreRotation' in modelNode) transformData.preRotation = modelNode.PreRotation.value\n    if ('Lcl_Rotation' in modelNode) transformData.rotation = modelNode.Lcl_Rotation.value\n    if ('PostRotation' in modelNode) transformData.postRotation = modelNode.PostRotation.value\n\n    if ('Lcl_Scaling' in modelNode) transformData.scale = modelNode.Lcl_Scaling.value\n\n    if ('ScalingOffset' in modelNode) transformData.scalingOffset = modelNode.ScalingOffset.value\n    if ('ScalingPivot' in modelNode) transformData.scalingPivot = modelNode.ScalingPivot.value\n\n    if ('RotationOffset' in modelNode) transformData.rotationOffset = modelNode.RotationOffset.value\n    if ('RotationPivot' in modelNode) transformData.rotationPivot = modelNode.RotationPivot.value\n\n    model.userData.transformData = transformData\n  }\n\n  setLookAtProperties(model, modelNode) {\n    if ('LookAtProperty' in modelNode) {\n      const children = connections.get(model.ID).children\n\n      children.forEach(function (child) {\n        if (child.relationship === 'LookAtProperty') {\n          const lookAtTarget = fbxTree.Objects.Model[child.ID]\n\n          if ('Lcl_Translation' in lookAtTarget) {\n            const pos = lookAtTarget.Lcl_Translation.value\n\n            // DirectionalLight, SpotLight\n            if (model.target !== undefined) {\n              model.target.position.fromArray(pos)\n              sceneGraph.add(model.target)\n            } else {\n              // Cameras and other Object3Ds\n\n              model.lookAt(new Vector3().fromArray(pos))\n            }\n          }\n        }\n      })\n    }\n  }\n\n  bindSkeleton(skeletons, geometryMap, modelMap) {\n    const bindMatrices = this.parsePoseNodes()\n\n    for (const ID in skeletons) {\n      const skeleton = skeletons[ID]\n\n      const parents = connections.get(parseInt(skeleton.ID)).parents\n\n      parents.forEach(function (parent) {\n        if (geometryMap.has(parent.ID)) {\n          const geoID = parent.ID\n          const geoRelationships = connections.get(geoID)\n\n          geoRelationships.parents.forEach(function (geoConnParent) {\n            if (modelMap.has(geoConnParent.ID)) {\n              const model = modelMap.get(geoConnParent.ID)\n\n              model.bind(new Skeleton(skeleton.bones), bindMatrices[geoConnParent.ID])\n            }\n          })\n        }\n      })\n    }\n  }\n\n  parsePoseNodes() {\n    const bindMatrices = {}\n\n    if ('Pose' in fbxTree.Objects) {\n      const BindPoseNode = fbxTree.Objects.Pose\n\n      for (const nodeID in BindPoseNode) {\n        if (BindPoseNode[nodeID].attrType === 'BindPose' && BindPoseNode[nodeID].NbPoseNodes > 0) {\n          const poseNodes = BindPoseNode[nodeID].PoseNode\n\n          if (Array.isArray(poseNodes)) {\n            poseNodes.forEach(function (poseNode) {\n              bindMatrices[poseNode.Node] = new Matrix4().fromArray(poseNode.Matrix.a)\n            })\n          } else {\n            bindMatrices[poseNodes.Node] = new Matrix4().fromArray(poseNodes.Matrix.a)\n          }\n        }\n      }\n    }\n\n    return bindMatrices\n  }\n\n  // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n  createAmbientLight() {\n    if ('GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings) {\n      const ambientColor = fbxTree.GlobalSettings.AmbientColor.value\n      const r = ambientColor[0]\n      const g = ambientColor[1]\n      const b = ambientColor[2]\n\n      if (r !== 0 || g !== 0 || b !== 0) {\n        const color = new Color(r, g, b)\n        sceneGraph.add(new AmbientLight(color, 1))\n      }\n    }\n  }\n}\n\n// parse Geometry data from FBXTree and return map of BufferGeometries\nclass GeometryParser {\n  // Parse nodes in FBXTree.Objects.Geometry\n  parse(deformers) {\n    const geometryMap = new Map()\n\n    if ('Geometry' in fbxTree.Objects) {\n      const geoNodes = fbxTree.Objects.Geometry\n\n      for (const nodeID in geoNodes) {\n        const relationships = connections.get(parseInt(nodeID))\n        const geo = this.parseGeometry(relationships, geoNodes[nodeID], deformers)\n\n        geometryMap.set(parseInt(nodeID), geo)\n      }\n    }\n\n    return geometryMap\n  }\n\n  // Parse single node in FBXTree.Objects.Geometry\n  parseGeometry(relationships, geoNode, deformers) {\n    switch (geoNode.attrType) {\n      case 'Mesh':\n        return this.parseMeshGeometry(relationships, geoNode, deformers)\n        break\n\n      case 'NurbsCurve':\n        return this.parseNurbsGeometry(geoNode)\n        break\n    }\n  }\n\n  // Parse single node mesh geometry in FBXTree.Objects.Geometry\n  parseMeshGeometry(relationships, geoNode, deformers) {\n    const skeletons = deformers.skeletons\n    const morphTargets = []\n\n    const modelNodes = relationships.parents.map(function (parent) {\n      return fbxTree.Objects.Model[parent.ID]\n    })\n\n    // don't create geometry if it is not associated with any models\n    if (modelNodes.length === 0) return\n\n    const skeleton = relationships.children.reduce(function (skeleton, child) {\n      if (skeletons[child.ID] !== undefined) skeleton = skeletons[child.ID]\n\n      return skeleton\n    }, null)\n\n    relationships.children.forEach(function (child) {\n      if (deformers.morphTargets[child.ID] !== undefined) {\n        morphTargets.push(deformers.morphTargets[child.ID])\n      }\n    })\n\n    // Assume one model and get the preRotation from that\n    // if there is more than one model associated with the geometry this may cause problems\n    const modelNode = modelNodes[0]\n\n    const transformData = {}\n\n    if ('RotationOrder' in modelNode) transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value)\n    if ('InheritType' in modelNode) transformData.inheritType = parseInt(modelNode.InheritType.value)\n\n    if ('GeometricTranslation' in modelNode) transformData.translation = modelNode.GeometricTranslation.value\n    if ('GeometricRotation' in modelNode) transformData.rotation = modelNode.GeometricRotation.value\n    if ('GeometricScaling' in modelNode) transformData.scale = modelNode.GeometricScaling.value\n\n    const transform = generateTransform(transformData)\n\n    return this.genGeometry(geoNode, skeleton, morphTargets, transform)\n  }\n\n  // Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n  genGeometry(geoNode, skeleton, morphTargets, preTransform) {\n    const geo = new BufferGeometry()\n    if (geoNode.attrName) geo.name = geoNode.attrName\n\n    const geoInfo = this.parseGeoNode(geoNode, skeleton)\n    const buffers = this.genBuffers(geoInfo)\n\n    const positionAttribute = new Float32BufferAttribute(buffers.vertex, 3)\n\n    positionAttribute.applyMatrix4(preTransform)\n\n    geo.setAttribute('position', positionAttribute)\n\n    if (buffers.colors.length > 0) {\n      geo.setAttribute('color', new Float32BufferAttribute(buffers.colors, 3))\n    }\n\n    if (skeleton) {\n      geo.setAttribute('skinIndex', new Uint16BufferAttribute(buffers.weightsIndices, 4))\n\n      geo.setAttribute('skinWeight', new Float32BufferAttribute(buffers.vertexWeights, 4))\n\n      // used later to bind the skeleton to the model\n      geo.FBX_Deformer = skeleton\n    }\n\n    if (buffers.normal.length > 0) {\n      const normalMatrix = new Matrix3().getNormalMatrix(preTransform)\n\n      const normalAttribute = new Float32BufferAttribute(buffers.normal, 3)\n      normalAttribute.applyNormalMatrix(normalMatrix)\n\n      geo.setAttribute('normal', normalAttribute)\n    }\n\n    buffers.uvs.forEach(function (uvBuffer, i) {\n      if (UV1 === 'uv2') i++\n      const name = i === 0 ? 'uv' : `uv${i}`\n\n      geo.setAttribute(name, new Float32BufferAttribute(buffers.uvs[i], 2))\n    })\n\n    if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n      // Convert the material indices of each vertex into rendering groups on the geometry.\n      let prevMaterialIndex = buffers.materialIndex[0]\n      let startIndex = 0\n\n      buffers.materialIndex.forEach(function (currentIndex, i) {\n        if (currentIndex !== prevMaterialIndex) {\n          geo.addGroup(startIndex, i - startIndex, prevMaterialIndex)\n\n          prevMaterialIndex = currentIndex\n          startIndex = i\n        }\n      })\n\n      // the loop above doesn't add the last group, do that here.\n      if (geo.groups.length > 0) {\n        const lastGroup = geo.groups[geo.groups.length - 1]\n        const lastIndex = lastGroup.start + lastGroup.count\n\n        if (lastIndex !== buffers.materialIndex.length) {\n          geo.addGroup(lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex)\n        }\n      }\n\n      // case where there are multiple materials but the whole geometry is only\n      // using one of them\n      if (geo.groups.length === 0) {\n        geo.addGroup(0, buffers.materialIndex.length, buffers.materialIndex[0])\n      }\n    }\n\n    this.addMorphTargets(geo, geoNode, morphTargets, preTransform)\n\n    return geo\n  }\n\n  parseGeoNode(geoNode, skeleton) {\n    const geoInfo = {}\n\n    geoInfo.vertexPositions = geoNode.Vertices !== undefined ? geoNode.Vertices.a : []\n    geoInfo.vertexIndices = geoNode.PolygonVertexIndex !== undefined ? geoNode.PolygonVertexIndex.a : []\n\n    if (geoNode.LayerElementColor) {\n      geoInfo.color = this.parseVertexColors(geoNode.LayerElementColor[0])\n    }\n\n    if (geoNode.LayerElementMaterial) {\n      geoInfo.material = this.parseMaterialIndices(geoNode.LayerElementMaterial[0])\n    }\n\n    if (geoNode.LayerElementNormal) {\n      geoInfo.normal = this.parseNormals(geoNode.LayerElementNormal[0])\n    }\n\n    if (geoNode.LayerElementUV) {\n      geoInfo.uv = []\n\n      let i = 0\n      while (geoNode.LayerElementUV[i]) {\n        if (geoNode.LayerElementUV[i].UV) {\n          geoInfo.uv.push(this.parseUVs(geoNode.LayerElementUV[i]))\n        }\n\n        i++\n      }\n    }\n\n    geoInfo.weightTable = {}\n\n    if (skeleton !== null) {\n      geoInfo.skeleton = skeleton\n\n      skeleton.rawBones.forEach(function (rawBone, i) {\n        // loop over the bone's vertex indices and weights\n        rawBone.indices.forEach(function (index, j) {\n          if (geoInfo.weightTable[index] === undefined) geoInfo.weightTable[index] = []\n\n          geoInfo.weightTable[index].push({\n            id: i,\n            weight: rawBone.weights[j],\n          })\n        })\n      })\n    }\n\n    return geoInfo\n  }\n\n  genBuffers(geoInfo) {\n    const buffers = {\n      vertex: [],\n      normal: [],\n      colors: [],\n      uvs: [],\n      materialIndex: [],\n      vertexWeights: [],\n      weightsIndices: [],\n    }\n\n    let polygonIndex = 0\n    let faceLength = 0\n    let displayedWeightsWarning = false\n\n    // these will hold data for a single face\n    let facePositionIndexes = []\n    let faceNormals = []\n    let faceColors = []\n    let faceUVs = []\n    let faceWeights = []\n    let faceWeightIndices = []\n\n    const scope = this\n    geoInfo.vertexIndices.forEach(function (vertexIndex, polygonVertexIndex) {\n      let materialIndex\n      let endOfFace = false\n\n      // Face index and vertex index arrays are combined in a single array\n      // A cube with quad faces looks like this:\n      // PolygonVertexIndex: *24 {\n      //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n      //  }\n      // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n      // to find index of last vertex bit shift the index: ^ - 1\n      if (vertexIndex < 0) {\n        vertexIndex = vertexIndex ^ -1 // equivalent to ( x * -1 ) - 1\n        endOfFace = true\n      }\n\n      let weightIndices = []\n      let weights = []\n\n      facePositionIndexes.push(vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2)\n\n      if (geoInfo.color) {\n        const data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color)\n\n        faceColors.push(data[0], data[1], data[2])\n      }\n\n      if (geoInfo.skeleton) {\n        if (geoInfo.weightTable[vertexIndex] !== undefined) {\n          geoInfo.weightTable[vertexIndex].forEach(function (wt) {\n            weights.push(wt.weight)\n            weightIndices.push(wt.id)\n          })\n        }\n\n        if (weights.length > 4) {\n          if (!displayedWeightsWarning) {\n            console.warn(\n              'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.',\n            )\n            displayedWeightsWarning = true\n          }\n\n          const wIndex = [0, 0, 0, 0]\n          const Weight = [0, 0, 0, 0]\n\n          weights.forEach(function (weight, weightIndex) {\n            let currentWeight = weight\n            let currentIndex = weightIndices[weightIndex]\n\n            Weight.forEach(function (comparedWeight, comparedWeightIndex, comparedWeightArray) {\n              if (currentWeight > comparedWeight) {\n                comparedWeightArray[comparedWeightIndex] = currentWeight\n                currentWeight = comparedWeight\n\n                const tmp = wIndex[comparedWeightIndex]\n                wIndex[comparedWeightIndex] = currentIndex\n                currentIndex = tmp\n              }\n            })\n          })\n\n          weightIndices = wIndex\n          weights = Weight\n        }\n\n        // if the weight array is shorter than 4 pad with 0s\n        while (weights.length < 4) {\n          weights.push(0)\n          weightIndices.push(0)\n        }\n\n        for (let i = 0; i < 4; ++i) {\n          faceWeights.push(weights[i])\n          faceWeightIndices.push(weightIndices[i])\n        }\n      }\n\n      if (geoInfo.normal) {\n        const data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal)\n\n        faceNormals.push(data[0], data[1], data[2])\n      }\n\n      if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n        materialIndex = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material)[0]\n      }\n\n      if (geoInfo.uv) {\n        geoInfo.uv.forEach(function (uv, i) {\n          const data = getData(polygonVertexIndex, polygonIndex, vertexIndex, uv)\n\n          if (faceUVs[i] === undefined) {\n            faceUVs[i] = []\n          }\n\n          faceUVs[i].push(data[0])\n          faceUVs[i].push(data[1])\n        })\n      }\n\n      faceLength++\n\n      if (endOfFace) {\n        scope.genFace(\n          buffers,\n          geoInfo,\n          facePositionIndexes,\n          materialIndex,\n          faceNormals,\n          faceColors,\n          faceUVs,\n          faceWeights,\n          faceWeightIndices,\n          faceLength,\n        )\n\n        polygonIndex++\n        faceLength = 0\n\n        // reset arrays for the next face\n        facePositionIndexes = []\n        faceNormals = []\n        faceColors = []\n        faceUVs = []\n        faceWeights = []\n        faceWeightIndices = []\n      }\n    })\n\n    return buffers\n  }\n\n  // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n  genFace(\n    buffers,\n    geoInfo,\n    facePositionIndexes,\n    materialIndex,\n    faceNormals,\n    faceColors,\n    faceUVs,\n    faceWeights,\n    faceWeightIndices,\n    faceLength,\n  ) {\n    for (let i = 2; i < faceLength; i++) {\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[0]])\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[1]])\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[2]])\n\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3]])\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 1]])\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 2]])\n\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3]])\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 1]])\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 2]])\n\n      if (geoInfo.skeleton) {\n        buffers.vertexWeights.push(faceWeights[0])\n        buffers.vertexWeights.push(faceWeights[1])\n        buffers.vertexWeights.push(faceWeights[2])\n        buffers.vertexWeights.push(faceWeights[3])\n\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4])\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 1])\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 2])\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 3])\n\n        buffers.vertexWeights.push(faceWeights[i * 4])\n        buffers.vertexWeights.push(faceWeights[i * 4 + 1])\n        buffers.vertexWeights.push(faceWeights[i * 4 + 2])\n        buffers.vertexWeights.push(faceWeights[i * 4 + 3])\n\n        buffers.weightsIndices.push(faceWeightIndices[0])\n        buffers.weightsIndices.push(faceWeightIndices[1])\n        buffers.weightsIndices.push(faceWeightIndices[2])\n        buffers.weightsIndices.push(faceWeightIndices[3])\n\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4])\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 1])\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 2])\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 3])\n\n        buffers.weightsIndices.push(faceWeightIndices[i * 4])\n        buffers.weightsIndices.push(faceWeightIndices[i * 4 + 1])\n        buffers.weightsIndices.push(faceWeightIndices[i * 4 + 2])\n        buffers.weightsIndices.push(faceWeightIndices[i * 4 + 3])\n      }\n\n      if (geoInfo.color) {\n        buffers.colors.push(faceColors[0])\n        buffers.colors.push(faceColors[1])\n        buffers.colors.push(faceColors[2])\n\n        buffers.colors.push(faceColors[(i - 1) * 3])\n        buffers.colors.push(faceColors[(i - 1) * 3 + 1])\n        buffers.colors.push(faceColors[(i - 1) * 3 + 2])\n\n        buffers.colors.push(faceColors[i * 3])\n        buffers.colors.push(faceColors[i * 3 + 1])\n        buffers.colors.push(faceColors[i * 3 + 2])\n      }\n\n      if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n        buffers.materialIndex.push(materialIndex)\n        buffers.materialIndex.push(materialIndex)\n        buffers.materialIndex.push(materialIndex)\n      }\n\n      if (geoInfo.normal) {\n        buffers.normal.push(faceNormals[0])\n        buffers.normal.push(faceNormals[1])\n        buffers.normal.push(faceNormals[2])\n\n        buffers.normal.push(faceNormals[(i - 1) * 3])\n        buffers.normal.push(faceNormals[(i - 1) * 3 + 1])\n        buffers.normal.push(faceNormals[(i - 1) * 3 + 2])\n\n        buffers.normal.push(faceNormals[i * 3])\n        buffers.normal.push(faceNormals[i * 3 + 1])\n        buffers.normal.push(faceNormals[i * 3 + 2])\n      }\n\n      if (geoInfo.uv) {\n        geoInfo.uv.forEach(function (uv, j) {\n          if (buffers.uvs[j] === undefined) buffers.uvs[j] = []\n\n          buffers.uvs[j].push(faceUVs[j][0])\n          buffers.uvs[j].push(faceUVs[j][1])\n\n          buffers.uvs[j].push(faceUVs[j][(i - 1) * 2])\n          buffers.uvs[j].push(faceUVs[j][(i - 1) * 2 + 1])\n\n          buffers.uvs[j].push(faceUVs[j][i * 2])\n          buffers.uvs[j].push(faceUVs[j][i * 2 + 1])\n        })\n      }\n    }\n  }\n\n  addMorphTargets(parentGeo, parentGeoNode, morphTargets, preTransform) {\n    if (morphTargets.length === 0) return\n\n    parentGeo.morphTargetsRelative = true\n\n    parentGeo.morphAttributes.position = []\n    // parentGeo.morphAttributes.normal = []; // not implemented\n\n    const scope = this\n    morphTargets.forEach(function (morphTarget) {\n      morphTarget.rawTargets.forEach(function (rawTarget) {\n        const morphGeoNode = fbxTree.Objects.Geometry[rawTarget.geoID]\n\n        if (morphGeoNode !== undefined) {\n          scope.genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name)\n        }\n      })\n    })\n  }\n\n  // a morph geometry node is similar to a standard  node, and the node is also contained\n  // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n  // and a special attribute Index defining which vertices of the original geometry are affected\n  // Normal and position attributes only have data for the vertices that are affected by the morph\n  genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform, name) {\n    const vertexIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : []\n\n    const morphPositionsSparse = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : []\n    const indices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : []\n\n    const length = parentGeo.attributes.position.count * 3\n    const morphPositions = new Float32Array(length)\n\n    for (let i = 0; i < indices.length; i++) {\n      const morphIndex = indices[i] * 3\n\n      morphPositions[morphIndex] = morphPositionsSparse[i * 3]\n      morphPositions[morphIndex + 1] = morphPositionsSparse[i * 3 + 1]\n      morphPositions[morphIndex + 2] = morphPositionsSparse[i * 3 + 2]\n    }\n\n    // TODO: add morph normal support\n    const morphGeoInfo = {\n      vertexIndices: vertexIndices,\n      vertexPositions: morphPositions,\n    }\n\n    const morphBuffers = this.genBuffers(morphGeoInfo)\n\n    const positionAttribute = new Float32BufferAttribute(morphBuffers.vertex, 3)\n    positionAttribute.name = name || morphGeoNode.attrName\n\n    positionAttribute.applyMatrix4(preTransform)\n\n    parentGeo.morphAttributes.position.push(positionAttribute)\n  }\n\n  // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n  parseNormals(NormalNode) {\n    const mappingType = NormalNode.MappingInformationType\n    const referenceType = NormalNode.ReferenceInformationType\n    const buffer = NormalNode.Normals.a\n    let indexBuffer = []\n    if (referenceType === 'IndexToDirect') {\n      if ('NormalIndex' in NormalNode) {\n        indexBuffer = NormalNode.NormalIndex.a\n      } else if ('NormalsIndex' in NormalNode) {\n        indexBuffer = NormalNode.NormalsIndex.a\n      }\n    }\n\n    return {\n      dataSize: 3,\n      buffer: buffer,\n      indices: indexBuffer,\n      mappingType: mappingType,\n      referenceType: referenceType,\n    }\n  }\n\n  // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n  parseUVs(UVNode) {\n    const mappingType = UVNode.MappingInformationType\n    const referenceType = UVNode.ReferenceInformationType\n    const buffer = UVNode.UV.a\n    let indexBuffer = []\n    if (referenceType === 'IndexToDirect') {\n      indexBuffer = UVNode.UVIndex.a\n    }\n\n    return {\n      dataSize: 2,\n      buffer: buffer,\n      indices: indexBuffer,\n      mappingType: mappingType,\n      referenceType: referenceType,\n    }\n  }\n\n  // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n  parseVertexColors(ColorNode) {\n    const mappingType = ColorNode.MappingInformationType\n    const referenceType = ColorNode.ReferenceInformationType\n    const buffer = ColorNode.Colors.a\n    let indexBuffer = []\n    if (referenceType === 'IndexToDirect') {\n      indexBuffer = ColorNode.ColorIndex.a\n    }\n\n    return {\n      dataSize: 4,\n      buffer: buffer,\n      indices: indexBuffer,\n      mappingType: mappingType,\n      referenceType: referenceType,\n    }\n  }\n\n  // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n  parseMaterialIndices(MaterialNode) {\n    const mappingType = MaterialNode.MappingInformationType\n    const referenceType = MaterialNode.ReferenceInformationType\n\n    if (mappingType === 'NoMappingInformation') {\n      return {\n        dataSize: 1,\n        buffer: [0],\n        indices: [0],\n        mappingType: 'AllSame',\n        referenceType: referenceType,\n      }\n    }\n\n    const materialIndexBuffer = MaterialNode.Materials.a\n\n    // Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n    // we expect.So we create an intermediate buffer that points to the index in the buffer,\n    // for conforming with the other functions we've written for other data.\n    const materialIndices = []\n\n    for (let i = 0; i < materialIndexBuffer.length; ++i) {\n      materialIndices.push(i)\n    }\n\n    return {\n      dataSize: 1,\n      buffer: materialIndexBuffer,\n      indices: materialIndices,\n      mappingType: mappingType,\n      referenceType: referenceType,\n    }\n  }\n\n  // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n  parseNurbsGeometry(geoNode) {\n    if (NURBSCurve === undefined) {\n      console.error(\n        'THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.',\n      )\n      return new BufferGeometry()\n    }\n\n    const order = parseInt(geoNode.Order)\n\n    if (isNaN(order)) {\n      console.error('THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id)\n      return new BufferGeometry()\n    }\n\n    const degree = order - 1\n\n    const knots = geoNode.KnotVector.a\n    const controlPoints = []\n    const pointsValues = geoNode.Points.a\n\n    for (let i = 0, l = pointsValues.length; i < l; i += 4) {\n      controlPoints.push(new Vector4().fromArray(pointsValues, i))\n    }\n\n    let startKnot, endKnot\n\n    if (geoNode.Form === 'Closed') {\n      controlPoints.push(controlPoints[0])\n    } else if (geoNode.Form === 'Periodic') {\n      startKnot = degree\n      endKnot = knots.length - 1 - startKnot\n\n      for (let i = 0; i < degree; ++i) {\n        controlPoints.push(controlPoints[i])\n      }\n    }\n\n    const curve = new NURBSCurve(degree, knots, controlPoints, startKnot, endKnot)\n    const points = curve.getPoints(controlPoints.length * 12)\n\n    return new BufferGeometry().setFromPoints(points)\n  }\n}\n\n// parse animation data from FBXTree\nclass AnimationParser {\n  // take raw animation clips and turn them into three.js animation clips\n  parse() {\n    const animationClips = []\n\n    const rawClips = this.parseClips()\n\n    if (rawClips !== undefined) {\n      for (const key in rawClips) {\n        const rawClip = rawClips[key]\n\n        const clip = this.addClip(rawClip)\n\n        animationClips.push(clip)\n      }\n    }\n\n    return animationClips\n  }\n\n  parseClips() {\n    // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n    // if this is undefined we can safely assume there are no animations\n    if (fbxTree.Objects.AnimationCurve === undefined) return undefined\n\n    const curveNodesMap = this.parseAnimationCurveNodes()\n\n    this.parseAnimationCurves(curveNodesMap)\n\n    const layersMap = this.parseAnimationLayers(curveNodesMap)\n    const rawClips = this.parseAnimStacks(layersMap)\n\n    return rawClips\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationCurveNode\n  // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n  // and is referenced by an AnimationLayer\n  parseAnimationCurveNodes() {\n    const rawCurveNodes = fbxTree.Objects.AnimationCurveNode\n\n    const curveNodesMap = new Map()\n\n    for (const nodeID in rawCurveNodes) {\n      const rawCurveNode = rawCurveNodes[nodeID]\n\n      if (rawCurveNode.attrName.match(/S|R|T|DeformPercent/) !== null) {\n        const curveNode = {\n          id: rawCurveNode.id,\n          attr: rawCurveNode.attrName,\n          curves: {},\n        }\n\n        curveNodesMap.set(curveNode.id, curveNode)\n      }\n    }\n\n    return curveNodesMap\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n  // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n  // axis ( e.g. times and values of x rotation)\n  parseAnimationCurves(curveNodesMap) {\n    const rawCurves = fbxTree.Objects.AnimationCurve\n\n    // TODO: Many values are identical up to roundoff error, but won't be optimised\n    // e.g. position times: [0, 0.4, 0. 8]\n    // position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n    // clearly, this should be optimised to\n    // times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n    // this shows up in nearly every FBX file, and generally time array is length > 100\n\n    for (const nodeID in rawCurves) {\n      const animationCurve = {\n        id: rawCurves[nodeID].id,\n        times: rawCurves[nodeID].KeyTime.a.map(convertFBXTimeToSeconds),\n        values: rawCurves[nodeID].KeyValueFloat.a,\n      }\n\n      const relationships = connections.get(animationCurve.id)\n\n      if (relationships !== undefined) {\n        const animationCurveID = relationships.parents[0].ID\n        const animationCurveRelationship = relationships.parents[0].relationship\n\n        if (animationCurveRelationship.match(/X/)) {\n          curveNodesMap.get(animationCurveID).curves['x'] = animationCurve\n        } else if (animationCurveRelationship.match(/Y/)) {\n          curveNodesMap.get(animationCurveID).curves['y'] = animationCurve\n        } else if (animationCurveRelationship.match(/Z/)) {\n          curveNodesMap.get(animationCurveID).curves['z'] = animationCurve\n        } else if (animationCurveRelationship.match(/d|DeformPercent/) && curveNodesMap.has(animationCurveID)) {\n          curveNodesMap.get(animationCurveID).curves['morph'] = animationCurve\n        }\n      }\n    }\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n  // to various AnimationCurveNodes and is referenced by an AnimationStack node\n  // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n  parseAnimationLayers(curveNodesMap) {\n    const rawLayers = fbxTree.Objects.AnimationLayer\n\n    const layersMap = new Map()\n\n    for (const nodeID in rawLayers) {\n      const layerCurveNodes = []\n\n      const connection = connections.get(parseInt(nodeID))\n\n      if (connection !== undefined) {\n        // all the animationCurveNodes used in the layer\n        const children = connection.children\n\n        children.forEach(function (child, i) {\n          if (curveNodesMap.has(child.ID)) {\n            const curveNode = curveNodesMap.get(child.ID)\n\n            // check that the curves are defined for at least one axis, otherwise ignore the curveNode\n            if (\n              curveNode.curves.x !== undefined ||\n              curveNode.curves.y !== undefined ||\n              curveNode.curves.z !== undefined\n            ) {\n              if (layerCurveNodes[i] === undefined) {\n                const modelID = connections.get(child.ID).parents.filter(function (parent) {\n                  return parent.relationship !== undefined\n                })[0].ID\n\n                if (modelID !== undefined) {\n                  const rawModel = fbxTree.Objects.Model[modelID.toString()]\n\n                  if (rawModel === undefined) {\n                    console.warn('THREE.FBXLoader: Encountered a unused curve.', child)\n                    return\n                  }\n\n                  const node = {\n                    modelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName(rawModel.attrName) : '',\n                    ID: rawModel.id,\n                    initialPosition: [0, 0, 0],\n                    initialRotation: [0, 0, 0],\n                    initialScale: [1, 1, 1],\n                  }\n\n                  sceneGraph.traverse(function (child) {\n                    if (child.ID === rawModel.id) {\n                      node.transform = child.matrix\n\n                      if (child.userData.transformData) node.eulerOrder = child.userData.transformData.eulerOrder\n                    }\n                  })\n\n                  if (!node.transform) node.transform = new Matrix4()\n\n                  // if the animated model is pre rotated, we'll have to apply the pre rotations to every\n                  // animation value as well\n                  if ('PreRotation' in rawModel) node.preRotation = rawModel.PreRotation.value\n                  if ('PostRotation' in rawModel) node.postRotation = rawModel.PostRotation.value\n\n                  layerCurveNodes[i] = node\n                }\n              }\n\n              if (layerCurveNodes[i]) layerCurveNodes[i][curveNode.attr] = curveNode\n            } else if (curveNode.curves.morph !== undefined) {\n              if (layerCurveNodes[i] === undefined) {\n                const deformerID = connections.get(child.ID).parents.filter(function (parent) {\n                  return parent.relationship !== undefined\n                })[0].ID\n\n                const morpherID = connections.get(deformerID).parents[0].ID\n                const geoID = connections.get(morpherID).parents[0].ID\n\n                // assuming geometry is not used in more than one model\n                const modelID = connections.get(geoID).parents[0].ID\n\n                const rawModel = fbxTree.Objects.Model[modelID]\n\n                const node = {\n                  modelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName(rawModel.attrName) : '',\n                  morphName: fbxTree.Objects.Deformer[deformerID].attrName,\n                }\n\n                layerCurveNodes[i] = node\n              }\n\n              layerCurveNodes[i][curveNode.attr] = curveNode\n            }\n          }\n        })\n\n        layersMap.set(parseInt(nodeID), layerCurveNodes)\n      }\n    }\n\n    return layersMap\n  }\n\n  // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n  // hierarchy. Each Stack node will be used to create a AnimationClip\n  parseAnimStacks(layersMap) {\n    const rawStacks = fbxTree.Objects.AnimationStack\n\n    // connect the stacks (clips) up to the layers\n    const rawClips = {}\n\n    for (const nodeID in rawStacks) {\n      const children = connections.get(parseInt(nodeID)).children\n\n      if (children.length > 1) {\n        // it seems like stacks will always be associated with a single layer. But just in case there are files\n        // where there are multiple layers per stack, we'll display a warning\n        console.warn(\n          'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.',\n        )\n      }\n\n      const layer = layersMap.get(children[0].ID)\n\n      rawClips[nodeID] = {\n        name: rawStacks[nodeID].attrName,\n        layer: layer,\n      }\n    }\n\n    return rawClips\n  }\n\n  addClip(rawClip) {\n    let tracks = []\n\n    const scope = this\n    rawClip.layer.forEach(function (rawTracks) {\n      tracks = tracks.concat(scope.generateTracks(rawTracks))\n    })\n\n    return new AnimationClip(rawClip.name, -1, tracks)\n  }\n\n  generateTracks(rawTracks) {\n    const tracks = []\n\n    let initialPosition = new Vector3()\n    let initialRotation = new Quaternion()\n    let initialScale = new Vector3()\n\n    if (rawTracks.transform) rawTracks.transform.decompose(initialPosition, initialRotation, initialScale)\n\n    initialPosition = initialPosition.toArray()\n    initialRotation = new Euler().setFromQuaternion(initialRotation, rawTracks.eulerOrder).toArray()\n    initialScale = initialScale.toArray()\n\n    if (rawTracks.T !== undefined && Object.keys(rawTracks.T.curves).length > 0) {\n      const positionTrack = this.generateVectorTrack(\n        rawTracks.modelName,\n        rawTracks.T.curves,\n        initialPosition,\n        'position',\n      )\n      if (positionTrack !== undefined) tracks.push(positionTrack)\n    }\n\n    if (rawTracks.R !== undefined && Object.keys(rawTracks.R.curves).length > 0) {\n      const rotationTrack = this.generateRotationTrack(\n        rawTracks.modelName,\n        rawTracks.R.curves,\n        initialRotation,\n        rawTracks.preRotation,\n        rawTracks.postRotation,\n        rawTracks.eulerOrder,\n      )\n      if (rotationTrack !== undefined) tracks.push(rotationTrack)\n    }\n\n    if (rawTracks.S !== undefined && Object.keys(rawTracks.S.curves).length > 0) {\n      const scaleTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale')\n      if (scaleTrack !== undefined) tracks.push(scaleTrack)\n    }\n\n    if (rawTracks.DeformPercent !== undefined) {\n      const morphTrack = this.generateMorphTrack(rawTracks)\n      if (morphTrack !== undefined) tracks.push(morphTrack)\n    }\n\n    return tracks\n  }\n\n  generateVectorTrack(modelName, curves, initialValue, type) {\n    const times = this.getTimesForAllAxes(curves)\n    const values = this.getKeyframeTrackValues(times, curves, initialValue)\n\n    return new VectorKeyframeTrack(modelName + '.' + type, times, values)\n  }\n\n  generateRotationTrack(modelName, curves, initialValue, preRotation, postRotation, eulerOrder) {\n    if (curves.x !== undefined) {\n      this.interpolateRotations(curves.x)\n      curves.x.values = curves.x.values.map(MathUtils.degToRad)\n    }\n\n    if (curves.y !== undefined) {\n      this.interpolateRotations(curves.y)\n      curves.y.values = curves.y.values.map(MathUtils.degToRad)\n    }\n\n    if (curves.z !== undefined) {\n      this.interpolateRotations(curves.z)\n      curves.z.values = curves.z.values.map(MathUtils.degToRad)\n    }\n\n    const times = this.getTimesForAllAxes(curves)\n    const values = this.getKeyframeTrackValues(times, curves, initialValue)\n\n    if (preRotation !== undefined) {\n      preRotation = preRotation.map(MathUtils.degToRad)\n      preRotation.push(eulerOrder)\n\n      preRotation = new Euler().fromArray(preRotation)\n      preRotation = new Quaternion().setFromEuler(preRotation)\n    }\n\n    if (postRotation !== undefined) {\n      postRotation = postRotation.map(MathUtils.degToRad)\n      postRotation.push(eulerOrder)\n\n      postRotation = new Euler().fromArray(postRotation)\n      postRotation = new Quaternion().setFromEuler(postRotation).invert()\n    }\n\n    const quaternion = new Quaternion()\n    const euler = new Euler()\n\n    const quaternionValues = []\n\n    for (let i = 0; i < values.length; i += 3) {\n      euler.set(values[i], values[i + 1], values[i + 2], eulerOrder)\n\n      quaternion.setFromEuler(euler)\n\n      if (preRotation !== undefined) quaternion.premultiply(preRotation)\n      if (postRotation !== undefined) quaternion.multiply(postRotation)\n\n      quaternion.toArray(quaternionValues, (i / 3) * 4)\n    }\n\n    return new QuaternionKeyframeTrack(modelName + '.quaternion', times, quaternionValues)\n  }\n\n  generateMorphTrack(rawTracks) {\n    const curves = rawTracks.DeformPercent.curves.morph\n    const values = curves.values.map(function (val) {\n      return val / 100\n    })\n\n    const morphNum = sceneGraph.getObjectByName(rawTracks.modelName).morphTargetDictionary[rawTracks.morphName]\n\n    return new NumberKeyframeTrack(\n      rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']',\n      curves.times,\n      values,\n    )\n  }\n\n  // For all animated objects, times are defined separately for each axis\n  // Here we'll combine the times into one sorted array without duplicates\n  getTimesForAllAxes(curves) {\n    let times = []\n\n    // first join together the times for each axis, if defined\n    if (curves.x !== undefined) times = times.concat(curves.x.times)\n    if (curves.y !== undefined) times = times.concat(curves.y.times)\n    if (curves.z !== undefined) times = times.concat(curves.z.times)\n\n    // then sort them\n    times = times.sort(function (a, b) {\n      return a - b\n    })\n\n    // and remove duplicates\n    if (times.length > 1) {\n      let targetIndex = 1\n      let lastValue = times[0]\n      for (let i = 1; i < times.length; i++) {\n        const currentValue = times[i]\n        if (currentValue !== lastValue) {\n          times[targetIndex] = currentValue\n          lastValue = currentValue\n          targetIndex++\n        }\n      }\n\n      times = times.slice(0, targetIndex)\n    }\n\n    return times\n  }\n\n  getKeyframeTrackValues(times, curves, initialValue) {\n    const prevValue = initialValue\n\n    const values = []\n\n    let xIndex = -1\n    let yIndex = -1\n    let zIndex = -1\n\n    times.forEach(function (time) {\n      if (curves.x) xIndex = curves.x.times.indexOf(time)\n      if (curves.y) yIndex = curves.y.times.indexOf(time)\n      if (curves.z) zIndex = curves.z.times.indexOf(time)\n\n      // if there is an x value defined for this frame, use that\n      if (xIndex !== -1) {\n        const xValue = curves.x.values[xIndex]\n        values.push(xValue)\n        prevValue[0] = xValue\n      } else {\n        // otherwise use the x value from the previous frame\n        values.push(prevValue[0])\n      }\n\n      if (yIndex !== -1) {\n        const yValue = curves.y.values[yIndex]\n        values.push(yValue)\n        prevValue[1] = yValue\n      } else {\n        values.push(prevValue[1])\n      }\n\n      if (zIndex !== -1) {\n        const zValue = curves.z.values[zIndex]\n        values.push(zValue)\n        prevValue[2] = zValue\n      } else {\n        values.push(prevValue[2])\n      }\n    })\n\n    return values\n  }\n\n  // Rotations are defined as Euler angles which can have values  of any size\n  // These will be converted to quaternions which don't support values greater than\n  // PI, so we'll interpolate large rotations\n  interpolateRotations(curve) {\n    for (let i = 1; i < curve.values.length; i++) {\n      const initialValue = curve.values[i - 1]\n      const valuesSpan = curve.values[i] - initialValue\n\n      const absoluteSpan = Math.abs(valuesSpan)\n\n      if (absoluteSpan >= 180) {\n        const numSubIntervals = absoluteSpan / 180\n\n        const step = valuesSpan / numSubIntervals\n        let nextValue = initialValue + step\n\n        const initialTime = curve.times[i - 1]\n        const timeSpan = curve.times[i] - initialTime\n        const interval = timeSpan / numSubIntervals\n        let nextTime = initialTime + interval\n\n        const interpolatedTimes = []\n        const interpolatedValues = []\n\n        while (nextTime < curve.times[i]) {\n          interpolatedTimes.push(nextTime)\n          nextTime += interval\n\n          interpolatedValues.push(nextValue)\n          nextValue += step\n        }\n\n        curve.times = inject(curve.times, i, interpolatedTimes)\n        curve.values = inject(curve.values, i, interpolatedValues)\n      }\n    }\n  }\n}\n\n// parse an FBX file in ASCII format\nclass TextParser {\n  getPrevNode() {\n    return this.nodeStack[this.currentIndent - 2]\n  }\n\n  getCurrentNode() {\n    return this.nodeStack[this.currentIndent - 1]\n  }\n\n  getCurrentProp() {\n    return this.currentProp\n  }\n\n  pushStack(node) {\n    this.nodeStack.push(node)\n    this.currentIndent += 1\n  }\n\n  popStack() {\n    this.nodeStack.pop()\n    this.currentIndent -= 1\n  }\n\n  setCurrentProp(val, name) {\n    this.currentProp = val\n    this.currentPropName = name\n  }\n\n  parse(text) {\n    this.currentIndent = 0\n\n    this.allNodes = new FBXTree()\n    this.nodeStack = []\n    this.currentProp = []\n    this.currentPropName = ''\n\n    const scope = this\n\n    const split = text.split(/[\\r\\n]+/)\n\n    split.forEach(function (line, i) {\n      const matchComment = line.match(/^[\\s\\t]*;/)\n      const matchEmpty = line.match(/^[\\s\\t]*$/)\n\n      if (matchComment || matchEmpty) return\n\n      const matchBeginning = line.match('^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '')\n      const matchProperty = line.match('^\\\\t{' + scope.currentIndent + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)')\n      const matchEnd = line.match('^\\\\t{' + (scope.currentIndent - 1) + '}}')\n\n      if (matchBeginning) {\n        scope.parseNodeBegin(line, matchBeginning)\n      } else if (matchProperty) {\n        scope.parseNodeProperty(line, matchProperty, split[++i])\n      } else if (matchEnd) {\n        scope.popStack()\n      } else if (line.match(/^[^\\s\\t}]/)) {\n        // large arrays are split over multiple lines terminated with a ',' character\n        // if this is encountered the line needs to be joined to the previous line\n        scope.parseNodePropertyContinued(line)\n      }\n    })\n\n    return this.allNodes\n  }\n\n  parseNodeBegin(line, property) {\n    const nodeName = property[1].trim().replace(/^\"/, '').replace(/\"$/, '')\n\n    const nodeAttrs = property[2].split(',').map(function (attr) {\n      return attr.trim().replace(/^\"/, '').replace(/\"$/, '')\n    })\n\n    const node = { name: nodeName }\n    const attrs = this.parseNodeAttr(nodeAttrs)\n\n    const currentNode = this.getCurrentNode()\n\n    // a top node\n    if (this.currentIndent === 0) {\n      this.allNodes.add(nodeName, node)\n    } else {\n      // a subnode\n\n      // if the subnode already exists, append it\n      if (nodeName in currentNode) {\n        // special case Pose needs PoseNodes as an array\n        if (nodeName === 'PoseNode') {\n          currentNode.PoseNode.push(node)\n        } else if (currentNode[nodeName].id !== undefined) {\n          currentNode[nodeName] = {}\n          currentNode[nodeName][currentNode[nodeName].id] = currentNode[nodeName]\n        }\n\n        if (attrs.id !== '') currentNode[nodeName][attrs.id] = node\n      } else if (typeof attrs.id === 'number') {\n        currentNode[nodeName] = {}\n        currentNode[nodeName][attrs.id] = node\n      } else if (nodeName !== 'Properties70') {\n        if (nodeName === 'PoseNode') currentNode[nodeName] = [node]\n        else currentNode[nodeName] = node\n      }\n    }\n\n    if (typeof attrs.id === 'number') node.id = attrs.id\n    if (attrs.name !== '') node.attrName = attrs.name\n    if (attrs.type !== '') node.attrType = attrs.type\n\n    this.pushStack(node)\n  }\n\n  parseNodeAttr(attrs) {\n    let id = attrs[0]\n\n    if (attrs[0] !== '') {\n      id = parseInt(attrs[0])\n\n      if (isNaN(id)) {\n        id = attrs[0]\n      }\n    }\n\n    let name = '',\n      type = ''\n\n    if (attrs.length > 1) {\n      name = attrs[1].replace(/^(\\w+)::/, '')\n      type = attrs[2]\n    }\n\n    return { id: id, name: name, type: type }\n  }\n\n  parseNodeProperty(line, property, contentLine) {\n    let propName = property[1].replace(/^\"/, '').replace(/\"$/, '').trim()\n    let propValue = property[2].replace(/^\"/, '').replace(/\"$/, '').trim()\n\n    // for special case: base64 image data follows \"Content: ,\" line\n    //\tContent: ,\n    //\t \"/9j/4RDaRXhpZgAATU0A...\"\n    if (propName === 'Content' && propValue === ',') {\n      propValue = contentLine.replace(/\"/g, '').replace(/,$/, '').trim()\n    }\n\n    const currentNode = this.getCurrentNode()\n    const parentName = currentNode.name\n\n    if (parentName === 'Properties70') {\n      this.parseNodeSpecialProperty(line, propName, propValue)\n      return\n    }\n\n    // Connections\n    if (propName === 'C') {\n      const connProps = propValue.split(',').slice(1)\n      const from = parseInt(connProps[0])\n      const to = parseInt(connProps[1])\n\n      let rest = propValue.split(',').slice(3)\n\n      rest = rest.map(function (elem) {\n        return elem.trim().replace(/^\"/, '')\n      })\n\n      propName = 'connections'\n      propValue = [from, to]\n      append(propValue, rest)\n\n      if (currentNode[propName] === undefined) {\n        currentNode[propName] = []\n      }\n    }\n\n    // Node\n    if (propName === 'Node') currentNode.id = propValue\n\n    // connections\n    if (propName in currentNode && Array.isArray(currentNode[propName])) {\n      currentNode[propName].push(propValue)\n    } else {\n      if (propName !== 'a') currentNode[propName] = propValue\n      else currentNode.a = propValue\n    }\n\n    this.setCurrentProp(currentNode, propName)\n\n    // convert string to array, unless it ends in ',' in which case more will be added to it\n    if (propName === 'a' && propValue.slice(-1) !== ',') {\n      currentNode.a = parseNumberArray(propValue)\n    }\n  }\n\n  parseNodePropertyContinued(line) {\n    const currentNode = this.getCurrentNode()\n\n    currentNode.a += line\n\n    // if the line doesn't end in ',' we have reached the end of the property value\n    // so convert the string to an array\n    if (line.slice(-1) !== ',') {\n      currentNode.a = parseNumberArray(currentNode.a)\n    }\n  }\n\n  // parse \"Property70\"\n  parseNodeSpecialProperty(line, propName, propValue) {\n    // split this\n    // P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n    // into array like below\n    // [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n    const props = propValue.split('\",').map(function (prop) {\n      return prop.trim().replace(/^\\\"/, '').replace(/\\s/, '_')\n    })\n\n    const innerPropName = props[0]\n    const innerPropType1 = props[1]\n    const innerPropType2 = props[2]\n    const innerPropFlag = props[3]\n    let innerPropValue = props[4]\n\n    // cast values where needed, otherwise leave as strings\n    switch (innerPropType1) {\n      case 'int':\n      case 'enum':\n      case 'bool':\n      case 'ULongLong':\n      case 'double':\n      case 'Number':\n      case 'FieldOfView':\n        innerPropValue = parseFloat(innerPropValue)\n        break\n\n      case 'Color':\n      case 'ColorRGB':\n      case 'Vector3D':\n      case 'Lcl_Translation':\n      case 'Lcl_Rotation':\n      case 'Lcl_Scaling':\n        innerPropValue = parseNumberArray(innerPropValue)\n        break\n    }\n\n    // CAUTION: these props must append to parent's parent\n    this.getPrevNode()[innerPropName] = {\n      type: innerPropType1,\n      type2: innerPropType2,\n      flag: innerPropFlag,\n      value: innerPropValue,\n    }\n\n    this.setCurrentProp(this.getPrevNode(), innerPropName)\n  }\n}\n\n// Parse an FBX file in Binary format\nclass BinaryParser {\n  parse(buffer) {\n    const reader = new BinaryReader(buffer)\n    reader.skip(23) // skip magic 23 bytes\n\n    const version = reader.getUint32()\n\n    if (version < 6400) {\n      throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: ' + version)\n    }\n\n    const allNodes = new FBXTree()\n\n    while (!this.endOfContent(reader)) {\n      const node = this.parseNode(reader, version)\n      if (node !== null) allNodes.add(node.name, node)\n    }\n\n    return allNodes\n  }\n\n  // Check if reader has reached the end of content.\n  endOfContent(reader) {\n    // footer size: 160bytes + 16-byte alignment padding\n    // - 16bytes: magic\n    // - padding til 16-byte alignment (at least 1byte?)\n    //\t(seems like some exporters embed fixed 15 or 16bytes?)\n    // - 4bytes: magic\n    // - 4bytes: version\n    // - 120bytes: zero\n    // - 16bytes: magic\n    if (reader.size() % 16 === 0) {\n      return ((reader.getOffset() + 160 + 16) & ~0xf) >= reader.size()\n    } else {\n      return reader.getOffset() + 160 + 16 >= reader.size()\n    }\n  }\n\n  // recursively parse nodes until the end of the file is reached\n  parseNode(reader, version) {\n    const node = {}\n\n    // The first three data sizes depends on version.\n    const endOffset = version >= 7500 ? reader.getUint64() : reader.getUint32()\n    const numProperties = version >= 7500 ? reader.getUint64() : reader.getUint32()\n\n    version >= 7500 ? reader.getUint64() : reader.getUint32() // the returned propertyListLen is not used\n\n    const nameLen = reader.getUint8()\n    const name = reader.getString(nameLen)\n\n    // Regards this node as NULL-record if endOffset is zero\n    if (endOffset === 0) return null\n\n    const propertyList = []\n\n    for (let i = 0; i < numProperties; i++) {\n      propertyList.push(this.parseProperty(reader))\n    }\n\n    // Regards the first three elements in propertyList as id, attrName, and attrType\n    const id = propertyList.length > 0 ? propertyList[0] : ''\n    const attrName = propertyList.length > 1 ? propertyList[1] : ''\n    const attrType = propertyList.length > 2 ? propertyList[2] : ''\n\n    // check if this node represents just a single property\n    // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n    node.singleProperty = numProperties === 1 && reader.getOffset() === endOffset ? true : false\n\n    while (endOffset > reader.getOffset()) {\n      const subNode = this.parseNode(reader, version)\n\n      if (subNode !== null) this.parseSubNode(name, node, subNode)\n    }\n\n    node.propertyList = propertyList // raw property list used by parent\n\n    if (typeof id === 'number') node.id = id\n    if (attrName !== '') node.attrName = attrName\n    if (attrType !== '') node.attrType = attrType\n    if (name !== '') node.name = name\n\n    return node\n  }\n\n  parseSubNode(name, node, subNode) {\n    // special case: child node is single property\n    if (subNode.singleProperty === true) {\n      const value = subNode.propertyList[0]\n\n      if (Array.isArray(value)) {\n        node[subNode.name] = subNode\n\n        subNode.a = value\n      } else {\n        node[subNode.name] = value\n      }\n    } else if (name === 'Connections' && subNode.name === 'C') {\n      const array = []\n\n      subNode.propertyList.forEach(function (property, i) {\n        // first Connection is FBX type (OO, OP, etc.). We'll discard these\n        if (i !== 0) array.push(property)\n      })\n\n      if (node.connections === undefined) {\n        node.connections = []\n      }\n\n      node.connections.push(array)\n    } else if (subNode.name === 'Properties70') {\n      const keys = Object.keys(subNode)\n\n      keys.forEach(function (key) {\n        node[key] = subNode[key]\n      })\n    } else if (name === 'Properties70' && subNode.name === 'P') {\n      let innerPropName = subNode.propertyList[0]\n      let innerPropType1 = subNode.propertyList[1]\n      const innerPropType2 = subNode.propertyList[2]\n      const innerPropFlag = subNode.propertyList[3]\n      let innerPropValue\n\n      if (innerPropName.indexOf('Lcl ') === 0) innerPropName = innerPropName.replace('Lcl ', 'Lcl_')\n      if (innerPropType1.indexOf('Lcl ') === 0) innerPropType1 = innerPropType1.replace('Lcl ', 'Lcl_')\n\n      if (\n        innerPropType1 === 'Color' ||\n        innerPropType1 === 'ColorRGB' ||\n        innerPropType1 === 'Vector' ||\n        innerPropType1 === 'Vector3D' ||\n        innerPropType1.indexOf('Lcl_') === 0\n      ) {\n        innerPropValue = [subNode.propertyList[4], subNode.propertyList[5], subNode.propertyList[6]]\n      } else {\n        innerPropValue = subNode.propertyList[4]\n      }\n\n      // this will be copied to parent, see above\n      node[innerPropName] = {\n        type: innerPropType1,\n        type2: innerPropType2,\n        flag: innerPropFlag,\n        value: innerPropValue,\n      }\n    } else if (node[subNode.name] === undefined) {\n      if (typeof subNode.id === 'number') {\n        node[subNode.name] = {}\n        node[subNode.name][subNode.id] = subNode\n      } else {\n        node[subNode.name] = subNode\n      }\n    } else {\n      if (subNode.name === 'PoseNode') {\n        if (!Array.isArray(node[subNode.name])) {\n          node[subNode.name] = [node[subNode.name]]\n        }\n\n        node[subNode.name].push(subNode)\n      } else if (node[subNode.name][subNode.id] === undefined) {\n        node[subNode.name][subNode.id] = subNode\n      }\n    }\n  }\n\n  parseProperty(reader) {\n    const type = reader.getString(1)\n    let length\n\n    switch (type) {\n      case 'C':\n        return reader.getBoolean()\n\n      case 'D':\n        return reader.getFloat64()\n\n      case 'F':\n        return reader.getFloat32()\n\n      case 'I':\n        return reader.getInt32()\n\n      case 'L':\n        return reader.getInt64()\n\n      case 'R':\n        length = reader.getUint32()\n        return reader.getArrayBuffer(length)\n\n      case 'S':\n        length = reader.getUint32()\n        return reader.getString(length)\n\n      case 'Y':\n        return reader.getInt16()\n\n      case 'b':\n      case 'c':\n      case 'd':\n      case 'f':\n      case 'i':\n      case 'l':\n        const arrayLength = reader.getUint32()\n        const encoding = reader.getUint32() // 0: non-compressed, 1: compressed\n        const compressedLength = reader.getUint32()\n\n        if (encoding === 0) {\n          switch (type) {\n            case 'b':\n            case 'c':\n              return reader.getBooleanArray(arrayLength)\n\n            case 'd':\n              return reader.getFloat64Array(arrayLength)\n\n            case 'f':\n              return reader.getFloat32Array(arrayLength)\n\n            case 'i':\n              return reader.getInt32Array(arrayLength)\n\n            case 'l':\n              return reader.getInt64Array(arrayLength)\n          }\n        }\n\n        const data = unzlibSync(new Uint8Array(reader.getArrayBuffer(compressedLength)))\n        const reader2 = new BinaryReader(data.buffer)\n\n        switch (type) {\n          case 'b':\n          case 'c':\n            return reader2.getBooleanArray(arrayLength)\n\n          case 'd':\n            return reader2.getFloat64Array(arrayLength)\n\n          case 'f':\n            return reader2.getFloat32Array(arrayLength)\n\n          case 'i':\n            return reader2.getInt32Array(arrayLength)\n\n          case 'l':\n            return reader2.getInt64Array(arrayLength)\n        }\n\n      default:\n        throw new Error('THREE.FBXLoader: Unknown property type ' + type)\n    }\n  }\n}\n\nclass BinaryReader {\n  constructor(buffer, littleEndian) {\n    this.dv = new DataView(buffer)\n    this.offset = 0\n    this.littleEndian = littleEndian !== undefined ? littleEndian : true\n  }\n\n  getOffset() {\n    return this.offset\n  }\n\n  size() {\n    return this.dv.buffer.byteLength\n  }\n\n  skip(length) {\n    this.offset += length\n  }\n\n  // seems like true/false representation depends on exporter.\n  // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n  // then sees LSB.\n  getBoolean() {\n    return (this.getUint8() & 1) === 1\n  }\n\n  getBooleanArray(size) {\n    const a = []\n\n    for (let i = 0; i < size; i++) {\n      a.push(this.getBoolean())\n    }\n\n    return a\n  }\n\n  getUint8() {\n    const value = this.dv.getUint8(this.offset)\n    this.offset += 1\n    return value\n  }\n\n  getInt16() {\n    const value = this.dv.getInt16(this.offset, this.littleEndian)\n    this.offset += 2\n    return value\n  }\n\n  getInt32() {\n    const value = this.dv.getInt32(this.offset, this.littleEndian)\n    this.offset += 4\n    return value\n  }\n\n  getInt32Array(size) {\n    const a = []\n\n    for (let i = 0; i < size; i++) {\n      a.push(this.getInt32())\n    }\n\n    return a\n  }\n\n  getUint32() {\n    const value = this.dv.getUint32(this.offset, this.littleEndian)\n    this.offset += 4\n    return value\n  }\n\n  // JavaScript doesn't support 64-bit integer so calculate this here\n  // 1 << 32 will return 1 so using multiply operation instead here.\n  // There's a possibility that this method returns wrong value if the value\n  // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n  // TODO: safely handle 64-bit integer\n  getInt64() {\n    let low, high\n\n    if (this.littleEndian) {\n      low = this.getUint32()\n      high = this.getUint32()\n    } else {\n      high = this.getUint32()\n      low = this.getUint32()\n    }\n\n    // calculate negative value\n    if (high & 0x80000000) {\n      high = ~high & 0xffffffff\n      low = ~low & 0xffffffff\n\n      if (low === 0xffffffff) high = (high + 1) & 0xffffffff\n\n      low = (low + 1) & 0xffffffff\n\n      return -(high * 0x100000000 + low)\n    }\n\n    return high * 0x100000000 + low\n  }\n\n  getInt64Array(size) {\n    const a = []\n\n    for (let i = 0; i < size; i++) {\n      a.push(this.getInt64())\n    }\n\n    return a\n  }\n\n  // Note: see getInt64() comment\n  getUint64() {\n    let low, high\n\n    if (this.littleEndian) {\n      low = this.getUint32()\n      high = this.getUint32()\n    } else {\n      high = this.getUint32()\n      low = this.getUint32()\n    }\n\n    return high * 0x100000000 + low\n  }\n\n  getFloat32() {\n    const value = this.dv.getFloat32(this.offset, this.littleEndian)\n    this.offset += 4\n    return value\n  }\n\n  getFloat32Array(size) {\n    const a = []\n\n    for (let i = 0; i < size; i++) {\n      a.push(this.getFloat32())\n    }\n\n    return a\n  }\n\n  getFloat64() {\n    const value = this.dv.getFloat64(this.offset, this.littleEndian)\n    this.offset += 8\n    return value\n  }\n\n  getFloat64Array(size) {\n    const a = []\n\n    for (let i = 0; i < size; i++) {\n      a.push(this.getFloat64())\n    }\n\n    return a\n  }\n\n  getArrayBuffer(size) {\n    const value = this.dv.buffer.slice(this.offset, this.offset + size)\n    this.offset += size\n    return value\n  }\n\n  getString(size) {\n    // note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n    let a = []\n\n    for (let i = 0; i < size; i++) {\n      a[i] = this.getUint8()\n    }\n\n    const nullByte = a.indexOf(0)\n    if (nullByte >= 0) a = a.slice(0, nullByte)\n\n    return decodeText(new Uint8Array(a))\n  }\n}\n\n// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n// and BinaryParser( FBX Binary format)\nclass FBXTree {\n  add(key, val) {\n    this[key] = val\n  }\n}\n\n// ************** UTILITY FUNCTIONS **************\n\nfunction isFbxFormatBinary(buffer) {\n  const CORRECT = 'Kaydara\\u0020FBX\\u0020Binary\\u0020\\u0020\\0'\n\n  return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString(buffer, 0, CORRECT.length)\n}\n\nfunction isFbxFormatASCII(text) {\n  const CORRECT = [\n    'K',\n    'a',\n    'y',\n    'd',\n    'a',\n    'r',\n    'a',\n    '\\\\',\n    'F',\n    'B',\n    'X',\n    '\\\\',\n    'B',\n    'i',\n    'n',\n    'a',\n    'r',\n    'y',\n    '\\\\',\n    '\\\\',\n  ]\n\n  let cursor = 0\n\n  function read(offset) {\n    const result = text[offset - 1]\n    text = text.slice(cursor + offset)\n    cursor++\n    return result\n  }\n\n  for (let i = 0; i < CORRECT.length; ++i) {\n    const num = read(1)\n    if (num === CORRECT[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction getFbxVersion(text) {\n  const versionRegExp = /FBXVersion: (\\d+)/\n  const match = text.match(versionRegExp)\n\n  if (match) {\n    const version = parseInt(match[1])\n    return version\n  }\n\n  throw new Error('THREE.FBXLoader: Cannot find the version number for the file given.')\n}\n\n// Converts FBX ticks into real time seconds.\nfunction convertFBXTimeToSeconds(time) {\n  return time / 46186158000\n}\n\nconst dataArray = []\n\n// extracts the data from the correct position in the FBX array based on indexing type\nfunction getData(polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {\n  let index\n\n  switch (infoObject.mappingType) {\n    case 'ByPolygonVertex':\n      index = polygonVertexIndex\n      break\n    case 'ByPolygon':\n      index = polygonIndex\n      break\n    case 'ByVertice':\n      index = vertexIndex\n      break\n    case 'AllSame':\n      index = infoObject.indices[0]\n      break\n    default:\n      console.warn('THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType)\n  }\n\n  if (infoObject.referenceType === 'IndexToDirect') index = infoObject.indices[index]\n\n  const from = index * infoObject.dataSize\n  const to = from + infoObject.dataSize\n\n  return slice(dataArray, infoObject.buffer, from, to)\n}\n\nconst tempEuler = /* @__PURE__ */ new Euler()\nconst tempVec = /* @__PURE__ */ new Vector3()\n\n// generate transformation from FBX transform data\n// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\nfunction generateTransform(transformData) {\n  const lTranslationM = new Matrix4()\n  const lPreRotationM = new Matrix4()\n  const lRotationM = new Matrix4()\n  const lPostRotationM = new Matrix4()\n\n  const lScalingM = new Matrix4()\n  const lScalingPivotM = new Matrix4()\n  const lScalingOffsetM = new Matrix4()\n  const lRotationOffsetM = new Matrix4()\n  const lRotationPivotM = new Matrix4()\n\n  const lParentGX = new Matrix4()\n  const lParentLX = new Matrix4()\n  const lGlobalT = new Matrix4()\n\n  const inheritType = transformData.inheritType ? transformData.inheritType : 0\n\n  if (transformData.translation) lTranslationM.setPosition(tempVec.fromArray(transformData.translation))\n\n  if (transformData.preRotation) {\n    const array = transformData.preRotation.map(MathUtils.degToRad)\n    array.push(transformData.eulerOrder)\n    lPreRotationM.makeRotationFromEuler(tempEuler.fromArray(array))\n  }\n\n  if (transformData.rotation) {\n    const array = transformData.rotation.map(MathUtils.degToRad)\n    array.push(transformData.eulerOrder)\n    lRotationM.makeRotationFromEuler(tempEuler.fromArray(array))\n  }\n\n  if (transformData.postRotation) {\n    const array = transformData.postRotation.map(MathUtils.degToRad)\n    array.push(transformData.eulerOrder)\n    lPostRotationM.makeRotationFromEuler(tempEuler.fromArray(array))\n    lPostRotationM.invert()\n  }\n\n  if (transformData.scale) lScalingM.scale(tempVec.fromArray(transformData.scale))\n\n  // Pivots and offsets\n  if (transformData.scalingOffset) lScalingOffsetM.setPosition(tempVec.fromArray(transformData.scalingOffset))\n  if (transformData.scalingPivot) lScalingPivotM.setPosition(tempVec.fromArray(transformData.scalingPivot))\n  if (transformData.rotationOffset) lRotationOffsetM.setPosition(tempVec.fromArray(transformData.rotationOffset))\n  if (transformData.rotationPivot) lRotationPivotM.setPosition(tempVec.fromArray(transformData.rotationPivot))\n\n  // parent transform\n  if (transformData.parentMatrixWorld) {\n    lParentLX.copy(transformData.parentMatrix)\n    lParentGX.copy(transformData.parentMatrixWorld)\n  }\n\n  const lLRM = lPreRotationM.clone().multiply(lRotationM).multiply(lPostRotationM)\n  // Global Rotation\n  const lParentGRM = new Matrix4()\n  lParentGRM.extractRotation(lParentGX)\n\n  // Global Shear*Scaling\n  const lParentTM = new Matrix4()\n  lParentTM.copyPosition(lParentGX)\n\n  const lParentGRSM = lParentTM.clone().invert().multiply(lParentGX)\n  const lParentGSM = lParentGRM.clone().invert().multiply(lParentGRSM)\n  const lLSM = lScalingM\n\n  const lGlobalRS = new Matrix4()\n\n  if (inheritType === 0) {\n    lGlobalRS.copy(lParentGRM).multiply(lLRM).multiply(lParentGSM).multiply(lLSM)\n  } else if (inheritType === 1) {\n    lGlobalRS.copy(lParentGRM).multiply(lParentGSM).multiply(lLRM).multiply(lLSM)\n  } else {\n    const lParentLSM = new Matrix4().scale(new Vector3().setFromMatrixScale(lParentLX))\n    const lParentLSM_inv = lParentLSM.clone().invert()\n    const lParentGSM_noLocal = lParentGSM.clone().multiply(lParentLSM_inv)\n\n    lGlobalRS.copy(lParentGRM).multiply(lLRM).multiply(lParentGSM_noLocal).multiply(lLSM)\n  }\n\n  const lRotationPivotM_inv = lRotationPivotM.clone().invert()\n  const lScalingPivotM_inv = lScalingPivotM.clone().invert()\n  // Calculate the local transform matrix\n  let lTransform = lTranslationM\n    .clone()\n    .multiply(lRotationOffsetM)\n    .multiply(lRotationPivotM)\n    .multiply(lPreRotationM)\n    .multiply(lRotationM)\n    .multiply(lPostRotationM)\n    .multiply(lRotationPivotM_inv)\n    .multiply(lScalingOffsetM)\n    .multiply(lScalingPivotM)\n    .multiply(lScalingM)\n    .multiply(lScalingPivotM_inv)\n\n  const lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition(lTransform)\n\n  const lGlobalTranslation = lParentGX.clone().multiply(lLocalTWithAllPivotAndOffsetInfo)\n  lGlobalT.copyPosition(lGlobalTranslation)\n\n  lTransform = lGlobalT.clone().multiply(lGlobalRS)\n\n  // from global to local\n  lTransform.premultiply(lParentGX.invert())\n\n  return lTransform\n}\n\n// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\nfunction getEulerOrder(order) {\n  order = order || 0\n\n  const enums = [\n    'ZYX', // -> XYZ extrinsic\n    'YZX', // -> XZY extrinsic\n    'XZY', // -> YZX extrinsic\n    'ZXY', // -> YXZ extrinsic\n    'YXZ', // -> ZXY extrinsic\n    'XYZ', // -> ZYX extrinsic\n    //'SphericXYZ', // not possible to support\n  ]\n\n  if (order === 6) {\n    console.warn('THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.')\n    return enums[0]\n  }\n\n  return enums[order]\n}\n\n// Parses comma separated list of numbers and returns them an array.\n// Used internally by the TextParser\nfunction parseNumberArray(value) {\n  const array = value.split(',').map(function (val) {\n    return parseFloat(val)\n  })\n\n  return array\n}\n\nfunction convertArrayBufferToString(buffer, from, to) {\n  if (from === undefined) from = 0\n  if (to === undefined) to = buffer.byteLength\n\n  return decodeText(new Uint8Array(buffer, from, to))\n}\n\nfunction append(a, b) {\n  for (let i = 0, j = a.length, l = b.length; i < l; i++, j++) {\n    a[j] = b[i]\n  }\n}\n\nfunction slice(a, b, from, to) {\n  for (let i = from, j = 0; i < to; i++, j++) {\n    a[j] = b[i]\n  }\n\n  return a\n}\n\n// inject array a2 into array a1 at index\nfunction inject(a1, index, a2) {\n  return a1.slice(0, index).concat(a2).concat(a1.slice(index))\n}\n\nexport { FBXLoader }\n","import React, { useMemo, useEffect, useRef, useCallback, createContext, createElement, useContext, useReducer, useDebugValue, useState, Suspense, cloneElement } from 'react';\nimport { Environment as Environment$1, useBounds, PresentationControls, Bounds, ContactShadows, useGLTF, OrbitControls, MeshReflectorMaterial } from '@react-three/drei';\nimport { PropertyBinding, InterpolateLinear, AnimationClip, InterpolateDiscrete, QuaternionKeyframeTrack, ColorKeyframeTrack, VectorKeyframeTrack, NumberKeyframeTrack, AnimationMixer, LoopRepeat, Vector2, Group, SkinnedMesh, Vector3, Euler, LinearFilter, Mesh, Texture, Box3, ACESFilmicToneMapping, TextureLoader, LoopOnce, Object3D } from 'three';\nimport { useFrame, useGraph, useThree, Canvas, useLoader } from '@react-three/fiber';\nimport { FBXLoader, GLTFLoader, DRACOLoader } from 'three-stdlib';\nimport { suspend } from 'suspend-react';\nimport { Bloom as Bloom$1, EffectComposer, N8AO, Vignette, BrightnessContrast, HueSaturation } from '@react-three/postprocessing';\nimport require$$0 from 'util';\nimport { track } from '@amplitude/analytics-browser';\n\nconst environmentPresets = {\n    hub: 'hub',\n    sunset: 'sunset',\n    dawn: 'dawn',\n    night: 'night',\n    warehouse: 'warehouse',\n    forest: 'forest',\n    apartment: 'apartment',\n    studio: 'studio',\n    city: 'city',\n    park: 'park',\n    lobby: 'lobby',\n    soft: 'soft'\n};\nconst getPresetEnvironmentMap = (preset) => `https://files.readyplayer.me/visage/environment/${preset}.hdr`;\nconst environmentModels = {\n    spaceStation: 'https://files.readyplayer.me/visage/props/environment-space-station.glb',\n    platformDark: 'https://files.readyplayer.me/visage/props/simple-platform-dark.glb',\n    platformGreen: 'https://files.readyplayer.me/visage/props/simple-platform-green.glb',\n    platformBlue: 'https://files.readyplayer.me/visage/props/simple-platform-blue.glb'\n};\n\nconst Environment = ({ environment, enablePostProcessing }) => {\n    const config = useMemo(() => {\n        const isStaticPreset = environment in environmentPresets;\n        const files = isStaticPreset ? getPresetEnvironmentMap(environment) : environment;\n        return {\n            files\n        };\n    }, [environment]);\n    const environmentIntensity = enablePostProcessing ? 12 : 4;\n    return React.createElement(Environment$1, { files: config.files, environmentIntensity: environmentIntensity });\n};\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n// @ts-nocheck\n/* eslint-disable */\n// This file is part of meshoptimizer library and is distributed under the terms of MIT License.\n// Copyright (C) 2016-2022, by Arseny Kapoulkine (arseny.kapoulkine@gmail.com)\nvar MeshoptDecoder = (function () {\n    // Built with clang version 14.0.4\n    // Built from meshoptimizer 0.18\n    var wasm_base = 'b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb';\n    var wasm_simd = 'b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb';\n    var detector = new Uint8Array([\n        0, 97, 115, 109, 1, 0, 0, 0, 1, 4, 1, 96, 0, 0, 3, 3, 2, 0, 0, 5, 3, 1, 0, 1, 12, 1, 0, 10, 22, 2, 12, 0, 65, 0, 65,\n        0, 65, 0, 252, 10, 0, 0, 11, 7, 0, 65, 0, 253, 15, 26, 11\n    ]);\n    var wasmpack = new Uint8Array([\n        32, 0, 65, 2, 1, 106, 34, 33, 3, 128, 11, 4, 13, 64, 6, 253, 10, 7, 15, 116, 127, 5, 8, 12, 40, 16, 19, 54, 20, 9,\n        27, 255, 113, 17, 42, 67, 24, 23, 146, 148, 18, 14, 22, 45, 70, 69, 56, 114, 101, 21, 25, 63, 75, 136, 108, 28, 118,\n        29, 73, 115\n    ]);\n    if (typeof WebAssembly !== 'object') {\n        return {\n            supported: false\n        };\n    }\n    var wasm = WebAssembly.validate(detector) ? wasm_simd : wasm_base;\n    var instance;\n    var ready = WebAssembly.instantiate(unpack(wasm), {}).then(function (result) {\n        instance = result.instance;\n        instance.exports.__wasm_call_ctors();\n    });\n    function unpack(data) {\n        var result = new Uint8Array(data.length);\n        for (var i = 0; i < data.length; ++i) {\n            var ch = data.charCodeAt(i);\n            result[i] = ch > 96 ? ch - 97 : ch > 64 ? ch - 39 : ch + 4;\n        }\n        var write = 0;\n        for (var i = 0; i < data.length; ++i) {\n            result[write++] = result[i] < 60 ? wasmpack[result[i]] : (result[i] - 60) * 64 + result[++i];\n        }\n        return result.buffer.slice(0, write);\n    }\n    function decode(fun, target, count, size, source, filter) {\n        var sbrk = instance.exports.sbrk;\n        var count4 = (count + 3) & ~3;\n        var tp = sbrk(count4 * size);\n        var sp = sbrk(source.length);\n        var heap = new Uint8Array(instance.exports.memory.buffer);\n        heap.set(source, sp);\n        var res = fun(tp, count, size, sp, source.length);\n        if (res == 0 && filter) {\n            filter(tp, count4, size);\n        }\n        target.set(heap.subarray(tp, tp + count * size));\n        sbrk(tp - sbrk(0));\n        if (res != 0) {\n            throw new Error('Malformed buffer data: ' + res);\n        }\n    }\n    var filters = {\n        NONE: '',\n        OCTAHEDRAL: 'meshopt_decodeFilterOct',\n        QUATERNION: 'meshopt_decodeFilterQuat',\n        EXPONENTIAL: 'meshopt_decodeFilterExp'\n    };\n    var decoders = {\n        ATTRIBUTES: 'meshopt_decodeVertexBuffer',\n        TRIANGLES: 'meshopt_decodeIndexBuffer',\n        INDICES: 'meshopt_decodeIndexSequence'\n    };\n    var workers = [];\n    var requestId = 0;\n    function createWorker(url) {\n        var worker = {\n            object: new Worker(url),\n            pending: 0,\n            requests: {}\n        };\n        worker.object.onmessage = function (event) {\n            var data = event.data;\n            worker.pending -= data.count;\n            worker.requests[data.id][data.action](data.value);\n            delete worker.requests[data.id];\n        };\n        return worker;\n    }\n    function initWorkers(count) {\n        var source = 'var instance; var ready = WebAssembly.instantiate(new Uint8Array([' +\n            new Uint8Array(unpack(wasm)) +\n            ']), {})' +\n            '.then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });' +\n            'self.onmessage = workerProcess;' +\n            decode.toString() +\n            workerProcess.toString();\n        var blob = new Blob([source], { type: 'text/javascript' });\n        var url = URL.createObjectURL(blob);\n        for (var i = 0; i < count; ++i) {\n            workers[i] = createWorker(url);\n        }\n        URL.revokeObjectURL(url);\n    }\n    function decodeWorker(count, size, source, mode, filter) {\n        var worker = workers[0];\n        for (var i = 1; i < workers.length; ++i) {\n            if (workers[i].pending < worker.pending) {\n                worker = workers[i];\n            }\n        }\n        return new Promise(function (resolve, reject) {\n            var data = new Uint8Array(source);\n            var id = requestId++;\n            worker.pending += count;\n            worker.requests[id] = { resolve: resolve, reject: reject };\n            worker.object.postMessage({ id: id, count: count, size: size, source: data, mode: mode, filter: filter }, [\n                data.buffer\n            ]);\n        });\n    }\n    function workerProcess(event) {\n        ready.then(function () {\n            var data = event.data;\n            try {\n                var target = new Uint8Array(data.count * data.size);\n                decode(instance.exports[data.mode], target, data.count, data.size, data.source, instance.exports[data.filter]);\n                self.postMessage({ id: data.id, count: data.count, action: 'resolve', value: target }, [target.buffer]);\n            }\n            catch (error) {\n                self.postMessage({ id: data.id, count: data.count, action: 'reject', value: error });\n            }\n        });\n    }\n    return {\n        ready: ready,\n        supported: true,\n        useWorkers: function (count) {\n            initWorkers(count);\n        },\n        decodeVertexBuffer: function (target, count, size, source, filter) {\n            decode(instance.exports.meshopt_decodeVertexBuffer, target, count, size, source, instance.exports[filters[filter]]);\n        },\n        decodeIndexBuffer: function (target, count, size, source) {\n            decode(instance.exports.meshopt_decodeIndexBuffer, target, count, size, source);\n        },\n        decodeIndexSequence: function (target, count, size, source) {\n            decode(instance.exports.meshopt_decodeIndexSequence, target, count, size, source);\n        },\n        decodeGltfBuffer: function (target, count, size, source, mode, filter) {\n            decode(instance.exports[decoders[mode]], target, count, size, source, instance.exports[filters[filter]]);\n        },\n        decodeGltfBufferAsync: function (count, size, source, mode, filter) {\n            if (workers.length > 0) {\n                return decodeWorker(count, size, source, decoders[mode], filters[filter]);\n            }\n            return ready.then(function () {\n                var target = new Uint8Array(count * size);\n                decode(instance.exports[decoders[mode]], target, count, size, source, instance.exports[filters[filter]]);\n                return target;\n            });\n        }\n    };\n})();\n\n/* eslint-disable */\n// DUPLICATED from GLTFLoader.js\nconst ANIMATION_TARGET_TYPE = {\n    node: 'node',\n    material: 'material',\n    camera: 'camera',\n    light: 'light'\n};\nconst KHR_ANIMATION_POINTER = 'KHR_animation_pointer';\n// DUPLICATED from GLTFLoader.js\nconst INTERPOLATION = {\n    CUBICSPLINE: undefined,\n    // keyframe track will be initialized with a default interpolation type, then modified.\n    LINEAR: InterpolateLinear,\n    STEP: InterpolateDiscrete\n};\n// HACK monkey patching findNode to ensure we can map to other types required by KHR_animation_pointer.\nconst find = PropertyBinding.findNode;\nlet _havePatchedPropertyBindings = false;\n/**\n * Animation Pointer Extension\n *\n * Draft Specification: https://github.com/ux3d/glTF/tree/extensions/KHR_animation_pointer/extensions/2.0/Khronos/KHR_animation_pointer\n */\nclass GLTFAnimationPointerExtension {\n    constructor(parser) {\n        this.parser = parser;\n        this.name = KHR_ANIMATION_POINTER;\n        this.animationPointerResolver = null;\n    }\n    setAnimationPointerResolver(animationPointerResolver) {\n        this.animationPointerResolver = animationPointerResolver;\n        return this;\n    }\n    _patchPropertyBindingFindNode() {\n        if (_havePatchedPropertyBindings)\n            return;\n        _havePatchedPropertyBindings = true;\n        // \"node\" is the Animator component in our case\n        // \"path\" is the animated property path, just with translated material names.\n        PropertyBinding.findNode = function (node, path) {\n            if (path.startsWith('.materials.')) {\n                const remainingPath = path.substring('.materials.'.length).substring(path.indexOf('.'));\n                const nextIndex = remainingPath.indexOf('.');\n                const uuid = nextIndex < 0 ? remainingPath : remainingPath.substring(0, nextIndex);\n                let res = null;\n                node.traverse((x) => {\n                    // NOTE: Changed x.type to x.isMesh for better competability\n                    if (res !== null || !x.isMesh)\n                        return;\n                    if (x.material && (x.material.uuid === uuid || x.material.name === uuid)) {\n                        res = x.material;\n                        if (res !== null) {\n                            if (remainingPath.endsWith('.map'))\n                                res = res.map;\n                            else if (remainingPath.endsWith('.emissiveMap'))\n                                res = res.emissiveMap;\n                            // TODO other texture slots only make sense if three.js actually supports them\n                            // (currently only .map can have repeat/offset)\n                        }\n                    }\n                });\n                return res;\n            }\n            if (path.startsWith('.nodes.') || path.startsWith('.lights.') || path.startsWith('.cameras.')) {\n                const sections = path.split('.');\n                let currentTarget;\n                for (let i = 1; i < sections.length; i++) {\n                    const val = sections[i];\n                    const isUUID = val.length == 36;\n                    if (isUUID) {\n                        // access by UUID\n                        currentTarget = node.getObjectByProperty('uuid', val);\n                    }\n                    else if (currentTarget && currentTarget[val]) {\n                        // access by index\n                        const index = Number.parseInt(val);\n                        let key = val;\n                        if (index >= 0)\n                            key = index;\n                        currentTarget = currentTarget[key];\n                    }\n                    else {\n                        // access by node name\n                        const foundNode = node.getObjectByName(val);\n                        if (foundNode)\n                            currentTarget = foundNode;\n                    }\n                }\n                if (!currentTarget) {\n                    const originalFindResult = find(node, sections[2]);\n                    if (!originalFindResult)\n                        console.warn(`${KHR_ANIMATION_POINTER}: Property binding not found`, path, node, node.name, sections);\n                    return originalFindResult;\n                }\n                return currentTarget;\n            }\n            return find(node, path);\n        };\n    }\n    /* DUPLICATE of functionality in GLTFLoader */\n    loadAnimationTargetFromChannel(animationChannel) {\n        const { target } = animationChannel;\n        const name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n        return this.parser.getDependency('node', name);\n    }\n    loadAnimationTargetFromChannelWithAnimationPointer(animationChannel) {\n        if (!this._havePatchedPropertyBindings)\n            this._patchPropertyBindingFindNode();\n        const { target } = animationChannel;\n        const useExtension = target.extensions && target.extensions[KHR_ANIMATION_POINTER] && target.path && target.path === 'pointer';\n        if (!useExtension)\n            return null;\n        let targetProperty;\n        // check if this is a extension animation\n        let type = ANIMATION_TARGET_TYPE.node;\n        let targetId;\n        if (useExtension) {\n            const ext = target.extensions[KHR_ANIMATION_POINTER];\n            let path = ext.pointer;\n            if (!path) {\n                console.warn('Invalid path', ext, target);\n                return;\n            }\n            if (path.startsWith('/materials/'))\n                type = ANIMATION_TARGET_TYPE.material;\n            else if (path.startsWith('/extensions/KHR_lights_punctual/lights/'))\n                type = ANIMATION_TARGET_TYPE.light;\n            else if (path.startsWith('/cameras/'))\n                type = ANIMATION_TARGET_TYPE.camera;\n            targetId = this._tryResolveTargetId(path, type);\n            if (targetId === null || isNaN(targetId)) {\n                console.warn(`Failed resolving animation node id: ${targetId}`, path);\n                return;\n            }\n            // TODO could be parsed better\n            switch (type) {\n                case ANIMATION_TARGET_TYPE.material:\n                    const pathIndex = `/materials/${targetId.toString()}/`.length;\n                    const pathStart = path.substring(0, pathIndex);\n                    targetProperty = path.substring(pathIndex);\n                    switch (targetProperty) {\n                        // Core Spec PBR Properties\n                        case 'pbrMetallicRoughness/baseColorFactor':\n                            targetProperty = 'color';\n                            break;\n                        case 'pbrMetallicRoughness/roughnessFactor':\n                            targetProperty = 'roughness';\n                            break;\n                        case 'pbrMetallicRoughness/metallicFactor':\n                            targetProperty = 'metalness';\n                            break;\n                        case 'emissiveFactor':\n                            targetProperty = 'emissive';\n                            break;\n                        case 'alphaCutoff':\n                            targetProperty = 'alphaTest';\n                            break;\n                        case 'occlusionTexture/strength':\n                            targetProperty = 'aoMapIntensity';\n                            break;\n                        case 'normalTexture/scale':\n                            targetProperty = 'normalScale';\n                            break;\n                        // Core Spec + KHR_texture_transform\n                        case 'pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/scale':\n                            targetProperty = 'map/repeat';\n                            break;\n                        case 'pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/offset':\n                            targetProperty = 'map/offset';\n                            break;\n                        // UV transforms for anything but map doesn't seem to currently be supported in three.js\n                        case 'emissiveTexture/extensions/KHR_texture_transform/scale':\n                            targetProperty = 'emissiveMap/repeat';\n                            break;\n                        case 'emissiveTexture/extensions/KHR_texture_transform/offset':\n                            targetProperty = 'emissiveMap/offset';\n                            break;\n                        // KHR_materials_emissive_strength\n                        case 'extensions/KHR_materials_emissive_strength/emissiveStrength':\n                            targetProperty = 'emissiveIntensity';\n                            break;\n                        // KHR_materials_transmission\n                        case 'extensions/KHR_materials_transmission/transmissionFactor':\n                            targetProperty = 'transmission';\n                            break;\n                        // KHR_materials_ior\n                        case 'extensions/KHR_materials_ior/ior':\n                            targetProperty = 'ior';\n                            break;\n                        // KHR_materials_volume\n                        case 'extensions/KHR_materials_volume/thicknessFactor':\n                            targetProperty = 'thickness';\n                            break;\n                        case 'extensions/KHR_materials_volume/attenuationColor':\n                            targetProperty = 'attenuationColor';\n                            break;\n                        case 'extensions/KHR_materials_volume/attenuationDistance':\n                            targetProperty = 'attenuationDistance';\n                            break;\n                        // KHR_materials_iridescence\n                        case 'extensions/KHR_materials_iridescence/iridescenceFactor':\n                            targetProperty = 'iridescence';\n                            break;\n                        case 'extensions/KHR_materials_iridescence/iridescenceIor':\n                            targetProperty = 'iridescenceIOR';\n                            break;\n                        case 'extensions/KHR_materials_iridescence/iridescenceThicknessMinimum':\n                            targetProperty = 'iridescenceThicknessRange[0]';\n                            break;\n                        case 'extensions/KHR_materials_iridescence/iridescenceThicknessMaximum':\n                            targetProperty = 'iridescenceThicknessRange[1]';\n                            break;\n                        // KHR_materials_clearcoat\n                        case 'extensions/KHR_materials_clearcoat/clearcoatFactor':\n                            targetProperty = 'clearcoat';\n                            break;\n                        case 'extensions/KHR_materials_clearcoat/clearcoatRoughnessFactor':\n                            targetProperty = 'clearcoatRoughness';\n                            break;\n                        // KHR_materials_sheen\n                        case 'extensions/KHR_materials_sheen/sheenColorFactor':\n                            targetProperty = 'sheenColor';\n                            break;\n                        case 'extensions/KHR_materials_sheen/sheenRoughnessFactor':\n                            targetProperty = 'sheenRoughness';\n                            break;\n                        // KHR_materials_specular\n                        case 'extensions/KHR_materials_specular/specularFactor':\n                            targetProperty = 'specularIntensity';\n                            break;\n                        case 'extensions/KHR_materials_specular/specularColorFactor':\n                            targetProperty = 'specularColor';\n                            break;\n                    }\n                    path = pathStart + targetProperty;\n                    break;\n                case ANIMATION_TARGET_TYPE.node:\n                    const pathIndexNode = `/nodes/${targetId.toString()}/`.length;\n                    const pathStartNode = path.substring(0, pathIndexNode);\n                    targetProperty = path.substring(pathIndexNode);\n                    switch (targetProperty) {\n                        case 'translation':\n                            targetProperty = 'position';\n                            break;\n                        case 'rotation':\n                            targetProperty = 'quaternion';\n                            break;\n                        case 'scale':\n                            targetProperty = 'scale';\n                            break;\n                        case 'weights':\n                            targetProperty = 'morphTargetInfluences';\n                            break;\n                    }\n                    path = pathStartNode + targetProperty;\n                    break;\n                case ANIMATION_TARGET_TYPE.light:\n                    const pathIndexLight = `/extensions/KHR_lights_punctual/lights/${targetId.toString()}/`.length;\n                    targetProperty = path.substring(pathIndexLight);\n                    switch (targetProperty) {\n                        case 'color':\n                            break;\n                        case 'intensity':\n                            break;\n                        case 'spot/innerConeAngle':\n                            // TODO would need to set .penumbra, but requires calculations on every animation change (?)\n                            targetProperty = 'penumbra';\n                            break;\n                        case 'spot/outerConeAngle':\n                            targetProperty = 'angle';\n                            break;\n                        case 'range':\n                            targetProperty = 'distance';\n                            break;\n                    }\n                    path = `/lights/${targetId.toString()}/${targetProperty}`;\n                    break;\n                case ANIMATION_TARGET_TYPE.camera:\n                    const pathIndexCamera = `/cameras/${targetId.toString()}/`.length;\n                    const pathStartCamera = path.substring(0, pathIndexCamera);\n                    targetProperty = path.substring(pathIndexCamera);\n                    switch (targetProperty) {\n                        case 'perspective/yfov':\n                            targetProperty = 'fov';\n                            break;\n                        case 'perspective/znear':\n                        case 'orthographic/znear':\n                            targetProperty = 'near';\n                            break;\n                        case 'perspective/zfar':\n                        case 'orthographic/zfar':\n                            targetProperty = 'far';\n                            break;\n                        case 'perspective/aspect':\n                            targetProperty = 'aspect';\n                            break;\n                        // these two write to the same target property since three.js orthographic camera only supports 'zoom'.\n                        // TODO should there be a warning for either of them? E.g. a warning for \"xmag\" so that \"yfov\" + \"ymag\" work by default?\n                        case 'orthographic/xmag':\n                            targetProperty = 'zoom';\n                            break;\n                        case 'orthographic/ymag':\n                            targetProperty = 'zoom';\n                            break;\n                    }\n                    path = pathStartCamera + targetProperty;\n                    break;\n            }\n            const pointerResolver = this.animationPointerResolver;\n            if (pointerResolver && pointerResolver.resolvePath) {\n                path = pointerResolver.resolvePath(path);\n            }\n            target.extensions[KHR_ANIMATION_POINTER].pointer = path;\n        }\n        if (targetId === null || isNaN(targetId)) {\n            console.warn(`Failed resolving animation node id: ${targetId}`, target);\n            return;\n        }\n        let depPromise;\n        if (type === ANIMATION_TARGET_TYPE.node)\n            depPromise = this.parser.getDependency('node', targetId);\n        else if (type === ANIMATION_TARGET_TYPE.material)\n            depPromise = this.parser.getDependency('material', targetId);\n        else if (type === ANIMATION_TARGET_TYPE.light)\n            depPromise = this.parser.getDependency('light', targetId);\n        else if (type === ANIMATION_TARGET_TYPE.camera)\n            depPromise = this.parser.getDependency('camera', targetId);\n        else\n            console.error('Unhandled type', type);\n        return depPromise;\n    }\n    createAnimationTracksWithAnimationPointer(node, inputAccessor, outputAccessor, sampler, target) {\n        const useExtension = target.extensions && target.extensions[KHR_ANIMATION_POINTER] && target.path && target.path === 'pointer';\n        if (!useExtension)\n            return null;\n        let animationPointerPropertyPath = target.extensions[KHR_ANIMATION_POINTER].pointer;\n        if (!animationPointerPropertyPath)\n            return null;\n        const tracks = [];\n        animationPointerPropertyPath = animationPointerPropertyPath.replaceAll('/', '.');\n        // replace node/material/camera/light ID by UUID\n        const parts = animationPointerPropertyPath.split('.');\n        parts[2] = node.name !== undefined && node.name !== null ? node.name : node.uuid;\n        animationPointerPropertyPath = parts.join('.');\n        let TypedKeyframeTrack;\n        switch (outputAccessor.itemSize) {\n            case 1:\n                TypedKeyframeTrack = NumberKeyframeTrack;\n                break;\n            case 2:\n            case 3:\n                TypedKeyframeTrack = VectorKeyframeTrack;\n                break;\n            case 4:\n                if (animationPointerPropertyPath.endsWith('.quaternion'))\n                    TypedKeyframeTrack = QuaternionKeyframeTrack;\n                else\n                    TypedKeyframeTrack = ColorKeyframeTrack;\n                break;\n        }\n        const interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\n        let outputArray = this.parser._getArrayFromAccessor(outputAccessor);\n        // convert fov values from radians to degrees\n        if (animationPointerPropertyPath.endsWith('.fov')) {\n            outputArray = outputArray.map((value) => (value / Math.PI) * 180);\n        }\n        const track = new TypedKeyframeTrack(animationPointerPropertyPath, inputAccessor.array, outputArray, interpolation);\n        // Override interpolation with custom factory method.\n        if (interpolation === 'CUBICSPLINE') {\n            this.parser._createCubicSplineTrackInterpolant(track);\n        }\n        tracks.push(track);\n        // glTF has opacity animation as last component of baseColorFactor,\n        // so we need to split that up here and create a separate opacity track if that is animated.\n        if (animationPointerPropertyPath &&\n            outputAccessor.itemSize === 4 &&\n            animationPointerPropertyPath.startsWith('.materials.') &&\n            animationPointerPropertyPath.endsWith('.color')) {\n            const opacityArray = new Float32Array(outputArray.length / 4);\n            for (let j = 0, jl = outputArray.length / 4; j < jl; j += 1) {\n                opacityArray[j] = outputArray[j * 4 + 3];\n            }\n            const opacityTrack = new TypedKeyframeTrack(animationPointerPropertyPath.replace('.color', '.opacity'), inputAccessor.array, opacityArray, interpolation);\n            // Override interpolation with custom factory method.\n            if (interpolation === 'CUBICSPLINE') {\n                this.parser._createCubicSplineTrackInterpolant(track);\n            }\n            tracks.push(opacityTrack);\n        }\n        return tracks;\n    }\n    _tryResolveTargetId(path, type) {\n        let name = '';\n        if (type === 'node') {\n            name = path.substring('/nodes/'.length);\n        }\n        else if (type === 'material') {\n            name = path.substring('/materials/'.length);\n        }\n        else if (type === 'light') {\n            name = path.substring('/extensions/KHR_lights_punctual/lights/'.length);\n        }\n        else if (type === 'camera') {\n            name = path.substring('/cameras/'.length);\n        }\n        name = name.substring(0, name.indexOf('/'));\n        const index = Number.parseInt(name);\n        return index;\n    }\n    /* MOSTLY DUPLICATE of GLTFLoader.loadAnimation, but also tries to resolve KHR_animation_pointer. */\n    /**\n     * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n     * @param {number} animationIndex\n     * @return {Promise<AnimationClip>}\n     */\n    loadAnimation(animationIndex) {\n        const me = this;\n        const { json } = this.parser;\n        const { parser } = this;\n        const animationDef = json.animations[animationIndex];\n        const animationName = animationDef.name ? animationDef.name : `animation_${animationIndex}`;\n        const pendingNodes = [];\n        const pendingInputAccessors = [];\n        const pendingOutputAccessors = [];\n        const pendingSamplers = [];\n        const pendingTargets = [];\n        for (let i = 0, il = animationDef.channels.length; i < il; i++) {\n            const channel = animationDef.channels[i];\n            const sampler = animationDef.samplers[channel.sampler];\n            const { target } = channel;\n            const input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n            const output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n            let nodeDependency = me.loadAnimationTargetFromChannelWithAnimationPointer(channel);\n            if (!nodeDependency)\n                nodeDependency = me.loadAnimationTargetFromChannel(channel);\n            pendingNodes.push(nodeDependency);\n            pendingInputAccessors.push(parser.getDependency('accessor', input));\n            pendingOutputAccessors.push(parser.getDependency('accessor', output));\n            pendingSamplers.push(sampler);\n            pendingTargets.push(target);\n        }\n        return Promise.all([\n            Promise.all(pendingNodes),\n            Promise.all(pendingInputAccessors),\n            Promise.all(pendingOutputAccessors),\n            Promise.all(pendingSamplers),\n            Promise.all(pendingTargets)\n        ]).then((dependencies) => {\n            const nodes = dependencies[0];\n            const inputAccessors = dependencies[1];\n            const outputAccessors = dependencies[2];\n            const samplers = dependencies[3];\n            const targets = dependencies[4];\n            const tracks = [];\n            for (let i = 0, il = nodes.length; i < il; i++) {\n                const node = nodes[i];\n                const inputAccessor = inputAccessors[i];\n                const outputAccessor = outputAccessors[i];\n                const sampler = samplers[i];\n                const target = targets[i];\n                if (node === undefined)\n                    continue;\n                if (node.updateMatrix) {\n                    node.updateMatrix();\n                    node.matrixAutoUpdate = true;\n                }\n                let createdTracks = me.createAnimationTracksWithAnimationPointer(node, inputAccessor, outputAccessor, sampler, target);\n                if (!createdTracks)\n                    createdTracks = parser._createAnimationTracks(node, inputAccessor, outputAccessor, sampler, target);\n                if (createdTracks) {\n                    for (let k = 0; k < createdTracks.length; k++) {\n                        tracks.push(createdTracks[k]);\n                    }\n                }\n            }\n            return new AnimationClip(animationName, undefined, tracks);\n        });\n    }\n}\n\nconst MIXAMO_PREFIX = 'mixamorig';\nconst POSITION_SUFFIX = '.position';\nconst MIXAMO_SCALE = 0.01;\nconst fbxLoader = new FBXLoader();\nconst gltfLoader = new GLTFLoader();\ngltfLoader.setMeshoptDecoder(MeshoptDecoder);\nfunction normaliseFbxAnimations(fbx) {\n    for (let a = 0; a < fbx.animations.length; a += 1) {\n        const { tracks } = fbx.animations[a];\n        for (let i = 0; i < tracks.length; i += 1) {\n            const hasMixamoPrefix = tracks[i].name.includes(MIXAMO_PREFIX);\n            if (hasMixamoPrefix) {\n                tracks[i].name = tracks[i].name.replace(MIXAMO_PREFIX, '');\n            }\n            if (tracks[i].name.includes(POSITION_SUFFIX)) {\n                for (let j = 0; j < tracks[i].values.length; j += 1) {\n                    // Scale the bound size down to match the size of the model\n                    // eslint-disable-next-line operator-assignment\n                    tracks[i].values[j] = tracks[i].values[j] * MIXAMO_SCALE;\n                }\n            }\n        }\n    }\n    return fbx.animations;\n}\nconst loadBlobFile = (blob) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        const buffer = yield blob.arrayBuffer();\n        return {\n            group: (yield gltfLoader.parseAsync(buffer, '')),\n            isFbx: false\n        };\n    }\n    catch (e) {\n        return {\n            group: (yield fbxLoader.loadAsync(URL.createObjectURL(blob))),\n            isFbx: true\n        };\n    }\n});\nconst loadPathFile = (source) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        return {\n            group: (yield gltfLoader.loadAsync(source)),\n            isFbx: false\n        };\n    }\n    catch (e) {\n        return {\n            group: (yield fbxLoader.loadAsync(source)),\n            isFbx: true\n        };\n    }\n});\nconst loadAnimationClips = (source) => __awaiter(void 0, void 0, void 0, function* () {\n    const animation = source instanceof Blob ? yield loadBlobFile(source) : yield loadPathFile(source);\n    return animation.isFbx ? normaliseFbxAnimations(animation.group) : animation.group.animations;\n});\nconst IDLE_ANIMATION_NAME = 'idle';\nconst playMorphTargetAnimation = (root, animationClip) => {\n    if (!root || !animationClip) {\n        return null;\n    }\n    const assetMixer = new AnimationMixer(root);\n    const animationAction = assetMixer.clipAction(animationClip);\n    animationAction.setLoop(LoopRepeat, Infinity);\n    animationAction.play();\n    return assetMixer;\n};\nconst playMapUvOffsetAnimation = (root, animationClip, encodedPropertyPath) => {\n    const targetNode = PropertyBinding.findNode(root, encodedPropertyPath);\n    if (!targetNode) {\n        return null;\n    }\n    const targetMeshes = [];\n    root.traverse((object) => {\n        const mesh = object;\n        if (mesh.isMesh && mesh.material === targetNode) {\n            targetMeshes.push(mesh);\n        }\n    });\n    if (!targetMeshes.length) {\n        return null;\n    }\n    const animatedMesh = targetMeshes[0];\n    const assetMixer = new AnimationMixer(animatedMesh);\n    const defaultIdleAction = assetMixer.clipAction(animationClip);\n    // @ts-expect-error property binding exists\n    // eslint-disable-next-line no-underscore-dangle\n    const propertyMixers = defaultIdleAction._propertyBindings;\n    if (!propertyMixers.length) {\n        return null;\n    }\n    const defaultPropertyMixer = propertyMixers[0];\n    defaultPropertyMixer.binding.node = defaultPropertyMixer.binding.rootNode;\n    defaultIdleAction.setLoop(LoopRepeat, Infinity);\n    defaultIdleAction.play();\n    return assetMixer;\n};\nconst playAssetIdleAnimation = (root, animations) => {\n    var _a;\n    if (!root || !animations.length) {\n        return null;\n    }\n    const idleAnimations = animations.filter((animation) => animation.name.toLowerCase().includes(IDLE_ANIMATION_NAME));\n    if (!idleAnimations.length) {\n        return null;\n    }\n    const assetMixers = [];\n    // eslint-disable-next-line no-restricted-syntax\n    for (const idleAnimation of idleAnimations) {\n        if (!idleAnimation.tracks.length) {\n            return null;\n        }\n        (_a = idleAnimation.tracks) === null || _a === void 0 ? void 0 : _a.forEach((defaultIdleAnimationTrack) => {\n            const encodedPropertyPath = defaultIdleAnimationTrack.name;\n            let assetMixer = null;\n            const MORPH_TARGET_PROPERTY_SUFFIX = 'morphTargetInfluences';\n            const isMorphTargetAnimation = encodedPropertyPath.endsWith(MORPH_TARGET_PROPERTY_SUFFIX);\n            if (isMorphTargetAnimation) {\n                assetMixer = playMorphTargetAnimation(root, idleAnimation);\n            }\n            const MAP_UV_OFFSET_PROPERTY_SUFFIX = 'map.offset';\n            const isMapUvOffsetAnimation = encodedPropertyPath.endsWith(MAP_UV_OFFSET_PROPERTY_SUFFIX);\n            if (isMapUvOffsetAnimation) {\n                assetMixer = playMapUvOffsetAnimation(root, idleAnimation, encodedPropertyPath);\n            }\n            if (assetMixer) {\n                assetMixers.push(assetMixer);\n            }\n        });\n    }\n    return assetMixers;\n};\nconst updateAssetAnimations = (mixers, delta) => {\n    if (!mixers) {\n        return false;\n    }\n    // eslint-disable-next-line no-restricted-syntax\n    for (const mixer of mixers) {\n        mixer.update(delta);\n    }\n    return true;\n};\nconst disposeAssetAnimations = (mixers, root) => {\n    if (!mixers || !root) {\n        return false;\n    }\n    // eslint-disable-next-line no-restricted-syntax\n    for (const mixer of mixers) {\n        mixer.stopAllAction();\n        mixer.uncacheRoot(root);\n    }\n    return true;\n};\nconst useAnimations = (animations) => suspend(() => __awaiter(void 0, void 0, void 0, function* () {\n    const clips = {};\n    yield Promise.all(Object.entries(animations).map(([name, { key }]) => __awaiter(void 0, void 0, void 0, function* () {\n        const newClips = yield loadAnimationClips(animations[name].source);\n        const newClip = key ? newClips.find((item) => (item === null || item === void 0 ? void 0 : item.name) === key) || newClips[0] : newClips[0];\n        if (newClip) {\n            clips[name] = newClip;\n        }\n        else {\n            console.warn(`Could not load animation ${name}`);\n        }\n    })));\n    return clips;\n}), [animations]);\n\nconst validateSource = (source) => {\n    if (Array.isArray(source)) {\n        return source.length > 0 && source.every(validateSource);\n    }\n    if (typeof source === 'string') {\n        const fileEndExpression = new RegExp(/(.glb|.fbx|.fbx[?].*|.glb[?].*)$/g);\n        const uploadFileExpression = new RegExp(/^data:application\\/octet-stream;base64,/g);\n        const gltfModelExpression = new RegExp(/^data:model\\/gltf-binary;base64,/g);\n        return fileEndExpression.test(source) || uploadFileExpression.test(source) || gltfModelExpression.test(source);\n    }\n    if (source instanceof Blob) {\n        return source.type === 'model/gltf-binary';\n    }\n    return false;\n};\nconst isValidFormat = (source) => {\n    const isValid = validateSource(source);\n    if (source && !isValid) {\n        console.warn('Provided GLB/FBX is invalid. Check docs for supported formats: https://github.com/readyplayerme/visage');\n    }\n    return isValid;\n};\nconst clamp = (value, max, min) => Math.min(Math.max(min, value), max);\nconst lerp = (start, end, time = 0.05) => start * (1 - time) + end * time;\nfunction traverseMaterials(object, callback) {\n    object.traverse((node) => {\n        const mesh = node;\n        if (!mesh.geometry)\n            return;\n        const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n        materials.forEach(callback);\n    });\n}\nconst disposeGltfScene = (scene) => {\n    scene.traverse((node) => {\n        if (node instanceof SkinnedMesh && node.skeleton) {\n            node.geometry.dispose();\n            node.skeleton.dispose();\n        }\n        if (node instanceof Mesh) {\n            node.geometry.dispose();\n        }\n    });\n    traverseMaterials(scene, (material) => {\n        Object.values(material).forEach((value) => {\n            if (value instanceof Texture) {\n                value.dispose();\n            }\n        });\n        material.dispose();\n    });\n    scene.clear();\n};\n/**\n * Avoid texture pixelation and add depth effect.\n */\nconst normaliseMaterialsConfig = (scene, bloomConfig, materialConfig) => {\n    traverseMaterials(scene, (material) => {\n        var _a, _b;\n        const mat = material;\n        if (mat.map) {\n            mat.map.minFilter = LinearFilter;\n            mat.depthWrite = true;\n        }\n        if (mat.name.toLowerCase().includes('hair')) {\n            mat.roughness = 0.9;\n        }\n        if (mat.emissiveMap) {\n            mat.emissiveIntensity = (_b = (_a = bloomConfig === null || bloomConfig === void 0 ? void 0 : bloomConfig.materialIntensity) !== null && _a !== void 0 ? _a : materialConfig === null || materialConfig === void 0 ? void 0 : materialConfig.emissiveIntensity) !== null && _b !== void 0 ? _b : 3.3;\n        }\n    });\n};\n/**\n * Avatar head movement relative to cursor.\n * When the model isn't a standard Ready Player Me avatar, the head movement won't take effect.\n */\nconst useHeadMovement = ({ nodes, isHalfBody = false, distance = 2, activeRotation = 0.2, rotationMargin = new Vector2(5, 10), enabled = false }) => {\n    const rad = Math.PI / 180;\n    const currentPos = new Vector2(0, 0);\n    const targetPos = new Vector2(0, 0);\n    const activeDistance = distance - (isHalfBody ? 1 : 0);\n    const eyeRotationOffsetX = isHalfBody ? 90 * rad : 0;\n    const neckBoneRotationOffsetX = (isHalfBody ? -5 : 10) * rad;\n    const mapRange = (value, inMin, inMax, outMin, outMax) => ((clamp(value, inMax, inMin) - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n    useFrame((state) => {\n        if (!enabled || !nodes.Neck || !nodes.Head || !nodes.RightEye || !nodes.LeftEye) {\n            return;\n        }\n        const cameraToHeadDistance = state.camera.position.distanceTo(nodes.Head.position);\n        const cameraRotation = Math.abs(state.camera.rotation.z);\n        if (cameraToHeadDistance < activeDistance && cameraRotation < activeRotation) {\n            targetPos.x = mapRange(state.mouse.y, -0.5, 1, rotationMargin.x * rad, -rotationMargin.x * rad);\n            targetPos.y = mapRange(state.mouse.x, -0.5, 0.5, -rotationMargin.y * rad, rotationMargin.y * rad);\n        }\n        else {\n            targetPos.set(0, 0);\n        }\n        currentPos.x = lerp(currentPos.x, targetPos.x);\n        currentPos.y = lerp(currentPos.y, targetPos.y);\n        /* eslint-disable no-param-reassign */\n        nodes.Neck.rotation.x = currentPos.x + neckBoneRotationOffsetX;\n        nodes.Neck.rotation.y = currentPos.y;\n        nodes.Head.rotation.x = currentPos.x;\n        nodes.Head.rotation.y = currentPos.y;\n        nodes.RightEye.rotation.x = currentPos.x - eyeRotationOffsetX;\n        nodes.LeftEye.rotation.x = currentPos.x - eyeRotationOffsetX;\n        if (isHalfBody) {\n            nodes.RightEye.rotation.z = currentPos.y * 2 + Math.PI;\n            nodes.LeftEye.rotation.z = currentPos.y * 2 + Math.PI;\n        }\n        else {\n            nodes.RightEye.rotation.y = currentPos.y * 2;\n            nodes.LeftEye.rotation.y = currentPos.y * 2;\n        }\n    });\n};\n/**\n * Transfers Bone positions from source to target.\n * @param targetNodes {object} - object that will be mutated\n * @param sourceNodes {object} - object that will be used as reference\n */\nconst mutatePose = (targetNodes, sourceNodes) => {\n    if (targetNodes && sourceNodes) {\n        Object.keys(targetNodes).forEach((key) => {\n            if (targetNodes[key].type === 'Bone' && sourceNodes[key]) {\n                /* eslint-disable no-param-reassign */\n                const pos = sourceNodes[key].position;\n                targetNodes[key].position.set(pos.x, pos.y, pos.z);\n                const rot = sourceNodes[key].rotation;\n                targetNodes[key].rotation.set(rot.x, rot.y, rot.z);\n            }\n        });\n    }\n};\nconst useEmotion = (nodes, emotion) => {\n    useEffect(() => {\n        let meshes = [];\n        if (nodes instanceof Group) {\n            nodes.traverse((object) => {\n                if (object instanceof SkinnedMesh && object.morphTargetInfluences) {\n                    meshes.push(object);\n                }\n            });\n        }\n        else {\n            // @ts-ignore\n            meshes = Object.values(nodes).filter((item) => item === null || item === void 0 ? void 0 : item.morphTargetInfluences);\n        }\n        const resetEmotions = () => {\n            meshes.forEach((mesh) => {\n                if (mesh.morphTargetInfluences) {\n                    mesh.morphTargetInfluences.fill(0);\n                }\n            });\n        };\n        if (emotion) {\n            resetEmotions();\n            meshes.forEach((mesh) => {\n                Object.entries(emotion).forEach(([shape, value]) => {\n                    var _a;\n                    const shapeId = (_a = mesh === null || mesh === void 0 ? void 0 : mesh.morphTargetDictionary) === null || _a === void 0 ? void 0 : _a[shape];\n                    if (shapeId) {\n                        mesh.morphTargetInfluences[shapeId] = value;\n                    }\n                });\n            });\n        }\n        else {\n            resetEmotions();\n        }\n    }, [emotion, nodes]);\n};\nconst loader = new GLTFLoader();\nloader.setMeshoptDecoder(MeshoptDecoder);\nloader.register((parser) => new GLTFAnimationPointerExtension(parser));\nconst dracoLoader = new DRACOLoader();\ndracoLoader.setDecoderPath('https://www.gstatic.com/draco/versioned/decoders/1.5.5/');\nloader.setDRACOLoader(dracoLoader);\nfunction loadGltf(source) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let gltf;\n        if (source instanceof Blob) {\n            const url = URL.createObjectURL(source);\n            try {\n                gltf = yield loader.loadAsync(url);\n            }\n            finally {\n                URL.revokeObjectURL(url);\n            }\n        }\n        else {\n            gltf = yield loader.loadAsync(source);\n        }\n        return gltf;\n    });\n}\nconst useGltfLoader = (source) => suspend(() => __awaiter(void 0, void 0, void 0, function* () { return loadGltf(source); }), [source], { lifespan: 100 });\nconst useGltfCachedLoader = (source) => {\n    const cachedGltf = useRef(null);\n    const prevSource = useRef(null);\n    const scene = suspend(() => __awaiter(void 0, void 0, void 0, function* () {\n        if (source === prevSource.current && cachedGltf.current) {\n            return cachedGltf.current;\n        }\n        const gltf = yield loadGltf(source);\n        cachedGltf.current = gltf;\n        prevSource.current = source;\n        return gltf;\n    }), [source], { lifespan: 100 });\n    useEffect(() => () => {\n        if (scene) {\n            disposeGltfScene(scene.scene);\n        }\n    }, [scene]);\n    return scene;\n};\nfunction usePersistantRotation(scene) {\n    const refToPreviousScene = useRef(scene);\n    useEffect(() => {\n        if (refToPreviousScene.current !== scene) {\n            // eslint-disable-next-line no-param-reassign\n            scene.rotation.y = refToPreviousScene.current.rotation.y;\n            refToPreviousScene.current = scene;\n        }\n    }, [scene]);\n}\nclass Transform {\n    constructor() {\n        this.scale = new Vector3(1, 1, 1);\n        this.rotation = new Euler(0, 0, 0);\n        this.position = new Vector3(0, 0, 0);\n    }\n}\n/**\n * Builds a fallback model for given scene.\n * Useful for displaying as the suspense fallback object.\n */\nfunction buildFallbackScene(scene, transform = new Transform()) {\n    return (React.createElement(\"primitive\", { object: scene, scale: transform.scale, rotation: transform.rotation, position: transform.position }));\n}\nconst useFallbackScene = (scene, setter) => {\n    const previousSceneRef = useRef();\n    useEffect(() => {\n        const newScene = scene.clone();\n        if (typeof setter === 'function') {\n            setter(buildFallbackScene(newScene));\n        }\n        if (previousSceneRef.current) {\n            disposeGltfScene(previousSceneRef.current);\n        }\n        previousSceneRef.current = newScene;\n        return () => {\n            if (previousSceneRef.current) {\n                disposeGltfScene(previousSceneRef.current);\n            }\n        };\n    }, [scene, setter]);\n};\n/**\n * Builds a fallback model for given nodes.\n * Useful for displaying as the suspense fallback object.\n */\nfunction buildFallback(nodes, transform = new Transform()) {\n    return (React.createElement(\"group\", null, Object.keys(nodes).map((key) => {\n        const node = nodes[key];\n        if (node.type === 'SkinnedMesh') {\n            return (React.createElement(\"skinnedMesh\", { castShadow: true, receiveShadow: true, key: node.name, scale: transform.scale, position: transform.position, rotation: transform.rotation, geometry: node.geometry, material: node.material, skeleton: node.skeleton, morphTargetInfluences: node.morphTargetInfluences || [] }));\n        }\n        if (node.type === 'Mesh') {\n            return (React.createElement(\"mesh\", { attach: (parent, self) => {\n                    parent.add(self);\n                    self.parent = node.parent;\n                    return () => parent.remove(self);\n                }, castShadow: true, receiveShadow: true, key: node.name, scale: node.scale, position: node.position, rotation: node.rotation, geometry: node.geometry, material: node.material, morphTargetInfluences: node.morphTargetInfluences || [] }));\n        }\n        return null;\n    })));\n}\nconst useFallback = (nodes, setter) => useEffect(() => {\n    if (typeof setter === 'function') {\n        setter(buildFallback(nodes));\n    }\n}, [setter, nodes]);\nconst triggerCallback = (callback) => {\n    if (typeof callback === 'function') {\n        callback();\n    }\n};\nconst expressions = {\n    blink: [\n        {\n            morphTarget: 'eyesClosed',\n            morphTargetIndex: -1,\n            offset: 0,\n            duration: 0.2\n        },\n        {\n            morphTarget: 'eyeSquintLeft',\n            morphTargetIndex: -1,\n            offset: 0,\n            duration: 0.2\n        },\n        {\n            morphTarget: 'eyeSquintRight',\n            morphTargetIndex: -1,\n            offset: 0,\n            duration: 0.2\n        }\n    ]\n};\n/**\n * Animates avatars facial expressions when morphTargets=ARKit,Eyes Extra is provided with the avatar.\n */\nconst useIdleExpression = (expression, nodes) => {\n    let headMesh;\n    if (nodes instanceof Group) {\n        headMesh = (nodes.getObjectByName('Wolf3D_Head') ||\n            nodes.getObjectByName('Wolf3D_Avatar') ||\n            nodes.getObjectByName('head'));\n    }\n    else {\n        headMesh = (nodes.Wolf3D_Head || nodes.Wolf3D_Avatar || nodes.head);\n    }\n    const selectedExpression = expression in expressions ? expressions[expression] : undefined;\n    const timeout = useRef();\n    const duration = useRef(Number.POSITIVE_INFINITY);\n    useEffect(() => {\n        if ((headMesh === null || headMesh === void 0 ? void 0 : headMesh.morphTargetDictionary) && selectedExpression) {\n            for (let i = 0; i < selectedExpression.length; i++) {\n                selectedExpression[i].morphTargetIndex = headMesh.morphTargetDictionary[selectedExpression[i].morphTarget];\n            }\n        }\n    }, [selectedExpression, headMesh === null || headMesh === void 0 ? void 0 : headMesh.morphTargetDictionary]);\n    const animateExpression = useCallback((delta) => {\n        if ((headMesh === null || headMesh === void 0 ? void 0 : headMesh.morphTargetInfluences) && selectedExpression) {\n            duration.current += delta;\n            for (let i = 0; i < selectedExpression.length; i++) {\n                const section = selectedExpression[i];\n                if (duration.current < section.duration + section.offset) {\n                    if (duration.current > section.offset) {\n                        const pivot = ((duration.current - section.offset) / section.duration) * Math.PI;\n                        const morphInfluence = Math.sin(pivot);\n                        headMesh.morphTargetInfluences[section.morphTargetIndex] = morphInfluence;\n                    }\n                }\n                else {\n                    headMesh.morphTargetInfluences[section.morphTargetIndex] = 0;\n                }\n            }\n        }\n    }, [headMesh === null || headMesh === void 0 ? void 0 : headMesh.morphTargetInfluences, selectedExpression, duration.current, timeout.current]);\n    const setNextInterval = () => {\n        duration.current = 0;\n        const delay = Math.random() * 3000 + 3000;\n        clearTimeout(timeout.current);\n        timeout.current = setTimeout(setNextInterval, delay);\n    };\n    useEffect(() => {\n        if (selectedExpression) {\n            timeout.current = setTimeout(setNextInterval, 3000);\n        }\n        return () => {\n            clearTimeout(timeout.current);\n        };\n    }, [selectedExpression]);\n    useFrame((_, delta) => {\n        if (headMesh && selectedExpression) {\n            animateExpression(delta);\n        }\n    });\n};\n\nconst hasWindow = typeof window !== 'undefined';\n\nlet keyCount = 0;\nfunction atom(read, write) {\n  const key = `atom${++keyCount}`;\n  const config = {\n    toString: () => key\n  };\n  if (typeof read === \"function\") {\n    config.read = read;\n  } else {\n    config.init = read;\n    config.read = (get) => get(config);\n    config.write = (get, set, arg) => set(\n      config,\n      typeof arg === \"function\" ? arg(get(config)) : arg\n    );\n  }\n  if (write) {\n    config.write = write;\n  }\n  return config;\n}\n\nconst hasInitialValue = (atom) => \"init\" in atom;\nconst isActuallyWritableAtom = (atom) => !!atom.write;\nconst cancelPromiseMap = /* @__PURE__ */ new WeakMap();\nconst registerCancelPromise = (promise, cancel) => {\n  cancelPromiseMap.set(promise, cancel);\n  promise.catch(() => {\n  }).finally(() => cancelPromiseMap.delete(promise));\n};\nconst cancelPromise = (promise, next) => {\n  const cancel = cancelPromiseMap.get(promise);\n  if (cancel) {\n    cancelPromiseMap.delete(promise);\n    cancel(next);\n  }\n};\nconst resolvePromise = (promise, value) => {\n  promise.status = \"fulfilled\";\n  promise.value = value;\n};\nconst rejectPromise = (promise, e) => {\n  promise.status = \"rejected\";\n  promise.reason = e;\n};\nconst isPromiseLike$1 = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nconst isEqualAtomValue = (a, b) => \"v\" in a && \"v\" in b && Object.is(a.v, b.v);\nconst isEqualAtomError = (a, b) => \"e\" in a && \"e\" in b && Object.is(a.e, b.e);\nconst hasPromiseAtomValue = (a) => \"v\" in a && a.v instanceof Promise;\nconst isEqualPromiseAtomValue = (a, b) => \"v\" in a && \"v\" in b && a.v.orig && a.v.orig === b.v.orig;\nconst returnAtomValue = (atomState) => {\n  if (\"e\" in atomState) {\n    throw atomState.e;\n  }\n  return atomState.v;\n};\nconst createStore = () => {\n  const atomStateMap = /* @__PURE__ */ new WeakMap();\n  const mountedMap = /* @__PURE__ */ new WeakMap();\n  const pendingMap = /* @__PURE__ */ new Map();\n  let storeListenersRev1;\n  let storeListenersRev2;\n  let mountedAtoms;\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    storeListenersRev1 = /* @__PURE__ */ new Set();\n    storeListenersRev2 = /* @__PURE__ */ new Set();\n    mountedAtoms = /* @__PURE__ */ new Set();\n  }\n  const getAtomState = (atom) => atomStateMap.get(atom);\n  const setAtomState = (atom, atomState) => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      Object.freeze(atomState);\n    }\n    const prevAtomState = atomStateMap.get(atom);\n    atomStateMap.set(atom, atomState);\n    if (!pendingMap.has(atom)) {\n      pendingMap.set(atom, prevAtomState);\n    }\n    if (prevAtomState && hasPromiseAtomValue(prevAtomState)) {\n      const next = \"v\" in atomState ? atomState.v instanceof Promise ? atomState.v : Promise.resolve(atomState.v) : Promise.reject(atomState.e);\n      cancelPromise(prevAtomState.v, next);\n    }\n  };\n  const updateDependencies = (atom, nextAtomState, nextDependencies) => {\n    const dependencies = /* @__PURE__ */ new Map();\n    let changed = false;\n    nextDependencies.forEach((aState, a) => {\n      if (!aState && a === atom) {\n        aState = nextAtomState;\n      }\n      if (aState) {\n        dependencies.set(a, aState);\n        if (nextAtomState.d.get(a) !== aState) {\n          changed = true;\n        }\n      } else if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n        console.warn(\"[Bug] atom state not found\");\n      }\n    });\n    if (changed || nextAtomState.d.size !== dependencies.size) {\n      nextAtomState.d = dependencies;\n    }\n  };\n  const setAtomValue = (atom, value, nextDependencies) => {\n    const prevAtomState = getAtomState(atom);\n    const nextAtomState = {\n      d: (prevAtomState == null ? void 0 : prevAtomState.d) || /* @__PURE__ */ new Map(),\n      v: value\n    };\n    if (nextDependencies) {\n      updateDependencies(atom, nextAtomState, nextDependencies);\n    }\n    if (prevAtomState && isEqualAtomValue(prevAtomState, nextAtomState) && prevAtomState.d === nextAtomState.d) {\n      return prevAtomState;\n    }\n    if (prevAtomState && hasPromiseAtomValue(prevAtomState) && hasPromiseAtomValue(nextAtomState) && isEqualPromiseAtomValue(prevAtomState, nextAtomState)) {\n      if (prevAtomState.d === nextAtomState.d) {\n        return prevAtomState;\n      } else {\n        nextAtomState.v = prevAtomState.v;\n      }\n    }\n    setAtomState(atom, nextAtomState);\n    return nextAtomState;\n  };\n  const setAtomValueOrPromise = (atom, valueOrPromise, nextDependencies, abortPromise) => {\n    if (isPromiseLike$1(valueOrPromise)) {\n      let continuePromise;\n      const promise = new Promise((resolve, reject) => {\n        let settled = false;\n        valueOrPromise.then(\n          (v) => {\n            if (!settled) {\n              settled = true;\n              const prevAtomState = getAtomState(atom);\n              const nextAtomState = setAtomValue(\n                atom,\n                promise,\n                nextDependencies\n              );\n              resolvePromise(promise, v);\n              resolve(v);\n              if ((prevAtomState == null ? void 0 : prevAtomState.d) !== nextAtomState.d) {\n                mountDependencies(atom, nextAtomState, prevAtomState == null ? void 0 : prevAtomState.d);\n              }\n            }\n          },\n          (e) => {\n            if (!settled) {\n              settled = true;\n              const prevAtomState = getAtomState(atom);\n              const nextAtomState = setAtomValue(\n                atom,\n                promise,\n                nextDependencies\n              );\n              rejectPromise(promise, e);\n              reject(e);\n              if ((prevAtomState == null ? void 0 : prevAtomState.d) !== nextAtomState.d) {\n                mountDependencies(atom, nextAtomState, prevAtomState == null ? void 0 : prevAtomState.d);\n              }\n            }\n          }\n        );\n        continuePromise = (next) => {\n          if (!settled) {\n            settled = true;\n            next.then(\n              (v) => resolvePromise(promise, v),\n              (e) => rejectPromise(promise, e)\n            );\n            resolve(next);\n          }\n        };\n      });\n      promise.orig = valueOrPromise;\n      promise.status = \"pending\";\n      registerCancelPromise(promise, (next) => {\n        if (next) {\n          continuePromise(next);\n        }\n        abortPromise == null ? void 0 : abortPromise();\n      });\n      return setAtomValue(atom, promise, nextDependencies);\n    }\n    return setAtomValue(atom, valueOrPromise, nextDependencies);\n  };\n  const setAtomError = (atom, error, nextDependencies) => {\n    const prevAtomState = getAtomState(atom);\n    const nextAtomState = {\n      d: (prevAtomState == null ? void 0 : prevAtomState.d) || /* @__PURE__ */ new Map(),\n      e: error\n    };\n    if (nextDependencies) {\n      updateDependencies(atom, nextAtomState, nextDependencies);\n    }\n    if (prevAtomState && isEqualAtomError(prevAtomState, nextAtomState) && prevAtomState.d === nextAtomState.d) {\n      return prevAtomState;\n    }\n    setAtomState(atom, nextAtomState);\n    return nextAtomState;\n  };\n  const readAtomState = (atom) => {\n    const atomState = getAtomState(atom);\n    if (atomState) {\n      atomState.d.forEach((_, a) => {\n        if (a !== atom && !mountedMap.has(a)) {\n          readAtomState(a);\n        }\n      });\n      if (Array.from(atomState.d).every(([a, s]) => {\n        const aState = getAtomState(a);\n        return a === atom || aState === s || // TODO This is a hack, we should find a better solution.\n        aState && !hasPromiseAtomValue(aState) && isEqualAtomValue(aState, s);\n      })) {\n        return atomState;\n      }\n    }\n    const nextDependencies = /* @__PURE__ */ new Map();\n    let isSync = true;\n    const getter = (a) => {\n      if (a === atom) {\n        const aState2 = getAtomState(a);\n        if (aState2) {\n          nextDependencies.set(a, aState2);\n          return returnAtomValue(aState2);\n        }\n        if (hasInitialValue(a)) {\n          nextDependencies.set(a, void 0);\n          return a.init;\n        }\n        throw new Error(\"no atom init\");\n      }\n      const aState = readAtomState(a);\n      nextDependencies.set(a, aState);\n      return returnAtomValue(aState);\n    };\n    let controller;\n    let setSelf;\n    const options = {\n      get signal() {\n        if (!controller) {\n          controller = new AbortController();\n        }\n        return controller.signal;\n      },\n      get setSelf() {\n        if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !isActuallyWritableAtom(atom)) {\n          console.warn(\"setSelf function cannot be used with read-only atom\");\n        }\n        if (!setSelf && isActuallyWritableAtom(atom)) {\n          setSelf = (...args) => {\n            if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && isSync) {\n              console.warn(\"setSelf function cannot be called in sync\");\n            }\n            if (!isSync) {\n              return writeAtom(atom, ...args);\n            }\n          };\n        }\n        return setSelf;\n      }\n    };\n    try {\n      const valueOrPromise = atom.read(getter, options);\n      return setAtomValueOrPromise(\n        atom,\n        valueOrPromise,\n        nextDependencies,\n        () => controller == null ? void 0 : controller.abort()\n      );\n    } catch (error) {\n      return setAtomError(atom, error, nextDependencies);\n    } finally {\n      isSync = false;\n    }\n  };\n  const readAtom = (atom) => returnAtomValue(readAtomState(atom));\n  const addAtom = (atom) => {\n    let mounted = mountedMap.get(atom);\n    if (!mounted) {\n      mounted = mountAtom(atom);\n    }\n    return mounted;\n  };\n  const canUnmountAtom = (atom, mounted) => !mounted.l.size && (!mounted.t.size || mounted.t.size === 1 && mounted.t.has(atom));\n  const delAtom = (atom) => {\n    const mounted = mountedMap.get(atom);\n    if (mounted && canUnmountAtom(atom, mounted)) {\n      unmountAtom(atom);\n    }\n  };\n  const recomputeDependents = (atom) => {\n    const dependencyMap = /* @__PURE__ */ new Map();\n    const dirtyMap = /* @__PURE__ */ new WeakMap();\n    const loop1 = (a) => {\n      const mounted = mountedMap.get(a);\n      mounted == null ? void 0 : mounted.t.forEach((dependent) => {\n        if (dependent !== a) {\n          dependencyMap.set(\n            dependent,\n            (dependencyMap.get(dependent) || /* @__PURE__ */ new Set()).add(a)\n          );\n          dirtyMap.set(dependent, (dirtyMap.get(dependent) || 0) + 1);\n          loop1(dependent);\n        }\n      });\n    };\n    loop1(atom);\n    const loop2 = (a) => {\n      const mounted = mountedMap.get(a);\n      mounted == null ? void 0 : mounted.t.forEach((dependent) => {\n        var _a;\n        if (dependent !== a) {\n          let dirtyCount = dirtyMap.get(dependent);\n          if (dirtyCount) {\n            dirtyMap.set(dependent, --dirtyCount);\n          }\n          if (!dirtyCount) {\n            let isChanged = !!((_a = dependencyMap.get(dependent)) == null ? void 0 : _a.size);\n            if (isChanged) {\n              const prevAtomState = getAtomState(dependent);\n              const nextAtomState = readAtomState(dependent);\n              isChanged = !prevAtomState || !isEqualAtomValue(prevAtomState, nextAtomState);\n            }\n            if (!isChanged) {\n              dependencyMap.forEach((s) => s.delete(dependent));\n            }\n          }\n          loop2(dependent);\n        }\n      });\n    };\n    loop2(atom);\n  };\n  const writeAtomState = (atom, ...args) => {\n    let isSync = true;\n    const getter = (a) => returnAtomValue(readAtomState(a));\n    const setter = (a, ...args2) => {\n      let r;\n      if (a === atom) {\n        if (!hasInitialValue(a)) {\n          throw new Error(\"atom not writable\");\n        }\n        const prevAtomState = getAtomState(a);\n        const nextAtomState = setAtomValueOrPromise(a, args2[0]);\n        if (!prevAtomState || !isEqualAtomValue(prevAtomState, nextAtomState)) {\n          recomputeDependents(a);\n        }\n      } else {\n        r = writeAtomState(a, ...args2);\n      }\n      if (!isSync) {\n        const flushed = flushPending();\n        if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n          storeListenersRev2.forEach(\n            (l) => l({ type: \"async-write\", flushed })\n          );\n        }\n      }\n      return r;\n    };\n    const result = atom.write(getter, setter, ...args);\n    isSync = false;\n    return result;\n  };\n  const writeAtom = (atom, ...args) => {\n    const result = writeAtomState(atom, ...args);\n    const flushed = flushPending();\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      storeListenersRev2.forEach(\n        (l) => l({ type: \"write\", flushed })\n      );\n    }\n    return result;\n  };\n  const mountAtom = (atom, initialDependent) => {\n    const mounted = {\n      t: new Set(initialDependent && [initialDependent]),\n      l: /* @__PURE__ */ new Set()\n    };\n    mountedMap.set(atom, mounted);\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      mountedAtoms.add(atom);\n    }\n    readAtomState(atom).d.forEach((_, a) => {\n      const aMounted = mountedMap.get(a);\n      if (aMounted) {\n        aMounted.t.add(atom);\n      } else {\n        if (a !== atom) {\n          mountAtom(a, atom);\n        }\n      }\n    });\n    readAtomState(atom);\n    if (isActuallyWritableAtom(atom) && atom.onMount) {\n      const onUnmount = atom.onMount((...args) => writeAtom(atom, ...args));\n      if (onUnmount) {\n        mounted.u = onUnmount;\n      }\n    }\n    return mounted;\n  };\n  const unmountAtom = (atom) => {\n    var _a;\n    const onUnmount = (_a = mountedMap.get(atom)) == null ? void 0 : _a.u;\n    if (onUnmount) {\n      onUnmount();\n    }\n    mountedMap.delete(atom);\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      mountedAtoms.delete(atom);\n    }\n    const atomState = getAtomState(atom);\n    if (atomState) {\n      if (hasPromiseAtomValue(atomState)) {\n        cancelPromise(atomState.v);\n      }\n      atomState.d.forEach((_, a) => {\n        if (a !== atom) {\n          const mounted = mountedMap.get(a);\n          if (mounted) {\n            mounted.t.delete(atom);\n            if (canUnmountAtom(a, mounted)) {\n              unmountAtom(a);\n            }\n          }\n        }\n      });\n    } else if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\"[Bug] could not find atom state to unmount\", atom);\n    }\n  };\n  const mountDependencies = (atom, atomState, prevDependencies) => {\n    const depSet = new Set(atomState.d.keys());\n    prevDependencies == null ? void 0 : prevDependencies.forEach((_, a) => {\n      if (depSet.has(a)) {\n        depSet.delete(a);\n        return;\n      }\n      const mounted = mountedMap.get(a);\n      if (mounted) {\n        mounted.t.delete(atom);\n        if (canUnmountAtom(a, mounted)) {\n          unmountAtom(a);\n        }\n      }\n    });\n    depSet.forEach((a) => {\n      const mounted = mountedMap.get(a);\n      if (mounted) {\n        mounted.t.add(atom);\n      } else if (mountedMap.has(atom)) {\n        mountAtom(a, atom);\n      }\n    });\n  };\n  const flushPending = () => {\n    let flushed;\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      flushed = /* @__PURE__ */ new Set();\n    }\n    while (pendingMap.size) {\n      const pending = Array.from(pendingMap);\n      pendingMap.clear();\n      pending.forEach(([atom, prevAtomState]) => {\n        const atomState = getAtomState(atom);\n        if (atomState) {\n          if (atomState.d !== (prevAtomState == null ? void 0 : prevAtomState.d)) {\n            mountDependencies(atom, atomState, prevAtomState == null ? void 0 : prevAtomState.d);\n          }\n          const mounted = mountedMap.get(atom);\n          if (mounted && !// TODO This seems pretty hacky. Hope to fix it.\n          // Maybe we could `mountDependencies` in `setAtomState`?\n          (prevAtomState && !hasPromiseAtomValue(prevAtomState) && (isEqualAtomValue(prevAtomState, atomState) || isEqualAtomError(prevAtomState, atomState)))) {\n            mounted.l.forEach((listener) => listener());\n            if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n              flushed.add(atom);\n            }\n          }\n        } else if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n          console.warn(\"[Bug] no atom state to flush\");\n        }\n      });\n    }\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      storeListenersRev1.forEach((l) => l(\"state\"));\n      return flushed;\n    }\n  };\n  const subscribeAtom = (atom, listener) => {\n    const mounted = addAtom(atom);\n    const flushed = flushPending();\n    const listeners = mounted.l;\n    listeners.add(listener);\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      storeListenersRev1.forEach((l) => l(\"sub\"));\n      storeListenersRev2.forEach(\n        (l) => l({ type: \"sub\", flushed })\n      );\n    }\n    return () => {\n      listeners.delete(listener);\n      delAtom(atom);\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n        storeListenersRev1.forEach((l) => l(\"unsub\"));\n        storeListenersRev2.forEach((l) => l({ type: \"unsub\" }));\n      }\n    };\n  };\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    return {\n      get: readAtom,\n      set: writeAtom,\n      sub: subscribeAtom,\n      // store dev methods (these are tentative and subject to change without notice)\n      dev_subscribe_store: (l, rev) => {\n        if (rev !== 2) {\n          console.warn(\n            \"The current StoreListener revision is 2. The older ones are deprecated.\"\n          );\n          storeListenersRev1.add(l);\n          return () => {\n            storeListenersRev1.delete(l);\n          };\n        }\n        storeListenersRev2.add(l);\n        return () => {\n          storeListenersRev2.delete(l);\n        };\n      },\n      dev_get_mounted_atoms: () => mountedAtoms.values(),\n      dev_get_atom_state: (a) => atomStateMap.get(a),\n      dev_get_mounted: (a) => mountedMap.get(a),\n      dev_restore_atoms: (values) => {\n        for (const [atom, valueOrPromise] of values) {\n          if (hasInitialValue(atom)) {\n            setAtomValueOrPromise(atom, valueOrPromise);\n            recomputeDependents(atom);\n          }\n        }\n        const flushed = flushPending();\n        storeListenersRev2.forEach(\n          (l) => l({ type: \"restore\", flushed })\n        );\n      }\n    };\n  }\n  return {\n    get: readAtom,\n    set: writeAtom,\n    sub: subscribeAtom\n  };\n};\nlet defaultStore;\nconst getDefaultStore = () => {\n  if (!defaultStore) {\n    defaultStore = createStore();\n  }\n  return defaultStore;\n};\nif ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n  if (globalThis.__JOTAI_PACKAGE_IS_LOADED__) {\n    console.warn(\n      \"Detected multiple Jotai instances. It may cause unexpected behavior. https://github.com/pmndrs/jotai/discussions/2044\"\n    );\n  } else {\n    globalThis.__JOTAI_PACKAGE_IS_LOADED__ = true;\n  }\n}\n\nconst StoreContext = createContext(void 0);\nconst useStore = (options) => {\n  const store = useContext(StoreContext);\n  return (options == null ? void 0 : options.store) || store || getDefaultStore();\n};\nconst Provider = ({\n  children,\n  store\n}) => {\n  const storeRef = useRef();\n  if (!store && !storeRef.current) {\n    storeRef.current = createStore();\n  }\n  return createElement(\n    StoreContext.Provider,\n    {\n      value: store || storeRef.current\n    },\n    children\n  );\n};\n\nconst isPromiseLike = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nconst use = React.use || ((promise) => {\n  if (promise.status === \"pending\") {\n    throw promise;\n  } else if (promise.status === \"fulfilled\") {\n    return promise.value;\n  } else if (promise.status === \"rejected\") {\n    throw promise.reason;\n  } else {\n    promise.status = \"pending\";\n    promise.then(\n      (v) => {\n        promise.status = \"fulfilled\";\n        promise.value = v;\n      },\n      (e) => {\n        promise.status = \"rejected\";\n        promise.reason = e;\n      }\n    );\n    throw promise;\n  }\n});\nfunction useAtomValue(atom, options) {\n  const store = useStore(options);\n  const [[valueFromReducer, storeFromReducer, atomFromReducer], rerender] = useReducer(\n    (prev) => {\n      const nextValue = store.get(atom);\n      if (Object.is(prev[0], nextValue) && prev[1] === store && prev[2] === atom) {\n        return prev;\n      }\n      return [nextValue, store, atom];\n    },\n    void 0,\n    () => [store.get(atom), store, atom]\n  );\n  let value = valueFromReducer;\n  if (storeFromReducer !== store || atomFromReducer !== atom) {\n    rerender();\n    value = store.get(atom);\n  }\n  const delay = options == null ? void 0 : options.delay;\n  useEffect(() => {\n    const unsub = store.sub(atom, () => {\n      if (typeof delay === \"number\") {\n        setTimeout(rerender, delay);\n        return;\n      }\n      rerender();\n    });\n    rerender();\n    return unsub;\n  }, [store, atom, delay]);\n  useDebugValue(value);\n  return isPromiseLike(value) ? use(value) : value;\n}\n\nfunction useSetAtom(atom, options) {\n  const store = useStore(options);\n  const setAtom = useCallback(\n    (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !(\"write\" in atom)) {\n        throw new Error(\"not writable atom\");\n      }\n      return store.set(atom, ...args);\n    },\n    [store, atom]\n  );\n  return setAtom;\n}\n\nconst SpawnEffect = ({ onLoadedEffect, onLoadedEffectFinish }) => {\n    const ref = useRef(null);\n    const [effectRunning, setEffectRunning] = React.useState(true);\n    const { scene: mountEffectScene } = useGltfLoader(onLoadedEffect.src);\n    const { nodes: mountEffectNode } = useGraph(mountEffectScene);\n    useEffect(() => {\n        if (!effectRunning) {\n            triggerCallback(onLoadedEffectFinish);\n        }\n    }, [onLoadedEffectFinish, effectRunning]);\n    const animationLoadedEffect = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const effect = yield loadAnimationClips((onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.animationSrc) || onLoadedEffect.src);\n        return effect[0];\n    }), [onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.animationSrc, onLoadedEffect.src]);\n    const spawnEffectMixer = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const mixer = new AnimationMixer(mountEffectNode.Scene);\n        const loadedEffect = yield animationLoadedEffect;\n        if (!loadedEffect) {\n            setEffectRunning(false);\n            return mixer;\n        }\n        const animation = mixer.clipAction(loadedEffect);\n        animation.setLoop(LoopRepeat, (onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.loop) || 1);\n        animation.clampWhenFinished = true;\n        animation.play();\n        mixer.addEventListener('finished', () => {\n            animation.fadeOut(0.5);\n            setEffectRunning(false);\n        });\n        return mixer;\n    }), [mountEffectNode.Scene, animationLoadedEffect, onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.loop]);\n    useFrame((state, delta) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        (_a = (yield spawnEffectMixer)) === null || _a === void 0 ? void 0 : _a.update(delta);\n    }));\n    return React.createElement(React.Fragment, null, effectRunning && React.createElement(\"primitive\", { modelRef: ref, object: mountEffectScene }));\n};\n\nconst SpawnAnimation = ({ avatar, onLoadedAnimationFinish, onLoadedAnimation }) => {\n    const [animationRunning, setAnimationRunning] = React.useState(true);\n    useEffect(() => {\n        if (!animationRunning) {\n            triggerCallback(onLoadedAnimationFinish);\n        }\n    }, [onLoadedAnimationFinish, animationRunning]);\n    const { nodes: avatarNode } = useGraph(avatar);\n    const animationClip = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const clips = yield loadAnimationClips((onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.src) || '');\n        return clips[0];\n    }), [onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.src]);\n    const animationMixerAvatar = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const mixer = new AnimationMixer(avatarNode.Armature);\n        if (!avatarNode.Armature) {\n            return mixer;\n        }\n        const animation = mixer.clipAction(yield animationClip);\n        animation.setLoop(LoopRepeat, (onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.loop) || 1);\n        animation.clampWhenFinished = true;\n        animation.play();\n        mixer.addEventListener('finished', () => {\n            animation.fadeOut(0.5);\n            setAnimationRunning(false);\n        });\n        return mixer;\n    }), [avatarNode.Armature, onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.loop, animationClip]);\n    useFrame((state, delta) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        (_a = (yield animationMixerAvatar)) === null || _a === void 0 ? void 0 : _a.update(delta);\n    }));\n    return React.createElement(React.Fragment, null);\n};\n\nconst initialSpawnState = {\n    onLoadedEffect: null,\n    onLoadedAnimation: null\n};\nconst spawnState = atom(initialSpawnState);\n\nconst Spawn = ({ avatar, onSpawnFinish }) => {\n    var _a, _b;\n    const animationProps = useAtomValue(spawnState);\n    const usesMountEffect = isValidFormat((_a = animationProps === null || animationProps === void 0 ? void 0 : animationProps.onLoadedEffect) === null || _a === void 0 ? void 0 : _a.src);\n    const usesMountAnimation = isValidFormat((_b = animationProps === null || animationProps === void 0 ? void 0 : animationProps.onLoadedAnimation) === null || _b === void 0 ? void 0 : _b.src);\n    const [effectRunning, setEffectRunning] = React.useState(usesMountEffect);\n    const [animationRunning, setAnimationRunning] = React.useState(usesMountAnimation);\n    useEffect(() => {\n        if (!animationRunning && !effectRunning) {\n            triggerCallback(onSpawnFinish);\n        }\n    }, [onSpawnFinish, effectRunning, animationRunning]);\n    const onLoadedAnimationFinish = () => {\n        setAnimationRunning(false);\n    };\n    const onLoadedEffectFinish = () => {\n        setEffectRunning(false);\n    };\n    return (React.createElement(React.Fragment, null,\n        usesMountEffect && (React.createElement(SpawnEffect, { onLoadedEffect: animationProps.onLoadedEffect, onLoadedEffectFinish: onLoadedEffectFinish })),\n        usesMountAnimation && (React.createElement(SpawnAnimation, { onLoadedAnimation: animationProps.onLoadedAnimation, avatar: avatar, onLoadedAnimationFinish: onLoadedAnimationFinish }))));\n};\n\nconst ROTATION_STEP = 0.005;\nconst Model = ({ scene, scale = 1, modelRef, onLoaded, onSpawnAnimationFinish, bloom, materialConfig }) => {\n    const { gl } = useThree();\n    const [isTouching, setIsTouching] = useState(false);\n    const [touchEvent, setTouchEvent] = useState(null);\n    const setTouchingOn = (e) => {\n        if (hasWindow && window.TouchEvent && e instanceof TouchEvent) {\n            setTouchEvent(e);\n        }\n        setIsTouching(true);\n    };\n    const setTouchingOff = (e) => {\n        if (hasWindow && window.TouchEvent && e instanceof TouchEvent) {\n            setTouchEvent(null);\n        }\n        setIsTouching(false);\n    };\n    usePersistantRotation(scene);\n    const onTouchMove = useCallback((event) => {\n        if (isTouching && event instanceof MouseEvent) {\n            /* eslint-disable-next-line no-param-reassign */\n            scene.rotation.y += event.movementX * ROTATION_STEP;\n        }\n        if (hasWindow && isTouching && window.TouchEvent && event instanceof TouchEvent) {\n            /* eslint-disable-next-line no-param-reassign */\n            const movementX = Math.round(event.touches[0].pageX - touchEvent.touches[0].pageX);\n            /* eslint-disable-next-line no-param-reassign */\n            scene.rotation.y += movementX * ROTATION_STEP;\n            setTouchEvent(event);\n        }\n    }, [isTouching, touchEvent, scene]);\n    normaliseMaterialsConfig(scene, bloom, materialConfig);\n    scene.traverse((object) => {\n        const node = object;\n        if (node.isMesh) {\n            node.castShadow = true;\n            node.receiveShadow = true;\n        }\n    });\n    useEffect(() => triggerCallback(onLoaded), [scene, onLoaded]);\n    useEffect(() => {\n        gl.domElement.addEventListener('mousedown', setTouchingOn);\n        gl.domElement.addEventListener('touchstart', setTouchingOn, { passive: true });\n        window.addEventListener('mouseup', setTouchingOff);\n        gl.domElement.addEventListener('touchend', setTouchingOff);\n        gl.domElement.addEventListener('touchcancel', setTouchingOff);\n        window.addEventListener('mousemove', onTouchMove);\n        gl.domElement.addEventListener('touchmove', onTouchMove, { passive: true });\n        return () => {\n            gl.domElement.removeEventListener('mousedown', setTouchingOn);\n            gl.domElement.removeEventListener('touchstart', setTouchingOn);\n            window.removeEventListener('mouseup', setTouchingOff);\n            gl.domElement.removeEventListener('touchend', setTouchingOff);\n            gl.domElement.removeEventListener('touchcancel', setTouchingOff);\n            window.removeEventListener('mousemove', onTouchMove);\n            gl.domElement.removeEventListener('touchmove', onTouchMove);\n        };\n    });\n    const spawnComponent = useMemo(() => React.createElement(Spawn, { avatar: scene, onSpawnFinish: onSpawnAnimationFinish }), [onSpawnAnimationFinish]);\n    return (React.createElement(\"group\", { ref: modelRef, dispose: null, rotation: [0, 0, 0] },\n        React.createElement(\"primitive\", { object: scene, scale: scale }),\n        spawnComponent));\n};\n\nconst FloatingModel = ({ modelSrc, scale = 1.0, onLoaded, bloom }) => {\n    const ref = useRef(null);\n    const { scene } = useGltfLoader(modelSrc);\n    useFrame((state) => {\n        const t = state.clock.getElapsedTime();\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            ref.current.rotation.y = Math.sin(t / 2) / 8;\n            ref.current.position.y = (1 + Math.sin(t / 1.5)) / -9;\n        }\n    });\n    return React.createElement(Model, { modelRef: ref, scale: scale, scene: scene, onLoaded: onLoaded, bloom: bloom });\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst FloatingModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(FloatingModel, Object.assign({}, props, { setModelFallback: setFallback }))));\n};\n\nconst HORIZONTAL_ROTATION_STEP = 0.005;\nconst VERTICAL_ROTATION_STEP = 0.0005;\nconst CenteredModel = ({ scene, scale = 1, modelRef, onLoaded, onSpawnAnimationFinish, bloom, materialConfig, lockHorizontal, lockVertical, horizontalRotationStep = HORIZONTAL_ROTATION_STEP, verticalRotationStep = VERTICAL_ROTATION_STEP }) => {\n    const { gl } = useThree();\n    const [isTouching, setIsTouching] = useState(false);\n    const [touchEvent, setTouchEvent] = useState(null);\n    const centerWrapperRef = useRef(null);\n    const setTouchingOn = (e) => {\n        if (hasWindow && window.TouchEvent && e instanceof TouchEvent) {\n            setTouchEvent(e);\n        }\n        setIsTouching(true);\n    };\n    const setTouchingOff = () => {\n        setTouchEvent(null);\n        setIsTouching(false);\n    };\n    usePersistantRotation(scene);\n    const onTouchMove = useCallback((event) => {\n        if (!isTouching)\n            return;\n        let deltaX = 0;\n        let deltaY = 0;\n        if (event instanceof MouseEvent) {\n            deltaX = event.movementX;\n            deltaY = event.movementY;\n        }\n        if (hasWindow && window.TouchEvent && event instanceof TouchEvent && touchEvent) {\n            deltaX = event.touches[0].pageX - touchEvent.touches[0].pageX;\n            deltaY = event.touches[0].pageY - touchEvent.touches[0].pageY;\n            setTouchEvent(event);\n        }\n        if (!lockHorizontal && centerWrapperRef.current) {\n            centerWrapperRef.current.rotation.y += deltaX * horizontalRotationStep;\n        }\n        if (!lockVertical && centerWrapperRef.current) {\n            centerWrapperRef.current.rotation.x += deltaY * verticalRotationStep;\n        }\n    }, [isTouching, touchEvent, lockHorizontal, lockVertical, verticalRotationStep, horizontalRotationStep]);\n    normaliseMaterialsConfig(scene, bloom, materialConfig);\n    scene.traverse((object) => {\n        const node = object;\n        if (node.isMesh) {\n            node.castShadow = true;\n            node.receiveShadow = true;\n        }\n    });\n    useEffect(() => {\n        const boundingBox = new Box3().setFromObject(scene);\n        const center = new Vector3();\n        boundingBox.getCenter(center);\n        scene.position.sub(center);\n    }, [scene]);\n    useEffect(() => triggerCallback(onLoaded), [scene, onLoaded]);\n    useEffect(() => {\n        gl.domElement.addEventListener('mousedown', setTouchingOn);\n        gl.domElement.addEventListener('touchstart', setTouchingOn, { passive: true });\n        window.addEventListener('mouseup', setTouchingOff);\n        gl.domElement.addEventListener('touchend', setTouchingOff);\n        gl.domElement.addEventListener('touchcancel', setTouchingOff);\n        window.addEventListener('mousemove', onTouchMove);\n        gl.domElement.addEventListener('touchmove', onTouchMove, { passive: true });\n        return () => {\n            gl.domElement.removeEventListener('mousedown', setTouchingOn);\n            gl.domElement.removeEventListener('touchstart', setTouchingOn);\n            window.removeEventListener('mouseup', setTouchingOff);\n            gl.domElement.removeEventListener('touchend', setTouchingOff);\n            gl.domElement.removeEventListener('touchcancel', setTouchingOff);\n            window.removeEventListener('mousemove', onTouchMove);\n            gl.domElement.removeEventListener('touchmove', onTouchMove);\n        };\n    }, [onTouchMove]);\n    const spawnComponent = useMemo(() => React.createElement(Spawn, { avatar: scene, onSpawnFinish: onSpawnAnimationFinish }), [onSpawnAnimationFinish]);\n    return (React.createElement(\"group\", { ref: modelRef, dispose: null },\n        React.createElement(\"group\", { ref: centerWrapperRef, rotation: [0, 0, 0] },\n            React.createElement(\"primitive\", { object: scene, scale: scale }),\n            spawnComponent)));\n};\n\nconst RotatingModel = ({ modelSrc, scale = 1.0, onLoaded, bloom, lockVertical, lockHorizontal, horizontalRotationStep, verticalRotationStep }) => {\n    const ref = useRef(null);\n    const [animationRunning, setAnimationRunning] = useState(true);\n    const onSpawnAnimationFinish = () => {\n        setAnimationRunning(false);\n    };\n    const { scene, animations: embeddedAnimations } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    const assetMixerRef = useRef(null);\n    useEffect(() => {\n        assetMixerRef.current = playAssetIdleAnimation(scene, embeddedAnimations);\n        return () => {\n            disposeAssetAnimations(assetMixerRef.current, scene);\n            assetMixerRef.current = null;\n        };\n    }, [scene]);\n    const animationClip = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const clip = yield loadAnimationClips(modelSrc);\n        return clip[0];\n    }), [modelSrc]);\n    const animationMixer = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const mixer = new AnimationMixer(nodes.Armature);\n        if (animationRunning) {\n            return mixer;\n        }\n        const mixerAnimationClip = yield animationClip;\n        if (mixerAnimationClip) {\n            const animation = mixer.clipAction(mixerAnimationClip);\n            animation.fadeIn(0);\n            animation.play();\n            mixer.update(0);\n        }\n        return mixer;\n    }), [animationRunning, animationClip, nodes.Armature]);\n    useFrame((state, delta) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        updateAssetAnimations(assetMixerRef.current, delta);\n        (_a = (yield animationMixer)) === null || _a === void 0 ? void 0 : _a.update(delta);\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            ref.current.rotation.y = state.clock.getElapsedTime() * 0.5;\n        }\n    }));\n    return (React.createElement(CenteredModel, { verticalRotationStep: verticalRotationStep, horizontalRotationStep: horizontalRotationStep, lockHorizontal: lockHorizontal, lockVertical: lockVertical, onSpawnAnimationFinish: onSpawnAnimationFinish, modelRef: ref, scale: scale, scene: scene, onLoaded: onLoaded, bloom: bloom }));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst RotatingModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(RotatingModel, Object.assign({}, props, { setModelFallback: setFallback }))));\n};\n\nconst StaticModel = ({ modelSrc, modelRef, scale = 1, setModelFallback, onLoaded, emotion, bloom, materialConfig }) => {\n    const { scene } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    useEmotion(nodes, emotion);\n    useFallback(nodes, setModelFallback);\n    return (React.createElement(Model, { modelRef: modelRef, scene: scene, scale: scale, onLoaded: onLoaded, bloom: bloom, materialConfig: materialConfig }));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst StaticModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(StaticModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nconst BoundsModelContainer = ({ modelSrc, children, fit, onLoaded }) => {\n    const bounds = useBounds();\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    const onChildLoaded = useCallback(() => {\n        if (fit) {\n            bounds.refresh().clip().fit();\n        }\n        triggerCallback(onLoaded);\n    }, [bounds, fit]);\n    const childModel = useMemo(() => React.Children.map(children, (child) => cloneElement(child, { setModelFallback: setFallback, onLoaded: onChildLoaded })), [modelSrc, children, onChildLoaded]);\n    useEffect(() => {\n        if (fit) {\n            bounds.refresh().clip().fit();\n        }\n    }, [modelSrc, fit, fallback]);\n    return React.createElement(React.Fragment, null, childModel);\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z$1 = \".BaseCanvas-module_base-canvas__Xjohd {\\n  width: 100%;\\n  height: 100%;\\n  margin: 0;\\n  padding: 0;\\n}\";\nvar styles$1 = {\"base-canvas\":\"BaseCanvas-module_base-canvas__Xjohd\"};\nstyleInject(css_248z$1);\n\nconst BASE_DPR = hasWindow ? window.devicePixelRatio : 1;\nconst BaseCanvas = ({ enablePostProcessing, children = undefined, fov = 50, position = new Vector3(0, 0, 5), style, dpr = [BASE_DPR * 0.5, 1], className, canvasConfig = { alpha: true } }) => (React.createElement(Canvas, { key: fov, className: `${styles$1['base-canvas']} ${className !== null && className !== void 0 ? className : ''}`, shadows: \"soft\", gl: {\n        preserveDrawingBuffer: true,\n        alpha: canvasConfig.alpha,\n        toneMapping: ACESFilmicToneMapping,\n        toneMappingExposure: 1.8\n    }, flat: enablePostProcessing, dpr: dpr, camera: { fov, position }, resize: { scroll: true, debounce: { scroll: 50, resize: 0 } }, style: Object.assign(Object.assign({}, style), { background: canvasConfig.alpha ? 'transparent' : style === null || style === void 0 ? void 0 : style.background }) }, children));\n\nconst Capture = ({ trigger, settings, callBack }) => {\n    const gl = useThree((state) => state.gl);\n    const type = (settings === null || settings === void 0 ? void 0 : settings.type) || 'image/png';\n    const quality = (settings === null || settings === void 0 ? void 0 : settings.quality) || 0.1;\n    useEffect(() => {\n        if (trigger) {\n            const capture = gl.domElement.toDataURL(type, quality);\n            callBack(capture);\n        }\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [trigger]);\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return React.createElement(React.Fragment, null);\n};\n\nconst BackgroundColor = ({ color }) => React.createElement(\"color\", { attach: \"background\", args: [color] });\n\nconst Box = (_a) => {\n    var { src = '' } = _a, baseProps = __rest(_a, [\"src\"]);\n    const ref = useRef(null);\n    const texture = useLoader(TextureLoader, src);\n    return (React.createElement(\"mesh\", Object.assign({ ref: ref, castShadow: true, receiveShadow: true }, baseProps),\n        React.createElement(\"boxGeometry\", null),\n        React.createElement(\"meshPhysicalMaterial\", { map: texture })));\n};\n\n/**\n * Interactive presentation of any GLTF (.glb) asset.\n */\nconst Exhibit = ({ modelSrc, scale = 1.0, environment = 'city', position, style, className, shadows = false, float = false, fit = false, capture, snap = false, lockVertical = false, onLoaded, onLoading, horizontalRotation, lockHorizontal = false, horizontalRotationStep, verticalRotationStep, children, disableInitialLight, disableEnvironment }) => {\n    const model = useMemo(() => {\n        if (!isValidFormat(modelSrc)) {\n            return null;\n        }\n        if (float) {\n            return React.createElement(FloatingModelContainer, { modelSrc: modelSrc, scale: scale, onLoaded: onLoaded });\n        }\n        if (horizontalRotation) {\n            return (React.createElement(RotatingModelContainer, { verticalRotationStep: verticalRotationStep, horizontalRotationStep: horizontalRotationStep, modelSrc: modelSrc, scale: scale, onLoaded: onLoaded, lockHorizontal: lockHorizontal, lockVertical: lockVertical }));\n        }\n        return React.createElement(StaticModelContainer, { modelSrc: modelSrc, scale: scale, onLoaded: onLoaded });\n    }, [\n        onLoaded,\n        float,\n        modelSrc,\n        scale,\n        horizontalRotation,\n        lockHorizontal,\n        lockVertical,\n        verticalRotationStep,\n        horizontalRotationStep\n    ]);\n    useEffect(() => triggerCallback(onLoading), [modelSrc, onLoading]);\n    return (React.createElement(BaseCanvas, { position: position, style: style, className: className },\n        React.createElement(Suspense, { fallback: null },\n            !disableInitialLight && (React.createElement(React.Fragment, null,\n                React.createElement(\"ambientLight\", { intensity: 0.5 }),\n                React.createElement(\"spotLight\", { position: [10, 10, 10], angle: 0.15, penumbra: 1, \"shadow-mapSize\": [512, 512], castShadow: true }))),\n            React.createElement(PresentationControls, { global: true, config: { mass: 2, tension: 500 }, snap: snap, rotation: [0, -0.3, 0], polar: lockVertical ? [0, 0] : [-Math.PI / 3, Math.PI / 3], azimuth: lockHorizontal ? [0, 0] : [-Infinity, Infinity] }, model && (React.createElement(Bounds, { fit: fit, clip: fit, observe: fit },\n                React.createElement(BoundsModelContainer, { modelSrc: modelSrc, fit: fit, onLoaded: onLoaded }, model)))),\n            children,\n            shadows && React.createElement(ContactShadows, { position: [0, -1.0, 0], opacity: 0.75, scale: 10, blur: 2.6, far: 2 }),\n            !disableEnvironment && React.createElement(Environment, { environment: environment })),\n        capture && React.createElement(Capture, Object.assign({}, capture)),\n        (style === null || style === void 0 ? void 0 : style.background) && React.createElement(BackgroundColor, { color: style.background })));\n};\n\nlet currentRotation$1 = 0;\nconst AnimationModel = ({ modelSrc, animationSrc, rotation = 20 * (Math.PI / 180), scale = 1, idleRotation = false, setModelFallback, onLoaded, headMovement = false, emotion, bloom, materialConfig }) => {\n    const ref = useRef(null);\n    const [animationRunning, setAnimationRunning] = useState(true);\n    const onSpawnAnimationFinish = () => {\n        setAnimationRunning(false);\n    };\n    const { scene, animations: embeddedAnimations } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    const assetMixerRef = useRef(null);\n    useEffect(() => {\n        assetMixerRef.current = playAssetIdleAnimation(scene, embeddedAnimations);\n        return () => {\n            disposeAssetAnimations(assetMixerRef.current, scene);\n            assetMixerRef.current = null;\n        };\n    }, [scene]);\n    const animationClip = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const clip = yield loadAnimationClips(animationSrc);\n        return clip[0];\n    }), [animationSrc]);\n    const animationMixer = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const mixer = new AnimationMixer(nodes.Armature);\n        if (animationRunning) {\n            return mixer;\n        }\n        const animation = mixer.clipAction(yield animationClip);\n        animation.fadeIn(0);\n        animation.play();\n        mixer.update(0);\n        return mixer;\n    }), [animationRunning, animationClip, nodes.Armature]);\n    useFrame((state, delta) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        updateAssetAnimations(assetMixerRef.current, delta);\n        (_a = (yield animationMixer)) === null || _a === void 0 ? void 0 : _a.update(delta);\n        if (!idleRotation) {\n            return;\n        }\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            currentRotation$1 += delta * 0.2;\n            ref.current.rotation.y = rotation + Math.sin(currentRotation$1) / 3;\n        }\n    }));\n    useHeadMovement({ nodes, enabled: headMovement });\n    useEmotion(nodes, emotion);\n    useIdleExpression('blink', nodes);\n    useFallback(nodes, setModelFallback);\n    return (React.createElement(Model, { modelRef: ref, scene: scene, scale: scale, onLoaded: onLoaded, onSpawnAnimationFinish: onSpawnAnimationFinish, bloom: bloom, materialConfig: materialConfig }));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst AnimationModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(AnimationModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nlet currentRotation = 0;\nconst HalfBodyModel = ({ modelSrc, scale = 1, rotation = 20 * (Math.PI / 180), idleRotation = false, emotion, setModelFallback, onLoaded, headMovement = false, bloom, materialConfig }) => {\n    const ref = useRef(null);\n    const { scene } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    scene.traverse((object) => {\n        const node = object;\n        if (node.name === 'Wolf3D_Hands') {\n            node.visible = false;\n        }\n        if (node.name === 'RightHand') {\n            node.position.set(0, -2, 0);\n        }\n        if (node.name === 'LeftHand') {\n            node.position.set(0, -2, 0);\n        }\n    });\n    useFrame((state, delta) => {\n        if (!idleRotation) {\n            return;\n        }\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            currentRotation += delta * 0.2;\n            ref.current.rotation.y = rotation + Math.sin(currentRotation) / 3;\n        }\n    });\n    useHeadMovement({ nodes, isHalfBody: true, enabled: headMovement });\n    useIdleExpression('blink', nodes);\n    useEmotion(nodes, emotion);\n    useFallback(nodes, setModelFallback);\n    return (React.createElement(Model, { modelRef: ref, scene: scene, scale: scale, onLoaded: onLoaded, bloom: bloom, materialConfig: materialConfig }));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst HalfBodyModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(HalfBodyModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nconst PoseModel = ({ modelSrc, poseSrc, modelRef, scale = 1, emotion, setModelFallback, onLoaded, bloom, materialConfig }) => {\n    const { scene } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    const pose = useGltfLoader(poseSrc);\n    const { nodes: sourceNodes } = useGraph(pose.scene);\n    mutatePose(nodes, sourceNodes);\n    useEmotion(nodes, emotion);\n    useFallback(nodes, setModelFallback);\n    return (React.createElement(Model, { modelRef: modelRef, scene: scene, scale: scale, onLoaded: onLoaded, bloom: bloom, materialConfig: materialConfig }));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst PoseModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(PoseModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nconst EnvironmentModel = ({ environment, scale = 1, setModelFallback, onLoaded }) => {\n    const transform = new Transform();\n    const { scene } = useGltfLoader(environment);\n    const { nodes } = useGraph(scene);\n    useFallback(nodes, setModelFallback);\n    useEffect(() => triggerCallback(onLoaded), [scene, onLoaded]);\n    return (React.createElement(\"group\", null, Object.keys(nodes).map((key) => {\n        const node = nodes[key];\n        if (node.type === 'Mesh') {\n            return (React.createElement(\"mesh\", { receiveShadow: true, key: node.name, scale: scale, position: transform.position, rotation: transform.rotation, geometry: node.geometry, material: node.material, morphTargetInfluences: node.morphTargetInfluences || [] }));\n        }\n        return null;\n    })));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst EnvironmentModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    const { environment } = props;\n    const isStaticPreset = environment in environmentModels;\n    const environmentSrc = isStaticPreset ? environmentModels[environment] : environment;\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(EnvironmentModel, Object.assign({ setModelFallback: setFallback }, props, { environment: environmentSrc }))));\n};\n\nconst AnimatedCamera = ({ animatedCameraSrc }) => {\n    const { camera } = useThree();\n    const { scene, animations } = useGLTF(animatedCameraSrc);\n    const mixerRef = useRef(null);\n    const [animatedCamera, setAnimatedCamera] = useState(null);\n    useEffect(() => {\n        if (animations.length > 0) {\n            mixerRef.current = new AnimationMixer(scene);\n            animations.forEach((clip) => {\n                const action = mixerRef.current.clipAction(clip);\n                action.play();\n            });\n        }\n        const cam = scene.getObjectByName('camera');\n        if (cam)\n            setAnimatedCamera(cam);\n    }, [scene, animations]);\n    useFrame((_, delta) => {\n        if (mixerRef.current) {\n            mixerRef.current.update(delta);\n        }\n        if (animatedCamera) {\n            camera.position.copy(animatedCamera.position);\n            camera.quaternion.copy(animatedCamera.quaternion);\n        }\n    });\n    return null;\n};\n\nconst updateCameraTarget = (controls, camera, target, minDistance, maxDistance) => {\n    if (controls) {\n        let distance = controls.target.distanceTo(camera.position);\n        distance = clamp(distance, maxDistance, minDistance);\n        const pivot = (distance - minDistance) / (maxDistance - minDistance);\n        controls.target.set(0, target - 0.6 * pivot, 0);\n    }\n};\nconst CameraControls = ({ cameraTarget, cameraInitialDistance, cameraZoomTarget, headScale = 1, controlsMinDistance = 0.4, controlsMaxDistance = 2.5, updateCameraTargetOnZoom = false }) => {\n    const cameraZoomTargetRef = useRef(cameraZoomTarget);\n    const { camera, gl } = useThree();\n    const controlsRef = useRef(null);\n    const progressRef = useRef(Number.POSITIVE_INFINITY);\n    const fallbackCameraTarget = cameraTarget || 1.475 + headScale / 10;\n    const headScaleAdjustedMinDistance = controlsMinDistance + headScale / 10;\n    const updateCameraFocus = (delta, target) => {\n        if (target && progressRef.current <= 1) {\n            camera.position.setX(lerp(camera.position.x, target.x, progressRef.current));\n            camera.position.setZ(lerp(camera.position.z, target.z, progressRef.current));\n            progressRef.current += delta;\n        }\n    };\n    useEffect(() => {\n        var _a, _b, _c;\n        if (((_a = cameraZoomTargetRef.current) === null || _a === void 0 ? void 0 : _a.x) !== (cameraZoomTarget === null || cameraZoomTarget === void 0 ? void 0 : cameraZoomTarget.x) ||\n            ((_b = cameraZoomTargetRef.current) === null || _b === void 0 ? void 0 : _b.y) !== (cameraZoomTarget === null || cameraZoomTarget === void 0 ? void 0 : cameraZoomTarget.y) ||\n            ((_c = cameraZoomTargetRef.current) === null || _c === void 0 ? void 0 : _c.z) !== (cameraZoomTarget === null || cameraZoomTarget === void 0 ? void 0 : cameraZoomTarget.z)) {\n            cameraZoomTargetRef.current = cameraZoomTarget;\n            progressRef.current = 0;\n        }\n        const controls = controlsRef.current;\n        if (controls) {\n            controls.target.set(0, fallbackCameraTarget, 0);\n            controls.update();\n            // TODO: Look for a better distance initialiser, without progress value check it conflicts with cameraZoomTarget which also can update camera position.z\n            if (cameraInitialDistance && progressRef.current === Number.POSITIVE_INFINITY) {\n                camera.position.z = cameraInitialDistance;\n                controls.update();\n            }\n        }\n    }, [cameraInitialDistance, camera, gl.domElement, cameraZoomTarget, fallbackCameraTarget]);\n    useFrame((_, delta) => {\n        var _a;\n        if (updateCameraTargetOnZoom && controlsRef.current) {\n            updateCameraTarget(controlsRef.current, camera, fallbackCameraTarget, headScaleAdjustedMinDistance, controlsMaxDistance);\n        }\n        updateCameraFocus(delta, cameraZoomTarget);\n        (_a = controlsRef.current) === null || _a === void 0 ? void 0 : _a.update();\n    });\n    return (React.createElement(OrbitControls, { ref: controlsRef, enableRotate: false, enablePan: false, target: [0, fallbackCameraTarget, 0], minDistance: headScaleAdjustedMinDistance, maxDistance: controlsMaxDistance, minPolarAngle: 1.4, maxPolarAngle: 1.4 }));\n};\n\nconst MultipleAnimationModel = ({ modelSrc, animations, activeAnimation, scale = 1, setModelFallback, onLoaded, emotion, bloom, materialConfig, onAnimationEnd }) => {\n    const armatureMixerRef = useRef(null);\n    const assetMixerRef = useRef(null);\n    const activeActionRef = useRef(null);\n    const animationTimeRef = useRef(0);\n    const loadedAnimations = useAnimations(animations);\n    const { scene, animations: embeddedAnimations } = useGltfCachedLoader(modelSrc);\n    useEffect(() => {\n        if (scene) {\n            const armatureMixer = new AnimationMixer(scene);\n            armatureMixerRef.current = armatureMixer;\n            if (activeActionRef.current) {\n                const newAction = armatureMixer.clipAction(activeActionRef.current.getClip());\n                newAction.play();\n                armatureMixer.update(animationTimeRef.current);\n                activeActionRef.current = newAction;\n            }\n            assetMixerRef.current = playAssetIdleAnimation(scene, embeddedAnimations);\n        }\n        return () => {\n            var _a, _b;\n            (_a = armatureMixerRef.current) === null || _a === void 0 ? void 0 : _a.stopAllAction();\n            (_b = armatureMixerRef.current) === null || _b === void 0 ? void 0 : _b.uncacheRoot(scene);\n            armatureMixerRef.current = null;\n            disposeAssetAnimations(assetMixerRef.current, scene);\n            assetMixerRef.current = null;\n        };\n    }, [scene]);\n    useEffect(() => {\n        var _a, _b;\n        const mixer = armatureMixerRef.current;\n        const prevAction = activeActionRef.current;\n        const newClip = loadedAnimations[activeAnimation];\n        const animationConfig = animations[activeAnimation];\n        if (!newClip || !mixer || !animationConfig)\n            return;\n        if (prevAction && prevAction.getClip().uuid === newClip.uuid)\n            return;\n        const newAction = mixer.clipAction(newClip);\n        const loopCount = (_a = animationConfig.repeat) !== null && _a !== void 0 ? _a : Infinity;\n        const fadeTime = (_b = animationConfig.fadeTime) !== null && _b !== void 0 ? _b : 0.5;\n        newAction.setLoop(loopCount === Infinity ? LoopRepeat : LoopOnce, loopCount);\n        newAction.clampWhenFinished = true;\n        const handleAnimationEnd = (event) => {\n            if (event.action === newAction) {\n                onAnimationEnd === null || onAnimationEnd === void 0 ? void 0 : onAnimationEnd(newAction);\n            }\n        };\n        mixer.addEventListener('finished', handleAnimationEnd);\n        if (prevAction) {\n            prevAction.fadeOut(fadeTime);\n            newAction.reset().fadeIn(fadeTime);\n        }\n        else {\n            newAction.reset();\n        }\n        newAction.play();\n        activeActionRef.current = newAction;\n        // eslint-disable-next-line consistent-return\n        return () => {\n            mixer.removeEventListener('finished', handleAnimationEnd);\n        };\n    }, [activeAnimation, animations, loadedAnimations, onAnimationEnd]);\n    useFrame((state, delta) => {\n        var _a, _b;\n        (_a = armatureMixerRef.current) === null || _a === void 0 ? void 0 : _a.update(delta);\n        animationTimeRef.current = ((_b = activeActionRef.current) === null || _b === void 0 ? void 0 : _b.time) || 0;\n        updateAssetAnimations(assetMixerRef.current, delta);\n    });\n    useEmotion(scene, emotion);\n    useIdleExpression('blink', scene);\n    useFallbackScene(scene, setModelFallback);\n    return React.createElement(Model, { scene: scene, scale: scale, onLoaded: onLoaded, bloom: bloom, materialConfig: materialConfig });\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst MultipleAnimationModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(MultipleAnimationModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nvar css_248z = \".Loader-module_loader__Ukoov {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n.Loader-module_dots__KfhUo {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.Loader-module_dot__qTWRh {\\n  background-color: rgb(236, 236, 236);\\n  width: 8px;\\n  height: 8px;\\n  margin: 2px;\\n  border-radius: 100%;\\n  display: inline-block;\\n}\\n.Loader-module_dot__qTWRh:nth-child(1) {\\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.12s infinite normal both running Loader-module_glowing__nwo3q;\\n}\\n.Loader-module_dot__qTWRh:nth-child(2) {\\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.24s infinite normal both running Loader-module_glowing__nwo3q;\\n}\\n.Loader-module_dot__qTWRh:nth-child(3) {\\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.36s infinite normal both running Loader-module_glowing__nwo3q;\\n}\\n\\n@keyframes Loader-module_glowing__nwo3q {\\n  0% {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n  45% {\\n    transform: scale(0.1);\\n    opacity: 0.7;\\n  }\\n  80% {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n}\";\nvar styles = {\"loader\":\"Loader-module_loader__Ukoov\",\"dots\":\"Loader-module_dots__KfhUo\",\"dot\":\"Loader-module_dot__qTWRh\",\"glowing\":\"Loader-module_glowing__nwo3q\"};\nstyleInject(css_248z);\n\nconst Loader = () => (React.createElement(\"div\", { className: styles.loader },\n    React.createElement(\"div\", { className: styles.dots }, [1, 2, 3].map((it) => (React.createElement(\"div\", { key: it, className: styles.dot }))))));\n\nconst Bloom = ({ luminanceThreshold = 1, luminanceSmoothing = 1, mipmapBlur = true, intensity = 0.1, kernelSize = 0 }) => (React.createElement(Bloom$1, { luminanceThreshold: luminanceThreshold, luminanceSmoothing: luminanceSmoothing, mipmapBlur: mipmapBlur, intensity: intensity, kernelSize: kernelSize }));\n\nconst fromEntries = (arr) => Object.assign({}, ...arr.map(([k, v]) => ({ [k]: v })));\nconst definedProps = (obj) => fromEntries(\n// eslint-disable-next-line\nObject.entries(obj).filter(([k, v]) => v !== undefined));\n\nconst LIGHT_CONFIG = Object.freeze({\n    fillLightAngle: Math.PI / 3,\n    backLightAngle: Math.PI / 8,\n    keyLightAngle: Math.PI,\n    silhouetteLightAngle: Math.PI * 1.5,\n    keyLightPosition: new Vector3(0.5, 1.55, 0.5),\n    liftLightPosition: new Vector3(0.25, 1.7, 2.0),\n    dirLightPosition: new Vector3(-0.75, 2.5, -1.0),\n    silhouetteLightPosition: new Vector3(-1.5, 0.1, -1.5),\n    defaultProps: {\n        keyLightIntensity: 0.8,\n        keyLightColor: '#FFFFFF',\n        fillLightIntensity: 3.0,\n        fillLightColor: '#6794FF',\n        fillLightPosition: new Vector3(-0.5, 1.6, -0.5),\n        backLightIntensity: 6.0,\n        backLightColor: '#FFB878',\n        backLightPosition: new Vector3(0.5, 1.6, -1.0),\n        lightTarget: new Vector3(0.0, 1.7, 0.0)\n    }\n});\nconst Lights = (lightingProps) => {\n    // use default props as fallback if no custom lighting settings are provided\n    const { keyLightIntensity, keyLightColor, fillLightIntensity, fillLightColor, fillLightPosition, backLightIntensity, backLightColor, backLightPosition, lightTarget } = Object.assign(LIGHT_CONFIG.defaultProps, definedProps(lightingProps));\n    const { scene } = useThree();\n    const [targets] = useState({\n        head: new Object3D(),\n        shoe: new Object3D()\n    });\n    useEffect(() => {\n        // apply provided positions for targets\n        targets.head.position.copy(lightTarget);\n        targets.shoe.position.set(0.0, 0.0, 0.0);\n        // add targets to scene (without the spotlights would not aim at them)\n        scene.add(targets.head);\n        scene.add(targets.shoe);\n    }, []);\n    return (React.createElement(\"group\", null,\n        React.createElement(\"spotLight\", { position: fillLightPosition, target: targets.head, angle: LIGHT_CONFIG.fillLightAngle, color: fillLightColor, intensity: fillLightIntensity, castShadow: true }),\n        React.createElement(\"spotLight\", { position: backLightPosition, target: targets.head, angle: LIGHT_CONFIG.backLightAngle, color: backLightColor, intensity: backLightIntensity, castShadow: true }),\n        React.createElement(\"spotLight\", { position: LIGHT_CONFIG.keyLightPosition, target: targets.head, angle: LIGHT_CONFIG.keyLightAngle, color: keyLightColor, intensity: keyLightIntensity }),\n        React.createElement(\"spotLight\", { position: LIGHT_CONFIG.liftLightPosition, target: targets.shoe, angle: LIGHT_CONFIG.keyLightAngle, color: keyLightColor, intensity: keyLightIntensity * 0.25 }),\n        React.createElement(\"spotLight\", { position: LIGHT_CONFIG.silhouetteLightPosition, target: targets.head, angle: LIGHT_CONFIG.silhouetteLightAngle, color: keyLightColor, intensity: keyLightIntensity * 0.25 })));\n};\n\nconst CAMERA = {\n    TARGET: {\n        FULL_BODY: {\n            MALE: 1.65,\n            FEMALE: 1.55\n        },\n        HALF_BODY: 0.6\n    },\n    INITIAL_DISTANCE: {\n        FULL_BODY: 0.4,\n        HALF_BODY: 0.5\n    },\n    CONTROLS: {\n        FULL_BODY: {\n            MIN_DISTANCE: 0.5,\n            MAX_DISTANCE: 3.2,\n            ZOOM_TARGET: new Vector3(-0.11, 0, 3.2)\n        },\n        HALF_BODY: {\n            MIN_DISTANCE: 0.4,\n            MAX_DISTANCE: 1.4,\n            ZOOM_TARGET: new Vector3(-0.15, 0, 0.55)\n        }\n    }\n};\n/**\n * Interactive avatar presentation with zooming and horizontal rotation controls.\n * Optimised for full-body and half-body avatars.\n */\nconst Avatar = ({ modelSrc, animationSrc = undefined, animations = undefined, activeAnimation = undefined, poseSrc = undefined, environment = 'soft', halfBody = false, shadows = false, scale = 1, animatedCameraSrc, cameraTarget = CAMERA.TARGET.FULL_BODY.MALE, cameraInitialDistance = CAMERA.INITIAL_DISTANCE.FULL_BODY, style, emotion, idleRotation = false, capture, background, onLoaded, onLoading, dpr, className, headMovement = false, cameraZoomTarget = CAMERA.CONTROLS.FULL_BODY.ZOOM_TARGET, onLoadedEffect, onLoadedAnimation, children, effects, keyLightIntensity, keyLightColor, fillLightIntensity, fillLightColor, fillLightPosition, backLightIntensity, backLightColor, backLightPosition, lightTarget, fov = 50, onAnimationEnd, materialConfig, controlsMinDistance, controlsMaxDistance, canvasConfig }) => {\n    var _a, _b, _c, _d, _e;\n    const setSpawnState = useSetAtom(spawnState);\n    useEffect(() => {\n        setSpawnState({ onLoadedEffect, onLoadedAnimation });\n    }, [onLoadedAnimation, onLoadedEffect, setSpawnState]);\n    const AvatarModel = useMemo(() => {\n        if (!isValidFormat(modelSrc)) {\n            return null;\n        }\n        if (!!activeAnimation && !halfBody && animations) {\n            return (React.createElement(MultipleAnimationModelContainer, { emotion: emotion, modelSrc: modelSrc, animations: animations, activeAnimation: activeAnimation, scale: scale, onLoaded: onLoaded, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom, onAnimationEnd: onAnimationEnd, materialConfig: materialConfig }));\n        }\n        if (!!animationSrc && !halfBody && isValidFormat(animationSrc)) {\n            return (React.createElement(AnimationModelContainer, { emotion: emotion, modelSrc: modelSrc, animationSrc: animationSrc, scale: scale, idleRotation: idleRotation, onLoaded: onLoaded, headMovement: headMovement, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom, materialConfig: materialConfig }));\n        }\n        if (halfBody) {\n            return (React.createElement(HalfBodyModelContainer, { emotion: emotion, modelSrc: modelSrc, scale: scale, idleRotation: idleRotation, onLoaded: onLoaded, headMovement: headMovement, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom, materialConfig: materialConfig }));\n        }\n        if (isValidFormat(poseSrc)) {\n            return (React.createElement(PoseModelContainer, { emotion: emotion, modelSrc: modelSrc, scale: scale, poseSrc: poseSrc, onLoaded: onLoaded, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom, materialConfig: materialConfig }));\n        }\n        return (React.createElement(StaticModelContainer, { modelSrc: modelSrc, scale: scale, onLoaded: onLoaded, emotion: emotion, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom, materialConfig: materialConfig }));\n    }, [\n        modelSrc,\n        activeAnimation,\n        halfBody,\n        animations,\n        animationSrc,\n        poseSrc,\n        scale,\n        onLoaded,\n        emotion,\n        effects === null || effects === void 0 ? void 0 : effects.bloom,\n        materialConfig,\n        onAnimationEnd,\n        idleRotation,\n        headMovement\n    ]);\n    useEffect(() => triggerCallback(onLoading), [modelSrc, animationSrc, onLoading]);\n    const enablePostProcessing = Boolean((effects === null || effects === void 0 ? void 0 : effects.ambientOcclusion) || (effects === null || effects === void 0 ? void 0 : effects.bloom) || (effects === null || effects === void 0 ? void 0 : effects.vignette));\n    const cameraControlsMinDistance = useMemo(() => {\n        if (controlsMinDistance) {\n            return controlsMinDistance;\n        }\n        return halfBody ? CAMERA.CONTROLS.HALF_BODY.MIN_DISTANCE : CAMERA.CONTROLS.FULL_BODY.MIN_DISTANCE;\n    }, [controlsMinDistance, halfBody]);\n    const cameraControlsMaxDistance = useMemo(() => {\n        if (controlsMaxDistance) {\n            return controlsMaxDistance;\n        }\n        return halfBody ? CAMERA.CONTROLS.HALF_BODY.MAX_DISTANCE : CAMERA.CONTROLS.FULL_BODY.MAX_DISTANCE;\n    }, [controlsMaxDistance, halfBody]);\n    return (React.createElement(BaseCanvas, { enablePostProcessing: enablePostProcessing, position: new Vector3(0, 0, 3), fov: fov, style: style, dpr: dpr, className: className, canvasConfig: canvasConfig },\n        React.createElement(Environment, { environment: environment, enablePostProcessing: enablePostProcessing }),\n        animatedCameraSrc ? (React.createElement(AnimatedCamera, { animatedCameraSrc: animatedCameraSrc })) : (React.createElement(CameraControls, { cameraTarget: cameraTarget, cameraInitialDistance: cameraInitialDistance, cameraZoomTarget: cameraZoomTarget, controlsMinDistance: cameraControlsMinDistance, controlsMaxDistance: cameraControlsMaxDistance, updateCameraTargetOnZoom: !halfBody })),\n        AvatarModel,\n        children,\n        shadows && (React.createElement(ContactShadows, { opacity: (effects === null || effects === void 0 ? void 0 : effects.ambientOcclusion) ? 1.25 : 2, scale: 4, blur: 2, far: 1.0, resolution: 256 })),\n        (background === null || background === void 0 ? void 0 : background.src) && React.createElement(Box, Object.assign({}, background)),\n        capture && React.createElement(Capture, Object.assign({}, capture)),\n        (background === null || background === void 0 ? void 0 : background.color) && React.createElement(BackgroundColor, { color: background.color }),\n        enablePostProcessing && (React.createElement(EffectComposer, { autoClear: true },\n            React.createElement(React.Fragment, null,\n                (effects === null || effects === void 0 ? void 0 : effects.ambientOcclusion) && (React.createElement(N8AO, { quality: \"performance\", aoRadius: 0.08, distanceFalloff: 1, intensity: 5, screenSpaceRadius: true, halfRes: true })),\n                (effects === null || effects === void 0 ? void 0 : effects.bloom) && (React.createElement(Bloom, { luminanceThreshold: (_a = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _a === void 0 ? void 0 : _a.luminanceThreshold, luminanceSmoothing: (_b = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _b === void 0 ? void 0 : _b.luminanceSmoothing, intensity: (_c = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _c === void 0 ? void 0 : _c.intensity, kernelSize: (_d = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _d === void 0 ? void 0 : _d.kernelSize, mipmapBlur: (_e = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _e === void 0 ? void 0 : _e.mipmapBlur })),\n                (effects === null || effects === void 0 ? void 0 : effects.vignette) && React.createElement(Vignette, { eskil: false, offset: 0.5, darkness: 0.5 }),\n                React.createElement(BrightnessContrast, { brightness: 0.025, contrast: 0.1 }),\n                React.createElement(HueSaturation, { hue: 0, saturation: -0.1 })))),\n        React.createElement(Lights, { keyLightIntensity: keyLightIntensity, keyLightColor: keyLightColor, fillLightIntensity: fillLightIntensity, fillLightColor: fillLightColor, fillLightPosition: fillLightPosition, backLightIntensity: backLightIntensity, backLightColor: backLightColor, backLightPosition: backLightPosition, lightTarget: lightTarget })));\n};\nconst AvatarWrapper = (props) => {\n    var _a;\n    return (React.createElement(Suspense, { fallback: (_a = props.loader) !== null && _a !== void 0 ? _a : React.createElement(Loader, null) },\n        React.createElement(Provider, null,\n            React.createElement(Avatar, Object.assign({}, props)))));\n};\n\nconst FloorReflection = (_a) => {\n    var { resolution = 512, mixBlur = 0.8, mixStrength = 80, metalness = 0.5, blur = [300, 200], mirror = 1, minDepthThreshold = 0.4, maxDepthThreshold = 1.4, depthScale = 1.2, depthToBlurRatioBias = 1, distortion = 0, mixContrast = 1, reflectorOffset = 0, roughness = 1, color } = _a, props = __rest(_a, [\"resolution\", \"mixBlur\", \"mixStrength\", \"metalness\", \"blur\", \"mirror\", \"minDepthThreshold\", \"maxDepthThreshold\", \"depthScale\", \"depthToBlurRatioBias\", \"distortion\", \"mixContrast\", \"reflectorOffset\", \"roughness\", \"color\"]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"fog\", { attach: \"fog\", args: [color, 2, 6] }),\n        React.createElement(\"group\", { position: [0, 0, 0] },\n            React.createElement(\"mesh\", { rotation: [-Math.PI / 2, 0, 0] },\n                React.createElement(\"planeGeometry\", { args: [20, 10] }),\n                React.createElement(MeshReflectorMaterial, Object.assign({ resolution: resolution, mixBlur: mixBlur, mixStrength: mixStrength, metalness: metalness, blur: blur, mirror: mirror, minDepthThreshold: minDepthThreshold, maxDepthThreshold: maxDepthThreshold, depthScale: depthScale, depthToBlurRatioBias: depthToBlurRatioBias, distortion: distortion, mixContrast: mixContrast, reflectorOffset: reflectorOffset, roughness: roughness, color: color, envMapIntensity: 0 }, props))))));\n};\n\nfunction e(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{d(n.next(e));}catch(e){a(e);}}function c(e){try{d(n.throw(e));}catch(e){a(e);}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t);}))).then(i,c);}d((n=n.apply(e,t||[])).next());}))}\"function\"==typeof SuppressedError&&SuppressedError;const t=[\"geforce 320m\",\"geforce 8600\",\"geforce 8600m gt\",\"geforce 8800 gs\",\"geforce 8800 gt\",\"geforce 9400\",\"geforce 9400m g\",\"geforce 9400m\",\"geforce 9600m gt\",\"geforce 9600m\",\"geforce fx go5200\",\"geforce gt 120\",\"geforce gt 130\",\"geforce gt 330m\",\"geforce gtx 285\",\"google swiftshader\",\"intel g41\",\"intel g45\",\"intel gma 4500mhd\",\"intel gma x3100\",\"intel hd 3000\",\"intel q45\",\"legacy\",\"mali-2\",\"mali-3\",\"mali-4\",\"quadro fx 1500\",\"quadro fx 4\",\"quadro fx 5\",\"radeon hd 2400\",\"radeon hd 2600\",\"radeon hd 4670\",\"radeon hd 4850\",\"radeon hd 4870\",\"radeon hd 5670\",\"radeon hd 5750\",\"radeon hd 6290\",\"radeon hd 6300\",\"radeon hd 6310\",\"radeon hd 6320\",\"radeon hd 6490m\",\"radeon hd 6630m\",\"radeon hd 6750m\",\"radeon hd 6770m\",\"radeon hd 6970m\",\"sgx 543\",\"sgx543\"];function r(e){return e=e.toLowerCase().replace(/.*angle ?\\((.+)\\)(?: on vulkan [0-9.]+)?$/i,\"$1\").replace(/\\s(\\d{1,2}gb|direct3d.+$)|\\(r\\)| \\([^)]+\\)$/g,\"\").replace(/(?:vulkan|opengl) \\d+\\.\\d+(?:\\.\\d+)?(?: \\((.*)\\))?/,\"$1\")}const n=\"undefined\"==typeof window,o=(()=>{if(n)return;const{userAgent:e,platform:t,maxTouchPoints:r}=window.navigator,o=/(iphone|ipod|ipad)/i.test(e),a=\"iPad\"===t||\"MacIntel\"===t&&r>0&&!window.MSStream;return {isIpad:a,isMobile:/android/i.test(e)||o||a,isSafari12:/Version\\/12.+Safari/.test(e),isFirefox:/Firefox/.test(e)}})();function a(e,t,r){if(!r)return [t];const n=function(e){const t=\"\\n    precision highp float;\\n    attribute vec3 aPosition;\\n    varying float vvv;\\n    void main() {\\n      vvv = 0.31622776601683794;\\n      gl_Position = vec4(aPosition, 1.0);\\n    }\\n  \",r=\"\\n    precision highp float;\\n    varying float vvv;\\n    void main() {\\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\\n      enc = fract(enc);\\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\\n      gl_FragColor = enc;\\n    }\\n  \",n=e.createShader(35633),o=e.createShader(35632),a=e.createProgram();if(!(o&&n&&a))return;e.shaderSource(n,t),e.shaderSource(o,r),e.compileShader(n),e.compileShader(o),e.attachShader(a,n),e.attachShader(a,o),e.linkProgram(a),e.detachShader(a,n),e.detachShader(a,o),e.deleteShader(n),e.deleteShader(o),e.useProgram(a);const i=e.createBuffer();e.bindBuffer(34962,i),e.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const c=e.getAttribLocation(a,\"aPosition\");e.vertexAttribPointer(c,3,5126,!1,0,0),e.enableVertexAttribArray(c),e.clearColor(1,1,1,1),e.clear(16384),e.viewport(0,0,1,1),e.drawArrays(4,0,3);const d=new Uint8Array(4);return e.readPixels(0,0,1,1,6408,5121,d),e.deleteProgram(a),e.deleteBuffer(i),d.join(\"\")}(e),a=\"801621810\",i=\"8016218135\",c=\"80162181161\",d=(null==o?void 0:o.isIpad)?[[\"a7\",c,12],[\"a8\",i,15],[\"a8x\",i,15],[\"a9\",i,15],[\"a9x\",i,15],[\"a10\",i,15],[\"a10x\",i,15],[\"a12\",a,15],[\"a12x\",a,15],[\"a12z\",a,15],[\"a14\",a,15],[\"a15\",a,15],[\"m1\",a,15],[\"m2\",a,15]]:[[\"a7\",c,12],[\"a8\",i,12],[\"a9\",i,15],[\"a10\",i,15],[\"a11\",a,15],[\"a12\",a,15],[\"a13\",a,15],[\"a14\",a,15],[\"a15\",a,15],[\"a16\",a,15],[\"a17\",a,15]];let l;\"80162181255\"===n?l=d.filter((([,,e])=>e>=14)):(l=d.filter((([,e])=>e===n)),l.length||(l=d));return l.map((([e])=>`apple ${e} gpu`))}class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype);}}const c=[],d=[];function l(e,t){if(e===t)return 0;const r=e;e.length>t.length&&(e=t,t=r);let n=e.length,o=t.length;for(;n>0&&e.charCodeAt(~-n)===t.charCodeAt(~-o);)n--,o--;let a,i=0;for(;i<n&&e.charCodeAt(i)===t.charCodeAt(i);)i++;if(n-=i,o-=i,0===n)return o;let l,s,f=0,u=0,g=0;for(;u<n;)d[u]=e.charCodeAt(i+u),c[u]=++u;for(;g<o;)for(a=t.charCodeAt(i+g),l=g++,f=g,u=0;u<n;u++)s=a===d[u]?l:l+1,l=c[u],f=c[u]=l>f?s>f?f+1:s:s>l?l+1:s;return f}function s(e){return null!=e}const f=({mobileTiers:c=[0,15,30,60],desktopTiers:d=[0,15,30,60],override:f={},glContext:u,failIfMajorPerformanceCaveat:g=!1,benchmarksURL:h=\"https://unpkg.com/detect-gpu@5.0.41/dist/benchmarks\"}={})=>e(void 0,void 0,void 0,(function*(){const p={};if(n)return {tier:0,type:\"SSR\"};const{isIpad:m=!!(null==o?void 0:o.isIpad),isMobile:v=!!(null==o?void 0:o.isMobile),screenSize:w=window.screen,loadBenchmarks:x=(t=>e(void 0,void 0,void 0,(function*(){const e=yield fetch(`${h}/${t}`).then((e=>e.json()));if(parseInt(e.shift().split(\".\")[0],10)<4)throw new i(\"Detect GPU benchmark data is out of date. Please update to version 4x\");return e})))}=f;let{renderer:A}=f;const P=(e,t,r,n,o)=>({device:o,fps:n,gpu:r,isMobile:v,tier:e,type:t});let S,b=\"\";if(A)A=r(A),S=[A];else {const e=u||function(e,t=!1){const r={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:t,powerPreference:\"high-performance\",stencil:!1};e&&delete r.powerPreference;const n=window.document.createElement(\"canvas\"),o=n.getContext(\"webgl\",r)||n.getContext(\"experimental-webgl\",r);return null!=o?o:void 0}(null==o?void 0:o.isSafari12,g);if(!e)return P(0,\"WEBGL_UNSUPPORTED\");const t=(null==o?void 0:o.isFirefox)?null:e.getExtension(\"WEBGL_debug_renderer_info\");if(A=t?e.getParameter(t.UNMASKED_RENDERER_WEBGL):e.getParameter(e.RENDERER),!A)return P(1,\"FALLBACK\");b=A,A=r(A),S=function(e,t,r){return \"apple gpu\"===t?a(e,t,r):[t]}(e,A,v);}const E=(yield Promise.all(S.map((function(t){var r;return e(this,void 0,void 0,(function*(){const e=(e=>{const t=v?[\"adreno\",\"apple\",\"mali-t\",\"mali\",\"nvidia\",\"powervr\",\"samsung\"]:[\"intel\",\"apple\",\"amd\",\"radeon\",\"nvidia\",\"geforce\",\"adreno\"];for(const r of t)if(e.includes(r))return r})(t);if(!e)return;const n=`${v?\"m\":\"d\"}-${e}${m?\"-ipad\":\"\"}.json`,o=p[n]=null!==(r=p[n])&&void 0!==r?r:x(n);let a;try{a=yield o;}catch(e){if(e instanceof i)throw e;return}const c=function(e){var t;const r=(e=e.replace(/\\([^)]+\\)/,\"\")).match(/\\d+/)||e.match(/(\\W|^)([A-Za-z]{1,3})(\\W|$)/g);return null!==(t=null==r?void 0:r.join(\"\").replace(/\\W|amd/g,\"\"))&&void 0!==t?t:\"\"}(t);let d=a.filter((([,e])=>e===c));d.length||(d=a.filter((([e])=>e.includes(t))));const s=d.length;if(0===s)return;const f=t.split(/[.,()\\[\\]/\\s]/g).sort().filter(((e,t,r)=>0===t||e!==r[t-1])).join(\" \");let u,[g,,,,h]=s>1?d.map((e=>[e,l(f,e[2])])).sort((([,e],[,t])=>e-t))[0][0]:d[0],A=Number.MAX_VALUE;const{devicePixelRatio:P}=window,S=w.width*P*w.height*P;for(const e of h){const[t,r]=e,n=t*r,o=Math.abs(S-n);o<A&&(A=o,u=e);}if(!u)return;const[,,b,E]=u;return [A,b,g,E]}))})))).filter(s).sort((([e=Number.MAX_VALUE,t],[r=Number.MAX_VALUE,n])=>e===r?t-n:e-r));if(!E.length){const e=t.find((e=>A.includes(e)));return e?P(0,\"BLOCKLISTED\",e):P(1,\"FALLBACK\",`${A} (${b})`)}const[,y,C,L]=E[0];if(-1===y)return P(0,\"BLOCKLISTED\",C,y,L);const M=v?c:d;let $=0;for(let e=0;e<M.length;e++)y>=M[e]&&($=e);return P($,\"BENCHMARK\",C,y,L)}));\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n/** @type {import('.')} */\nvar esErrors = Error;\n\n/** @type {import('./eval')} */\nvar _eval = EvalError;\n\n/** @type {import('./range')} */\nvar range = RangeError;\n\n/** @type {import('./ref')} */\nvar ref = ReferenceError;\n\n/** @type {import('./syntax')} */\nvar syntax = SyntaxError;\n\n/** @type {import('./type')} */\nvar type = TypeError;\n\n/** @type {import('./uri')} */\nvar uri = URIError;\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nvar shams = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = shams;\n\nvar hasSymbols$1 = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n\nvar test = {\n\tfoo: {}\n};\n\nvar $Object = Object;\n\nvar hasProto$1 = function hasProto() {\n\treturn { __proto__: test }.foo === test.foo && !({ __proto__: null } instanceof $Object);\n};\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr$1 = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nvar implementation$1 = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr$1.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n\nvar implementation = implementation$1;\n\nvar functionBind = Function.prototype.bind || implementation;\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind$1 = functionBind;\n\n/** @type {import('.')} */\nvar hasown = bind$1.call(call, $hasOwn);\n\nvar undefined$1;\n\nvar $Error = esErrors;\nvar $EvalError = _eval;\nvar $RangeError = range;\nvar $ReferenceError = ref;\nvar $SyntaxError$1 = syntax;\nvar $TypeError$3 = type;\nvar $URIError = uri;\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD$1 = Object.getOwnPropertyDescriptor;\nif ($gOPD$1) {\n\ttry {\n\t\t$gOPD$1({}, '');\n\t} catch (e) {\n\t\t$gOPD$1 = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError$3();\n};\nvar ThrowTypeError = $gOPD$1\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD$1(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = hasSymbols$1();\nvar hasProto = hasProto$1();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined$1 : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined$1 : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined$1 : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined$1,\n\t'%AsyncFromSyncIteratorPrototype%': undefined$1,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined$1 : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined$1 : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined$1 : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined$1 : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined$1 : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined$1 : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined$1 : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined$1 : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined$1 : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined$1 : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined$1 : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined$1,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined$1,\n\t'%Map%': typeof Map === 'undefined' ? undefined$1 : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined$1 : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined$1 : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined$1 : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined$1 : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined$1 : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined$1 : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined$1 : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined$1,\n\t'%Symbol%': hasSymbols ? Symbol : undefined$1,\n\t'%SyntaxError%': $SyntaxError$1,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError$3,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined$1 : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined$1 : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined$1 : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined$1 : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined$1 : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined$1 : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined$1 : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = functionBind;\nvar hasOwn$1 = hasown;\nvar $concat$1 = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace$1 = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError$1('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError$1('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace$1(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace$1(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn$1(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn$1(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError$3('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError$1('intrinsic ' + name + ' does not exist!');\n};\n\nvar getIntrinsic = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError$3('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError$3('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError$1('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat$1([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError$1('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn$1(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError$3('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined$1;\n\t\t\t}\n\t\t\tif ($gOPD$1 && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD$1(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn$1(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n\nvar callBind$1 = {exports: {}};\n\nvar esDefineProperty;\nvar hasRequiredEsDefineProperty;\n\nfunction requireEsDefineProperty () {\n\tif (hasRequiredEsDefineProperty) return esDefineProperty;\n\thasRequiredEsDefineProperty = 1;\n\n\tvar GetIntrinsic = getIntrinsic;\n\n\t/** @type {import('.')} */\n\tvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true) || false;\n\tif ($defineProperty) {\n\t\ttry {\n\t\t\t$defineProperty({}, 'a', { value: 1 });\n\t\t} catch (e) {\n\t\t\t// IE 8 has a broken defineProperty\n\t\t\t$defineProperty = false;\n\t\t}\n\t}\n\n\tesDefineProperty = $defineProperty;\n\treturn esDefineProperty;\n}\n\nvar GetIntrinsic$3 = getIntrinsic;\n\nvar $gOPD = GetIntrinsic$3('%Object.getOwnPropertyDescriptor%', true);\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nvar gopd$1 = $gOPD;\n\nvar $defineProperty$1 = requireEsDefineProperty();\n\nvar $SyntaxError = syntax;\nvar $TypeError$2 = type;\n\nvar gopd = gopd$1;\n\n/** @type {import('.')} */\nvar defineDataProperty = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError$2('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError$2('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError$2('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError$2('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError$2('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError$2('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty$1) {\n\t\t$defineProperty$1(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n\nvar $defineProperty = requireEsDefineProperty();\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nvar hasPropertyDescriptors_1 = hasPropertyDescriptors;\n\nvar GetIntrinsic$2 = getIntrinsic;\nvar define = defineDataProperty;\nvar hasDescriptors = hasPropertyDescriptors_1();\nvar gOPD = gopd$1;\n\nvar $TypeError$1 = type;\nvar $floor$1 = GetIntrinsic$2('%Math.floor%');\n\n/** @type {import('.')} */\nvar setFunctionLength = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError$1('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor$1(length) !== length) {\n\t\tthrow new $TypeError$1('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n\ncallBind$1.exports;\n\n(function (module) {\n\n\tvar bind = functionBind;\n\tvar GetIntrinsic = getIntrinsic;\n\tvar setFunctionLength$1 = setFunctionLength;\n\n\tvar $TypeError = type;\n\tvar $apply = GetIntrinsic('%Function.prototype.apply%');\n\tvar $call = GetIntrinsic('%Function.prototype.call%');\n\tvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\n\tvar $defineProperty = requireEsDefineProperty();\n\tvar $max = GetIntrinsic('%Math.max%');\n\n\tmodule.exports = function callBind(originalFunction) {\n\t\tif (typeof originalFunction !== 'function') {\n\t\t\tthrow new $TypeError('a function is required');\n\t\t}\n\t\tvar func = $reflectApply(bind, $call, arguments);\n\t\treturn setFunctionLength$1(\n\t\t\tfunc,\n\t\t\t1 + $max(0, originalFunction.length - (arguments.length - 1)),\n\t\t\ttrue\n\t\t);\n\t};\n\n\tvar applyBind = function applyBind() {\n\t\treturn $reflectApply(bind, $apply, arguments);\n\t};\n\n\tif ($defineProperty) {\n\t\t$defineProperty(module.exports, 'apply', { value: applyBind });\n\t} else {\n\t\tmodule.exports.apply = applyBind;\n\t} \n} (callBind$1));\n\nvar callBindExports = callBind$1.exports;\n\nvar GetIntrinsic$1 = getIntrinsic;\n\nvar callBind = callBindExports;\n\nvar $indexOf = callBind(GetIntrinsic$1('String.prototype.indexOf'));\n\nvar callBound$1 = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic$1(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n\nvar util_inspect = require$$0.inspect;\n\nvar hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar $match = String.prototype.match;\nvar $slice = String.prototype.slice;\nvar $replace = String.prototype.replace;\nvar $toUpperCase = String.prototype.toUpperCase;\nvar $toLowerCase = String.prototype.toLowerCase;\nvar $test = RegExp.prototype.test;\nvar $concat = Array.prototype.concat;\nvar $join = Array.prototype.join;\nvar $arrSlice = Array.prototype.slice;\nvar $floor = Math.floor;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\n// ie, `has-tostringtag/shams\nvar toStringTag = typeof Symbol === 'function' && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? 'object' : 'symbol')\n    ? Symbol.toStringTag\n    : null;\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nfunction addNumericSeparator(num, str) {\n    if (\n        num === Infinity\n        || num === -Infinity\n        || num !== num\n        || (num && num > -1000 && num < 1000)\n        || $test.call(/e/, str)\n    ) {\n        return str;\n    }\n    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;\n    if (typeof num === 'number') {\n        var int = num < 0 ? -$floor(-num) : $floor(num); // trunc(num)\n        if (int !== num) {\n            var intStr = String(int);\n            var dec = $slice.call(str, intStr.length + 1);\n            return $replace.call(intStr, sepRegex, '$&_') + '.' + $replace.call($replace.call(dec, /([0-9]{3})/g, '$&_'), /_$/, '');\n        }\n    }\n    return $replace.call(str, sepRegex, '$&_');\n}\n\nvar utilInspect = util_inspect;\nvar inspectCustom = utilInspect.custom;\nvar inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;\n\nvar objectInspect = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has$3(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has$3(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has$3(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean' && customInspect !== 'symbol') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true`, `false`, or `\\'symbol\\'`');\n    }\n\n    if (\n        has$3(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n    if (has$3(opts, 'numericSeparator') && typeof opts.numericSeparator !== 'boolean') {\n        throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');\n    }\n    var numericSeparator = opts.numericSeparator;\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        var str = String(obj);\n        return numericSeparator ? addNumericSeparator(obj, str) : str;\n    }\n    if (typeof obj === 'bigint') {\n        var bigIntStr = String(obj) + 'n';\n        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray$3(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = $arrSlice.call(seen);\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has$3(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function' && !isRegExp$1(obj)) { // in older engines, regexes are callable\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + $join.call(keys, ', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + $toLowerCase.call(String(obj.nodeName));\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + $toLowerCase.call(String(obj.nodeName)) + '>';\n        return s;\n    }\n    if (isArray$3(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + $join.call(xs, ', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (!('cause' in Error.prototype) && 'cause' in obj && !isEnumerable.call(obj, 'cause')) {\n            return '{ [' + String(obj) + '] ' + $join.call($concat.call('[cause]: ' + inspect(obj.cause), parts), ', ') + ' }';\n        }\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + $join.call(parts, ', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function' && utilInspect) {\n            return utilInspect(obj, { depth: maxDepth - depth });\n        } else if (customInspect !== 'symbol' && typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        if (mapForEach) {\n            mapForEach.call(obj, function (value, key) {\n                mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n            });\n        }\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        if (setForEach) {\n            setForEach.call(obj, function (value) {\n                setParts.push(inspect(value, obj));\n            });\n        }\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    // note: in IE 8, sometimes `global !== window` but both are the prototypes of each other\n    /* eslint-env browser */\n    if (typeof window !== 'undefined' && obj === window) {\n        return '{ [object Window] }';\n    }\n    if (\n        (typeof globalThis !== 'undefined' && obj === globalThis)\n        || (typeof commonjsGlobal !== 'undefined' && obj === commonjsGlobal)\n    ) {\n        return '{ [object globalThis] }';\n    }\n    if (!isDate(obj) && !isRegExp$1(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + $join.call($concat.call([], stringTag || [], protoTag || []), ': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + $join.call(ys, ', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return $replace.call(String(s), /\"/g, '&quot;');\n}\n\nfunction isArray$3(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp$1(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has$3(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = $match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = $replace.call($replace.call(str, /(['\\\\])/g, '\\\\$1'), /[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + $toUpperCase.call(n.toString(16));\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = $join.call(Array(opts.indent + 1), ' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: $join.call(Array(depth + 1), baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + $join.call(xs, ',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray$3(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has$3(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has$3(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ($test.call(/[^\\w$]/, key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n\nvar GetIntrinsic = getIntrinsic;\nvar callBound = callBound$1;\nvar inspect = objectInspect;\n\nvar $TypeError = type;\nvar $WeakMap = GetIntrinsic('%WeakMap%', true);\nvar $Map = GetIntrinsic('%Map%', true);\n\nvar $weakMapGet = callBound('WeakMap.prototype.get', true);\nvar $weakMapSet = callBound('WeakMap.prototype.set', true);\nvar $weakMapHas = callBound('WeakMap.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSet = callBound('Map.prototype.set', true);\nvar $mapHas = callBound('Map.prototype.has', true);\n\n/*\n* This function traverses the list returning the node corresponding to the given key.\n*\n* That node is also moved to the head of the list, so that if it's accessed again we don't need to traverse the whole list. By doing so, all the recently used nodes can be accessed relatively quickly.\n*/\n/** @type {import('.').listGetNode} */\nvar listGetNode = function (list, key) { // eslint-disable-line consistent-return\n\t/** @type {typeof list | NonNullable<(typeof list)['next']>} */\n\tvar prev = list;\n\t/** @type {(typeof list)['next']} */\n\tvar curr;\n\tfor (; (curr = prev.next) !== null; prev = curr) {\n\t\tif (curr.key === key) {\n\t\t\tprev.next = curr.next;\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\tcurr.next = /** @type {NonNullable<typeof list.next>} */ (list.next);\n\t\t\tlist.next = curr; // eslint-disable-line no-param-reassign\n\t\t\treturn curr;\n\t\t}\n\t}\n};\n\n/** @type {import('.').listGet} */\nvar listGet = function (objects, key) {\n\tvar node = listGetNode(objects, key);\n\treturn node && node.value;\n};\n/** @type {import('.').listSet} */\nvar listSet = function (objects, key, value) {\n\tvar node = listGetNode(objects, key);\n\tif (node) {\n\t\tnode.value = value;\n\t} else {\n\t\t// Prepend the new node to the beginning of the list\n\t\tobjects.next = /** @type {import('.').ListNode<typeof value>} */ ({ // eslint-disable-line no-param-reassign, no-extra-parens\n\t\t\tkey: key,\n\t\t\tnext: objects.next,\n\t\t\tvalue: value\n\t\t});\n\t}\n};\n/** @type {import('.').listHas} */\nvar listHas = function (objects, key) {\n\treturn !!listGetNode(objects, key);\n};\n\n/** @type {import('.')} */\nvar sideChannel = function getSideChannel() {\n\t/** @type {WeakMap<object, unknown>} */ var $wm;\n\t/** @type {Map<object, unknown>} */ var $m;\n\t/** @type {import('.').RootNode<unknown>} */ var $o;\n\n\t/** @type {import('.').Channel} */\n\tvar channel = {\n\t\tassert: function (key) {\n\t\t\tif (!channel.has(key)) {\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\n\t\t\t}\n\t\t},\n\t\tget: function (key) { // eslint-disable-line consistent-return\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapGet($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapGet($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listGet($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thas: function (key) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapHas($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapHas($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listHas($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif (!$wm) {\n\t\t\t\t\t$wm = new $WeakMap();\n\t\t\t\t}\n\t\t\t\t$weakMapSet($wm, key, value);\n\t\t\t} else if ($Map) {\n\t\t\t\tif (!$m) {\n\t\t\t\t\t$m = new $Map();\n\t\t\t\t}\n\t\t\t\t$mapSet($m, key, value);\n\t\t\t} else {\n\t\t\t\tif (!$o) {\n\t\t\t\t\t// Initialize the linked list as an empty node, so that we don't have to special-case handling of the first node: we can always refer to it as (previous node).next, instead of something like (list).head\n\t\t\t\t\t$o = { key: {}, next: null };\n\t\t\t\t}\n\t\t\t\tlistSet($o, key, value);\n\t\t\t}\n\t\t}\n\t};\n\treturn channel;\n};\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nvar formats$3 = {\n    'default': Format.RFC3986,\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return String(value);\n        }\n    },\n    RFC1738: Format.RFC1738,\n    RFC3986: Format.RFC3986\n};\n\nvar formats$2 = formats$3;\n\nvar has$2 = Object.prototype.hasOwnProperty;\nvar isArray$2 = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray$2(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray$2(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has$2.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray$2(target) && !isArray$2(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray$2(target) && isArray$2(source)) {\n        source.forEach(function (item, i) {\n            if (has$2.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has$2.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar limit = 1024;\n\n/* eslint operator-linebreak: [2, \"before\"] */\n\nvar encode = function encode(str, defaultEncoder, charset, kind, format) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var j = 0; j < string.length; j += limit) {\n        var segment = string.length >= limit ? string.slice(j, j + limit) : string;\n        var arr = [];\n\n        for (var i = 0; i < segment.length; ++i) {\n            var c = segment.charCodeAt(i);\n            if (\n                c === 0x2D // -\n                || c === 0x2E // .\n                || c === 0x5F // _\n                || c === 0x7E // ~\n                || (c >= 0x30 && c <= 0x39) // 0-9\n                || (c >= 0x41 && c <= 0x5A) // a-z\n                || (c >= 0x61 && c <= 0x7A) // A-Z\n                || (format === formats$2.RFC1738 && (c === 0x28 || c === 0x29)) // ( )\n            ) {\n                arr[arr.length] = segment.charAt(i);\n                continue;\n            }\n\n            if (c < 0x80) {\n                arr[arr.length] = hexTable[c];\n                continue;\n            }\n\n            if (c < 0x800) {\n                arr[arr.length] = hexTable[0xC0 | (c >> 6)]\n                    + hexTable[0x80 | (c & 0x3F)];\n                continue;\n            }\n\n            if (c < 0xD800 || c >= 0xE000) {\n                arr[arr.length] = hexTable[0xE0 | (c >> 12)]\n                    + hexTable[0x80 | ((c >> 6) & 0x3F)]\n                    + hexTable[0x80 | (c & 0x3F)];\n                continue;\n            }\n\n            i += 1;\n            c = 0x10000 + (((c & 0x3FF) << 10) | (segment.charCodeAt(i) & 0x3FF));\n\n            arr[arr.length] = hexTable[0xF0 | (c >> 18)]\n                + hexTable[0x80 | ((c >> 12) & 0x3F)]\n                + hexTable[0x80 | ((c >> 6) & 0x3F)]\n                + hexTable[0x80 | (c & 0x3F)];\n        }\n\n        out += arr.join('');\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray$2(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nvar utils$2 = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n\nvar getSideChannel = sideChannel;\nvar utils$1 = utils$2;\nvar formats$1 = formats$3;\nvar has$1 = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray$1 = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray$1(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats$1['default'];\nvar defaults$1 = {\n    addQueryPrefix: false,\n    allowDots: false,\n    allowEmptyArrays: false,\n    arrayFormat: 'indices',\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encodeDotInKeys: false,\n    encoder: utils$1.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats$1.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar sentinel = {};\n\nvar stringify$1 = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    commaRoundTrip,\n    allowEmptyArrays,\n    strictNullHandling,\n    skipNulls,\n    encodeDotInKeys,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    format,\n    formatter,\n    encodeValuesOnly,\n    charset,\n    sideChannel\n) {\n    var obj = object;\n\n    var tmpSc = sideChannel;\n    var step = 0;\n    var findFlag = false;\n    while ((tmpSc = tmpSc.get(sentinel)) !== void undefined && !findFlag) {\n        // Where object last appeared in the ref tree\n        var pos = tmpSc.get(object);\n        step += 1;\n        if (typeof pos !== 'undefined') {\n            if (pos === step) {\n                throw new RangeError('Cyclic object value');\n            } else {\n                findFlag = true; // Break while\n            }\n        }\n        if (typeof tmpSc.get(sentinel) === 'undefined') {\n            step = 0;\n        }\n    }\n\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray$1(obj)) {\n        obj = utils$1.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        });\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults$1.encoder, charset, 'key', format) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils$1.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults$1.encoder, charset, 'key', format);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults$1.encoder, charset, 'value', format))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (generateArrayPrefix === 'comma' && isArray$1(obj)) {\n        // we need to join elements in\n        if (encodeValuesOnly && encoder) {\n            obj = utils$1.maybeMap(obj, encoder);\n        }\n        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : void undefined }];\n    } else if (isArray$1(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    var encodedPrefix = encodeDotInKeys ? prefix.replace(/\\./g, '%2E') : prefix;\n\n    var adjustedPrefix = commaRoundTrip && isArray$1(obj) && obj.length === 1 ? encodedPrefix + '[]' : encodedPrefix;\n\n    if (allowEmptyArrays && isArray$1(obj) && obj.length === 0) {\n        return adjustedPrefix + '[]';\n    }\n\n    for (var j = 0; j < objKeys.length; ++j) {\n        var key = objKeys[j];\n        var value = typeof key === 'object' && typeof key.value !== 'undefined' ? key.value : obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var encodedKey = allowDots && encodeDotInKeys ? key.replace(/\\./g, '%2E') : key;\n        var keyPrefix = isArray$1(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(adjustedPrefix, encodedKey) : adjustedPrefix\n            : adjustedPrefix + (allowDots ? '.' + encodedKey : '[' + encodedKey + ']');\n\n        sideChannel.set(object, step);\n        var valueSideChannel = getSideChannel();\n        valueSideChannel.set(sentinel, sideChannel);\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            commaRoundTrip,\n            allowEmptyArrays,\n            strictNullHandling,\n            skipNulls,\n            encodeDotInKeys,\n            generateArrayPrefix === 'comma' && encodeValuesOnly && isArray$1(obj) ? null : encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            format,\n            formatter,\n            encodeValuesOnly,\n            charset,\n            valueSideChannel\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults$1;\n    }\n\n    if (typeof opts.allowEmptyArrays !== 'undefined' && typeof opts.allowEmptyArrays !== 'boolean') {\n        throw new TypeError('`allowEmptyArrays` option can only be `true` or `false`, when provided');\n    }\n\n    if (typeof opts.encodeDotInKeys !== 'undefined' && typeof opts.encodeDotInKeys !== 'boolean') {\n        throw new TypeError('`encodeDotInKeys` option can only be `true` or `false`, when provided');\n    }\n\n    if (opts.encoder !== null && typeof opts.encoder !== 'undefined' && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults$1.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats$1['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has$1.call(formats$1.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats$1.formatters[format];\n\n    var filter = defaults$1.filter;\n    if (typeof opts.filter === 'function' || isArray$1(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    var arrayFormat;\n    if (opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if ('indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = defaults$1.arrayFormat;\n    }\n\n    if ('commaRoundTrip' in opts && typeof opts.commaRoundTrip !== 'boolean') {\n        throw new TypeError('`commaRoundTrip` must be a boolean, or absent');\n    }\n\n    var allowDots = typeof opts.allowDots === 'undefined' ? opts.encodeDotInKeys === true ? true : defaults$1.allowDots : !!opts.allowDots;\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults$1.addQueryPrefix,\n        allowDots: allowDots,\n        allowEmptyArrays: typeof opts.allowEmptyArrays === 'boolean' ? !!opts.allowEmptyArrays : defaults$1.allowEmptyArrays,\n        arrayFormat: arrayFormat,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults$1.charsetSentinel,\n        commaRoundTrip: opts.commaRoundTrip,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults$1.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults$1.encode,\n        encodeDotInKeys: typeof opts.encodeDotInKeys === 'boolean' ? opts.encodeDotInKeys : defaults$1.encodeDotInKeys,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults$1.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults$1.encodeValuesOnly,\n        filter: filter,\n        format: format,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults$1.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults$1.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults$1.strictNullHandling\n    };\n};\n\nvar stringify_1 = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray$1(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[options.arrayFormat];\n    var commaRoundTrip = generateArrayPrefix === 'comma' && options.commaRoundTrip;\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    var sideChannel = getSideChannel();\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify$1(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            commaRoundTrip,\n            options.allowEmptyArrays,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encodeDotInKeys,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.format,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset,\n            sideChannel\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n\nvar utils = utils$2;\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowEmptyArrays: false,\n    allowPrototypes: false,\n    allowSparse: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decodeDotInKeys: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    duplicates: 'combine',\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the  character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the  character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = { __proto__: null };\n\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    cleanStr = cleanStr.replace(/%5B/gi, '[').replace(/%5D/gi, ']');\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        var existing = has.call(obj, key);\n        if (existing && options.duplicates === 'combine') {\n            obj[key] = utils.combine(obj[key], val);\n        } else if (!existing || options.duplicates === 'last') {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = options.allowEmptyArrays && (leaf === '' || (options.strictNullHandling && leaf === null))\n                ? []\n                : [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var decodedRoot = options.decodeDotInKeys ? cleanRoot.replace(/%2E/g, '.') : cleanRoot;\n            var index = parseInt(decodedRoot, 10);\n            if (!options.parseArrays && decodedRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== decodedRoot\n                && String(index) === decodedRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else if (decodedRoot !== '__proto__') {\n                obj[decodedRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (typeof opts.allowEmptyArrays !== 'undefined' && typeof opts.allowEmptyArrays !== 'boolean') {\n        throw new TypeError('`allowEmptyArrays` option can only be `true` or `false`, when provided');\n    }\n\n    if (typeof opts.decodeDotInKeys !== 'undefined' && typeof opts.decodeDotInKeys !== 'boolean') {\n        throw new TypeError('`decodeDotInKeys` option can only be `true` or `false`, when provided');\n    }\n\n    if (opts.decoder !== null && typeof opts.decoder !== 'undefined' && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    var duplicates = typeof opts.duplicates === 'undefined' ? defaults.duplicates : opts.duplicates;\n\n    if (duplicates !== 'combine' && duplicates !== 'first' && duplicates !== 'last') {\n        throw new TypeError('The duplicates option must be either combine, first, or last');\n    }\n\n    var allowDots = typeof opts.allowDots === 'undefined' ? opts.decodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;\n\n    return {\n        allowDots: allowDots,\n        allowEmptyArrays: typeof opts.allowEmptyArrays === 'boolean' ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        allowSparse: typeof opts.allowSparse === 'boolean' ? opts.allowSparse : defaults.allowSparse,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decodeDotInKeys: typeof opts.decodeDotInKeys === 'boolean' ? opts.decodeDotInKeys : defaults.decodeDotInKeys,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        duplicates: duplicates,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nvar parse$1 = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    if (options.allowSparse === true) {\n        return obj;\n    }\n\n    return utils.compact(obj);\n};\n\nvar stringify = stringify_1;\nvar parse = parse$1;\nvar formats = formats$3;\n\nvar lib = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n\nfunction checkDownloadSpeed(baseUrl) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const startTime = performance.now();\n        try {\n            const response = yield fetch(baseUrl, { signal: AbortSignal.timeout(4000) });\n            const data = yield response.blob();\n            const endTime = performance.now();\n            const duration = (endTime - startTime) / 1000; // convert to seconds\n            const sizeInBytes = data.size;\n            const sizeInMegabits = (sizeInBytes * 8) / (1024 * 1024); // convert to megabits\n            const speedMbps = sizeInMegabits / duration;\n            return speedMbps;\n        }\n        catch (error) {\n            if (['TimeoutError', 'AbortError'].includes(error.name)) {\n                return 0;\n            }\n            return 10;\n        }\n    });\n}\n\nfunction trackEvent(event, data) {\n    try {\n        track(event, data);\n    }\n    catch (error) {\n        console.error('Failed to track event', error);\n    }\n}\n\nconst TIER_PRESETS = {\n    1: {\n        quality: 'low'\n    },\n    2: {\n        quality: 'medium'\n    },\n    3: {\n        quality: 'high'\n    }\n};\n// in mbps\nconst networkTierGrades = {\n    1: 0.7,\n    2: 2,\n    3: Infinity\n};\nclass DeviceDetectorService {\n    constructor(props) {\n        this.tierPresets = TIER_PRESETS;\n        this.gpuTierResult = props.gpuTierResult;\n        this.networkTierResult = props.networkTierResult;\n        if (props.tierPresets) {\n            this.tierPresets = Object.assign(Object.assign({}, TIER_PRESETS), props.tierPresets);\n        }\n        trackEvent('device detected', this.result);\n    }\n    get result() {\n        return {\n            gpu: this.gpuTierResult,\n            network: this.networkTierResult\n        };\n    }\n    toQueryString() {\n        return lib.stringify(this.tierPresets[Math.min(this.gpuTierResult.tier, this.networkTierResult.tier)]);\n    }\n}\nfunction useDeviceDetector(options) {\n    const [deviceDetector, setDeviceDetector] = useState();\n    useEffect(() => {\n        const fetchDeviceDetector = () => __awaiter(this, void 0, void 0, function* () {\n            let gpuTierResult = { type: 'BENCHMARK', tier: 3 };\n            let networkTierResult = { downloadSpeed: 100, tier: 3 };\n            try {\n                gpuTierResult = yield f();\n                // Safari fails to detect the GPU tier, so we set it to the highest tier\n                if (gpuTierResult.type !== 'BENCHMARK') {\n                    gpuTierResult.tier = 3;\n                }\n                const downloadSpeed = yield checkDownloadSpeed('https://readyplayerme-avatars.s3.amazonaws.com/benchmark.glb');\n                let tier = 3;\n                if (downloadSpeed < networkTierGrades[1]) {\n                    tier = 1;\n                }\n                else if (downloadSpeed < networkTierGrades[2]) {\n                    tier = 2;\n                }\n                networkTierResult = {\n                    downloadSpeed,\n                    tier\n                };\n            }\n            catch (error) {\n                console.error(error);\n            }\n            setDeviceDetector(new DeviceDetectorService(Object.assign({ gpuTierResult, networkTierResult }, options)));\n        });\n        fetchDeviceDetector();\n    }, []);\n    return deviceDetector;\n}\n\nexport { AnimationModelContainer as AnimationModel, AvatarWrapper as Avatar, CAMERA, EnvironmentModelContainer as EnvironmentModel, Exhibit, FloatingModelContainer as FloatingModel, FloorReflection, HalfBodyModelContainer as HalfBodyModel, PoseModelContainer as PoseModel, StaticModelContainer as StaticModel, useDeviceDetector };\n"],"names":["findSpan","p","u","U","n","length","low","high","mid","Math","floor","calcBasisFunctions","span","N","left","right","j","saved","r","rv","lv","temp","calcKoverI","k","i","nom","denom","calcNURBSDerivatives","P","nd","Pders","du","CK","nders","zeroArr","ders","slice","ndu","r2","s1","s2","a","d","rk","pk","j2","j3","calcBasisFunctionDerivatives","Pw","point","clone","w","x","y","z","multiplyScalar","add","Vector4","calcBSplineDerivatives","Aders","wders","Vector3","v","sub","divideScalar","calcRationalCurveDerivatives","NURBSCurve","Curve","constructor","degree","knots","controlPoints","startKnot","endKnot","super","this","getPoint","t","optionalTarget","hpoint","C","Nj","wNj","calcBSplinePoint","set","getTangent","tangent","copy","normalize","UV1","version","fbxTree","connections","sceneGraph","FBXLoader","Loader","manager","load","url","onLoad","onProgress","onError","scope","path","LoaderUtils","extractUrlBase","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","buffer","parse","e","console","error","itemError","FBXBuffer","CORRECT","byteLength","convertArrayBufferToString","isFbxFormatBinary","BinaryParser","FBXText","text","cursor","read","offset","result","isFbxFormatASCII","Error","getFbxVersion","TextParser","textureLoader","TextureLoader","resourcePath","setCrossOrigin","crossOrigin","FBXTreeParser","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","GeometryParser","parseScene","connectionMap","Map","Connections","forEach","rawConnection","fromID","toID","relationship","has","parents","children","parentRelationship","ID","get","push","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","parseInt","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","base64Content","image","parseImage","id","filename","split","pop","content","fileName","extension","lastIndexOf","toLowerCase","type","getHandler","warn","array","Uint8Array","window","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","name","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","value","valueV","wrapS","RepeatWrapping","ClampToEdgeWrapping","wrapT","values","Scaling","repeat","currentPath","indexOf","FileName","materialMap","materialNodes","Material","material","parseMaterial","materialNode","ShadingModel","parameters","parseParameters","MeshPhongMaterial","MeshLambertMaterial","setValues","BumpFactor","bumpScale","Diffuse","color","Color","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","parseFloat","Opacity","opacity","transparent","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","child","bumpMap","getTexture","aoMap","map","colorSpace","encoding","displacementMap","emissiveMap","normalMap","envMap","mapping","EquirectangularReflectionMapping","specularMap","alphaMap","LayeredTexture","skeletons","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","indices","weights","transformLink","Matrix4","TransformLink","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","filter","child2","Group","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","connection","parent","bindSkeleton","createAmbientLight","traverse","node","userData","transformData","parentMatrix","matrix","parentMatrixWorld","matrixWorld","transform","generateTransform","applyMatrix4","updateWorldMatrix","animations","AnimationParser","isGroup","buildSkeleton","createCamera","createLight","createMesh","createCurve","Bone","PropertyBinding","sanitizeNodeName","getTransformData","bone","subBone","cameraAttribute","attr","NodeAttribute","Object3D","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","width","innerWidth","height","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","PerspectiveCamera","setFocalLength","OrthographicCamera","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","distance","FarAttenuationEnd","EnableFarAttenuation","decay","PointLight","DirectionalLight","angle","PI","InnerAngle","MathUtils","degToRad","penumbra","OuterAngle","max","SpotLight","CastShadows","castShadow","geometry","attributes","material2","vertexColors","FBX_Deformer","SkinnedMesh","normalizeSkinWeights","Mesh","reduce","geo","LineBasicMaterial","linewidth","Line","inheritType","InheritType","eulerOrder","getEulerOrder","RotationOrder","translation","Lcl_Translation","preRotation","PreRotation","rotation","Lcl_Rotation","postRotation","PostRotation","scale","Lcl_Scaling","scalingOffset","ScalingOffset","scalingPivot","ScalingPivot","rotationOffset","RotationOffset","rotationPivot","RotationPivot","lookAtTarget","pos","target","position","lookAt","bindMatrices","parsePoseNodes","geoConnParent","bind","Skeleton","BindPoseNode","Pose","NbPoseNodes","poseNodes","PoseNode","Array","isArray","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","g","b","AmbientLight","geoNodes","Geometry","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","skeleton2","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","BufferGeometry","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","Float32BufferAttribute","vertex","setAttribute","colors","Uint16BufferAttribute","weightsIndices","vertexWeights","normal","normalMatrix","Matrix3","getNormalMatrix","normalAttribute","applyNormalMatrix","uvs","uvBuffer","concat","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","addGroup","groups","lastGroup","lastIndex","start","count","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","uv","UV","parseUVs","weightTable","index","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","data","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","morphTargetsRelative","morphAttributes","rawTarget","morphGeoNode","genMorphGeometry","morphPositionsSparse","morphPositions","Float32Array","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","order","Order","isNaN","KnotVector","pointsValues","Points","l","Form","points","getPoints","setFromPoints","animationClips","rawClips","parseClips","key","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","match","curveNode","curves","rawCurves","animationCurve","times","KeyTime","convertFBXTimeToSeconds","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","toString","modelName","initialPosition","initialRotation","initialScale","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","tracks","rawTracks","generateTracks","AnimationClip","Quaternion","decompose","toArray","Euler","setFromQuaternion","T","Object","keys","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","setFromEuler","invert","quaternion","euler","quaternionValues","premultiply","multiply","QuaternionKeyframeTrack","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","sort","targetIndex","lastValue","currentValue","prevValue","xIndex","yIndex","zIndex","time","xValue","yValue","zValue","curve","valuesSpan","absoluteSpan","abs","numSubIntervals","step","nextValue","initialTime","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","FBXTree","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","property","nodeName","trim","replace","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","from","to","rest","elem","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","type2","flag","reader","BinaryReader","skip","getUint32","endOfContent","parseNode","size","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","unzlibSync","reader2","littleEndian","dv","DataView","nullByte","decodeText","dataArray","infoObject","tempEuler","tempVec","lTranslationM","lPreRotationM","lRotationM","lPostRotationM","lScalingM","lScalingPivotM","lScalingOffsetM","lRotationOffsetM","lRotationPivotM","lParentGX","lParentLX","lGlobalT","setPosition","makeRotationFromEuler","lLRM","lParentGRM","extractRotation","lParentTM","copyPosition","lParentGRSM","lParentGSM","lLSM","lGlobalRS","lParentLSM_inv","setFromMatrixScale","lParentGSM_noLocal","lRotationPivotM_inv","lScalingPivotM_inv","lTransform","lLocalTWithAllPivotAndOffsetInfo","lGlobalTranslation","enums","a1","a2","environmentPresets","hub","sunset","dawn","night","warehouse","forest","apartment","studio","city","park","lobby","soft","Environment","_ref","environment","enablePostProcessing","config","useMemo","files","environmentIntensity","React","Environment$1","__rest","s","prototype","hasOwnProperty","call","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","generator","Promise","resolve","reject","fulfilled","next","rejected","done","then","apply","SuppressedError","MeshoptDecoder","detector","wasmpack","WebAssembly","supported","instance","wasm","validate","ready","instantiate","unpack","exports","__wasm_call_ctors","ch","charCodeAt","write","decode","fun","source","sbrk","count4","tp","sp","heap","memory","res","subarray","filters","NONE","OCTAHEDRAL","QUATERNION","EXPONENTIAL","decoders","ATTRIBUTES","TRIANGLES","INDICES","workers","requestId","createWorker","worker","object","Worker","pending","requests","onmessage","event","action","initWorkers","workerProcess","blob","revokeObjectURL","mode","self","postMessage","useWorkers","decodeVertexBuffer","meshopt_decodeVertexBuffer","decodeIndexBuffer","meshopt_decodeIndexBuffer","decodeIndexSequence","meshopt_decodeIndexSequence","decodeGltfBuffer","decodeGltfBufferAsync","decodeWorker","ANIMATION_TARGET_TYPE","KHR_ANIMATION_POINTER","INTERPOLATION","CUBICSPLINE","undefined","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","find","findNode","_havePatchedPropertyBindings","GLTFAnimationPointerExtension","parser","animationPointerResolver","setAnimationPointerResolver","_patchPropertyBindingFindNode","startsWith","remainingPath","substring","nextIndex","uuid","isMesh","endsWith","sections","currentTarget","getObjectByProperty","Number","foundNode","originalFindResult","loadAnimationTargetFromChannel","animationChannel","getDependency","loadAnimationTargetFromChannelWithAnimationPointer","useExtension","extensions","targetProperty","targetId","depPromise","ext","pointer","_tryResolveTargetId","pathIndex","pathStart","pathIndexNode","pathStartNode","pathIndexLight","pathIndexCamera","pathStartCamera","pointerResolver","resolvePath","createAnimationTracksWithAnimationPointer","inputAccessor","outputAccessor","sampler","animationPointerPropertyPath","replaceAll","parts","TypedKeyframeTrack","join","itemSize","ColorKeyframeTrack","interpolation","outputArray","_getArrayFromAccessor","track","_createCubicSplineTrackInterpolant","opacityArray","jl","opacityTrack","loadAnimation","animationIndex","me","json","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","il","channels","channel","samplers","input","output","nodeDependency","all","dependencies","nodes","inputAccessors","outputAccessors","targets","updateMatrix","matrixAutoUpdate","createdTracks","_createAnimationTracks","MIXAMO_PREFIX","fbxLoader","gltfLoader","GLTFLoader","setMeshoptDecoder","loadAnimationClips","animation","arrayBuffer","group","parseAsync","isFbx","loadAsync","loadPathFile","fbx","includes","normaliseFbxAnimations","playMorphTargetAnimation","root","animationClip","assetMixer","AnimationMixer","animationAction","clipAction","setLoop","LoopRepeat","Infinity","play","playMapUvOffsetAnimation","encodedPropertyPath","targetNode","targetMeshes","mesh","animatedMesh","defaultIdleAction","propertyMixers","_propertyBindings","defaultPropertyMixer","binding","rootNode","playAssetIdleAnimation","_a","idleAnimations","assetMixers","idleAnimation","defaultIdleAnimationTrack","updateAssetAnimations","mixers","delta","mixer","update","disposeAssetAnimations","stopAllAction","uncacheRoot","validateSource","every","fileEndExpression","RegExp","uploadFileExpression","gltfModelExpression","test","isValidFormat","isValid","clamp","min","lerp","end","arguments","traverseMaterials","callback","disposeGltfScene","scene","dispose","clear","normaliseMaterialsConfig","bloomConfig","materialConfig","_b","mat","minFilter","LinearFilter","depthWrite","roughness","materialIntensity","useHeadMovement","_ref3","isHalfBody","activeRotation","rotationMargin","Vector2","enabled","rad","currentPos","targetPos","activeDistance","eyeRotationOffsetX","neckBoneRotationOffsetX","mapRange","inMin","inMax","outMin","outMax","useFrame","state","Neck","Head","RightEye","LeftEye","cameraToHeadDistance","camera","distanceTo","cameraRotation","mouse","useEmotion","emotion","useEffect","meshes","morphTargetInfluences","item","resetEmotions","fill","entries","_ref4","shape","shapeId","register","dracoLoader","DRACOLoader","loadGltf","gltf","setDecoderPath","setDRACOLoader","useGltfLoader","suspend","lifespan","usePersistantRotation","refToPreviousScene","useRef","current","Transform","useFallbackScene","setter","previousSceneRef","newScene","buildFallbackScene","useFallback","receiveShadow","attach","remove","buildFallback","triggerCallback","expressions","blink","morphTargetIndex","duration","useIdleExpression","expression","headMesh","Wolf3D_Head","Wolf3D_Avatar","head","selectedExpression","timeout","POSITIVE_INFINITY","animateExpression","useCallback","section","pivot","morphInfluence","sin","setNextInterval","delay","random","clearTimeout","setTimeout","_","hasWindow","keyCount","hasInitialValue","atom","isActuallyWritableAtom","cancelPromiseMap","WeakMap","cancelPromise","promise","cancel","delete","resolvePromise","status","rejectPromise","reason","isEqualAtomValue","is","isEqualAtomError","hasPromiseAtomValue","returnAtomValue","atomState","createStore","atomStateMap","mountedMap","pendingMap","storeListenersRev1","storeListenersRev2","mountedAtoms","Set","getAtomState","setAtomState","freeze","prevAtomState","updateDependencies","nextAtomState","nextDependencies","changed","aState","setAtomValue","isEqualPromiseAtomValue","orig","setAtomValueOrPromise","valueOrPromise","abortPromise","continuePromise","settled","mountDependencies","registerCancelPromise","catch","finally","readAtomState","_ref5","isSync","getter","aState2","init","controller","setSelf","options","signal","AbortController","_len","args","_key","writeAtom","abort","setAtomError","readAtom","canUnmountAtom","mounted","recomputeDependents","dependencyMap","dirtyMap","loop1","dependent","loop2","dirtyCount","isChanged","writeAtomState","_len2","_key2","_len3","args2","_key3","flushed","flushPending","_len4","_key4","mountAtom","initialDependent","aMounted","onMount","onUnmount","_len5","_key5","unmountAtom","prevDependencies","depSet","_ref6","listener","subscribeAtom","addAtom","listeners","delAtom","dev_subscribe_store","rev","dev_get_mounted_atoms","dev_get_atom_state","dev_get_mounted","dev_restore_atoms","defaultStore","globalThis","__JOTAI_PACKAGE_IS_LOADED__","StoreContext","createContext","useStore","store","useContext","Provider","_ref7","storeRef","createElement","use","SpawnEffect","_ref8","onLoadedEffect","onLoadedEffectFinish","ref","effectRunning","setEffectRunning","mountEffectScene","src","mountEffectNode","useGraph","animationLoadedEffect","animationSrc","spawnEffectMixer","Scene","loadedEffect","loop","clampWhenFinished","addEventListener","fadeOut","modelRef","SpawnAnimation","_ref9","avatar","onLoadedAnimationFinish","onLoadedAnimation","animationRunning","setAnimationRunning","avatarNode","animationMixerAvatar","Armature","spawnState","arg","Spawn","_ref0","onSpawnFinish","animationProps","valueFromReducer","storeFromReducer","atomFromReducer","rerender","useReducer","prev","unsub","useDebugValue","useAtomValue","usesMountEffect","usesMountAnimation","_ref1","onLoaded","onSpawnAnimationFinish","bloom","gl","useThree","isTouching","setIsTouching","useState","touchEvent","setTouchEvent","setTouchingOn","TouchEvent","setTouchingOff","onTouchMove","MouseEvent","movementX","round","touches","pageX","domElement","passive","removeEventListener","spawnComponent","StaticModel","_ref13","modelSrc","setModelFallback","StaticModelContainer","fallback","setFallback","Suspense","assign","styleInject","css","insertAt","document","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","styles$1","BASE_DPR","devicePixelRatio","BaseCanvas","_ref15","dpr","className","canvasConfig","alpha","Canvas","shadows","preserveDrawingBuffer","toneMapping","ACESFilmicToneMapping","toneMappingExposure","flat","resize","scroll","debounce","background","Capture","_ref16","trigger","settings","callBack","quality","capture","toDataURL","BackgroundColor","_ref17","Box","baseProps","useLoader","currentRotation$1","AnimationModel","_ref19","idleRotation","headMovement","embeddedAnimations","assetMixerRef","animationMixer","fadeIn","AnimationModelContainer","currentRotation","HalfBodyModel","_ref20","visible","HalfBodyModelContainer","PoseModel","_ref21","poseSrc","pose","sourceNodes","mutatePose","targetNodes","rot","PoseModelContainer","AnimatedCamera","_ref23","animatedCameraSrc","useGLTF","mixerRef","animatedCamera","setAnimatedCamera","cam","CameraControls","_ref24","cameraTarget","cameraInitialDistance","cameraZoomTarget","headScale","controlsMinDistance","controlsMaxDistance","updateCameraTargetOnZoom","cameraZoomTargetRef","controlsRef","progressRef","fallbackCameraTarget","headScaleAdjustedMinDistance","_c","controls","updateCameraTarget","minDistance","maxDistance","updateCameraFocus","setX","setZ","OrbitControls","enableRotate","enablePan","minPolarAngle","maxPolarAngle","MultipleAnimationModel","_ref25","activeAnimation","onAnimationEnd","armatureMixerRef","activeActionRef","animationTimeRef","loadedAnimations","clips","_ref2","newClips","newClip","useAnimations","cachedGltf","prevSource","useGltfCachedLoader","armatureMixer","newAction","getClip","prevAction","animationConfig","loopCount","fadeTime","LoopOnce","handleAnimationEnd","reset","MultipleAnimationModelContainer","styles","it","Bloom","_ref26","luminanceThreshold","luminanceSmoothing","mipmapBlur","kernelSize","Bloom$1","definedProps","obj","fromEntries","arr","_ref28","_ref27","LIGHT_CONFIG","fillLightAngle","backLightAngle","keyLightAngle","silhouetteLightAngle","keyLightPosition","liftLightPosition","dirLightPosition","silhouetteLightPosition","defaultProps","keyLightIntensity","keyLightColor","fillLightIntensity","fillLightColor","fillLightPosition","backLightIntensity","backLightColor","backLightPosition","lightTarget","Lights","lightingProps","shoe","CAMERA","TARGET","FULL_BODY","MALE","FEMALE","HALF_BODY","INITIAL_DISTANCE","CONTROLS","MIN_DISTANCE","MAX_DISTANCE","ZOOM_TARGET","Avatar","_ref29","halfBody","onLoading","effects","_d","_e","setSpawnState","setAtom","_len6","_key6","useSetAtom","AvatarModel","Boolean","ambientOcclusion","vignette","cameraControlsMinDistance","cameraControlsMaxDistance","ContactShadows","blur","far","resolution","EffectComposer","autoClear","N8AO","aoRadius","distanceFalloff","screenSpaceRadius","halfRes","Vignette","eskil","darkness","BrightnessContrast","brightness","contrast","HueSaturation","hue","saturation","AvatarWrapper","o","c","throw","userAgent","platform","maxTouchPoints","navigator","MSStream","global","undefined$1","esErrors","_eval","EvalError","range","RangeError","ReferenceError","syntax","SyntaxError","TypeError","uri","URIError","origSymbol","Symbol","hasSymbolSham","iterator","sym","symObj","getOwnPropertyNames","syms","getOwnPropertyDescriptor","descriptor","enumerable","foo","$Object","toStr$1","concatty","implementation","that","bound","arrLike","slicy","boundLength","boundArgs","Function","joiner","str","joiny","Empty","functionBind","$hasOwn","hasown","$Error","$EvalError","$RangeError","$ReferenceError","$SyntaxError$1","$TypeError$3","$URIError","$Function","getEvalledConstructor","expressionSyntax","$gOPD$1","throwTypeError","ThrowTypeError","calleeThrows","gOPDthrows","hasSymbols","hasProto","__proto__","getProto","getPrototypeOf","needsEval","TypedArray","INTRINSICS","AggregateError","Atomics","BigInt","BigInt64Array","BigUint64Array","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","JSON","Proxy","Reflect","SharedArrayBuffer","String","Uint8ClampedArray","Uint16Array","Uint32Array","WeakRef","WeakSet","errorProto","esDefineProperty","hasRequiredEsDefineProperty","doEval","fn","gen","LEGACY_ALIASES","hasOwn$1","$concat$1","$spliceApply","splice","$replace$1","$strSlice","$exec","exec","rePropName","reEscapeChar","getBaseIntrinsic","allowMissing","alias","intrinsicName","getIntrinsic","string","first","last","number","quote","subString","stringToPath","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","isOwn","part","desc","callBind$1","requireEsDefineProperty","$defineProperty","$gOPD","gopd$1","$defineProperty$1","$SyntaxError","$TypeError$2","gopd","hasPropertyDescriptors","hasArrayLengthDefineBug","GetIntrinsic$2","define","nonEnumerable","nonWritable","nonConfigurable","loose","configurable","writable","hasDescriptors","gOPD","$TypeError$1","$floor$1","setFunctionLength","functionLengthIsConfigurable","functionLengthIsWritable","module","GetIntrinsic","setFunctionLength$1","$TypeError","$apply","$call","$reflectApply","$max","originalFunction","func","applyBind","GetIntrinsic$1","callBind","$indexOf","util_inspect","require$$0","hasMap","mapSizeDescriptor","hasSet","setSizeDescriptor","symToString","deref","valueOf","toUpperCase","hasShammedSymbols","toStringTag","utilInspect","inspectCustom","custom","isSymbol","callBound","percentTwenties","Format","formats$3","formatters","RFC1738","RFC3986","formats$2","has$2","isArray$2","hexTable","arrayToObject","plainObjects","create","limit","utils$2","acc","combine","compact","queue","refs","compacted","compactQueue","decoder","charset","strWithoutPlus","unescape","encode","defaultEncoder","kind","format","escape","$0","out","segment","charAt","isBuffer","isRegExp","maybeMap","mapped","merge","allowPrototypes","mergeTarget","targetItem","utils$1","formats$1","toISO","toISOString","defaultFormat","utils"],"sourceRoot":""}