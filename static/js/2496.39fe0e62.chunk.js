(self.webpackChunkhub=self.webpackChunkhub||[]).push([[2496],{21389:()=>{},49993:()=>{},53282:(X,_,E)=>{"use strict";E.r(_);var e=E(89379),A=(E(9950),E(70703)),P=(E(9413),E(84235)),t=E(33166),a=E(44414);const R=P.jest.fn(),I=P.jest.fn();class o{constructor(X){this.onopen=P.jest.fn(),this.onmessage=P.jest.fn(),this.onerror=P.jest.fn(),this.onclose=P.jest.fn(),this.send=R,this.close=I,o.instances.push(this)}}o.instances=[],(0,P.beforeEach)((()=>{o.instances=[]})),Object.defineProperty(window,"SpeechRecognition",{value:class{constructor(){this.start=P.jest.fn(),this.stop=P.jest.fn(),this.onresult=P.jest.fn(),this.onerror=P.jest.fn()}}}),Object.defineProperty(window,"speechSynthesis",{value:{speak:P.jest.fn(),cancel:P.jest.fn()}}),P.jest.mock("@/contexts/AuthContext",(()=>({useAuth:()=>({user:{id:"test-user"},login:P.jest.fn(),logout:P.jest.fn()})}))),(0,P.describe)("SimulationView",(()=>{const X={NODE_ENV:"production",PUBLIC_URL:"/hub",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDNrx8t-XuXdl0Q3T0Z8rSxO9kBHKGJCkE",REACT_APP_FIREBASE_AUTH_DOMAIN:"xrcupid-demo.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://xrcupid-demo-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"xrcupid-demo",REACT_APP_FIREBASE_STORAGE_BUCKET:"xrcupid-demo.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"123456789012",REACT_APP_FIREBASE_APP_ID:"1:123456789012:web:abcdef123456789012345",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-ABCDEFGHIJ",REACT_APP_HUME_API_KEY:"m3KaINwHsH55rJNO6zr2kIEAWvOimYeLTon3OriOXWJeCxCl",REACT_APP_HUME_SECRET_KEY:"IWtKuDbybQZLI0qWWPJn2M1iW3wrKGiQhmoQcTvIGJD2iBhDG3eRD35969FzcjNT",REACT_APP_HUME_CONFIG_ID:"bfd6db39-f0ea-46c3-a64b-e902d8cec212",REACT_APP_HUME_CONFIG_ID_GRACE:"bfd6db39-f0ea-46c3-a64b-e902d8cec212",REACT_APP_HUME_CONFIG_ID_POSIE:"dbf8debd-6835-489f-a7c3-a38fde6bb859",REACT_APP_HUME_CONFIG_ID_RIZZO:"0643bb10-61b5-43a8-ae1d-eb0051afc0a8",REACT_APP_HUME_CONFIG_ID_DOUGIE:"320d816a-8dac-44e6-b59b-1c3d2b6b24d9",REACT_APP_OPENAI_API_KEY:"sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_ELEVENLABS_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_CONVAI_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_RPM_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_USE_REAL_FIREBASE:"false",REACT_APP_ENVIRONMENT:"production"};(0,P.beforeEach)((()=>{P.jest.clearAllMocks(),E.g.WebSocket=o,({NODE_ENV:"production",PUBLIC_URL:"/hub",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDNrx8t-XuXdl0Q3T0Z8rSxO9kBHKGJCkE",REACT_APP_FIREBASE_AUTH_DOMAIN:"xrcupid-demo.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://xrcupid-demo-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"xrcupid-demo",REACT_APP_FIREBASE_STORAGE_BUCKET:"xrcupid-demo.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"123456789012",REACT_APP_FIREBASE_APP_ID:"1:123456789012:web:abcdef123456789012345",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-ABCDEFGHIJ",REACT_APP_HUME_API_KEY:"m3KaINwHsH55rJNO6zr2kIEAWvOimYeLTon3OriOXWJeCxCl",REACT_APP_HUME_SECRET_KEY:"IWtKuDbybQZLI0qWWPJn2M1iW3wrKGiQhmoQcTvIGJD2iBhDG3eRD35969FzcjNT",REACT_APP_HUME_CONFIG_ID:"bfd6db39-f0ea-46c3-a64b-e902d8cec212",REACT_APP_HUME_CONFIG_ID_GRACE:"bfd6db39-f0ea-46c3-a64b-e902d8cec212",REACT_APP_HUME_CONFIG_ID_POSIE:"dbf8debd-6835-489f-a7c3-a38fde6bb859",REACT_APP_HUME_CONFIG_ID_RIZZO:"0643bb10-61b5-43a8-ae1d-eb0051afc0a8",REACT_APP_HUME_CONFIG_ID_DOUGIE:"320d816a-8dac-44e6-b59b-1c3d2b6b24d9",REACT_APP_OPENAI_API_KEY:"sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_ELEVENLABS_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_CONVAI_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_RPM_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_USE_REAL_FIREBASE:"false",REACT_APP_ENVIRONMENT:"production"}=(0,e.A)((0,e.A)({},X),{},{REACT_APP_HUME_API_KEY:"test-api-key"}))})),(0,P.afterEach)((()=>{({NODE_ENV:"production",PUBLIC_URL:"/hub",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDNrx8t-XuXdl0Q3T0Z8rSxO9kBHKGJCkE",REACT_APP_FIREBASE_AUTH_DOMAIN:"xrcupid-demo.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://xrcupid-demo-default-rtdb.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"xrcupid-demo",REACT_APP_FIREBASE_STORAGE_BUCKET:"xrcupid-demo.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"123456789012",REACT_APP_FIREBASE_APP_ID:"1:123456789012:web:abcdef123456789012345",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-ABCDEFGHIJ",REACT_APP_HUME_API_KEY:"m3KaINwHsH55rJNO6zr2kIEAWvOimYeLTon3OriOXWJeCxCl",REACT_APP_HUME_SECRET_KEY:"IWtKuDbybQZLI0qWWPJn2M1iW3wrKGiQhmoQcTvIGJD2iBhDG3eRD35969FzcjNT",REACT_APP_HUME_CONFIG_ID:"bfd6db39-f0ea-46c3-a64b-e902d8cec212",REACT_APP_HUME_CONFIG_ID_GRACE:"bfd6db39-f0ea-46c3-a64b-e902d8cec212",REACT_APP_HUME_CONFIG_ID_POSIE:"dbf8debd-6835-489f-a7c3-a38fde6bb859",REACT_APP_HUME_CONFIG_ID_RIZZO:"0643bb10-61b5-43a8-ae1d-eb0051afc0a8",REACT_APP_HUME_CONFIG_ID_DOUGIE:"320d816a-8dac-44e6-b59b-1c3d2b6b24d9",REACT_APP_OPENAI_API_KEY:"sk-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_ELEVENLABS_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_CONVAI_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_RPM_API_KEY:"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",REACT_APP_USE_REAL_FIREBASE:"false",REACT_APP_ENVIRONMENT:"production"}=X)})),(0,P.it)("renders the simulation view",(()=>{(0,A.XX)((0,a.jsx)(t.SimulationView,{avatarModelUrl:"test-avatar.glb"})),(0,P.expect)(A.nj.getByText("Avatar Simulation")).toBeInTheDocument()})),(0,P.it)("sends messages through WebSocket",(async()=>{(0,A.XX)((0,a.jsx)(t.SimulationView,{avatarModelUrl:"test-avatar.glb"}));const X=A.nj.getByPlaceholderText("Type a message..."),_=A.nj.getByText("Send");A.rC.change(X,{target:{value:"Hello, world!"}}),A.rC.click(_),await(0,A.fm)((()=>{(0,P.expect)(R).toHaveBeenCalledWith(P.expect.stringContaining("Hello, world!"))}))})),(0,P.it)("updates avatar blendshapes on emotion change",(async()=>{(0,A.XX)((0,a.jsx)(t.SimulationView,{avatarModelUrl:"test-avatar.glb"})),(0,P.expect)(o.instances.length).toBeGreaterThan(0);const X=o.instances[0];X.onopen&&X.onopen({});const _={data:JSON.stringify({type:"face_emotion",predictions:[{name:"Joy",score:.9,timestamp:Date.now()}]})};X.onmessage&&X.onmessage(_);X.onmessage({data:JSON.stringify({type:"emotion_data",data:{emotions:[{name:"happiness",score:.8},{name:"neutral",score:.2}]}})}),(0,P.expect)(X.onmessage).toHaveBeenCalled()}))}))},63779:()=>{},77199:()=>{}}]);