"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[5989,7122],{5989:(t,e,a)=>{a.r(e),a.d(e,{default:()=>n});const n={}},17122:(t,e,a)=>{a.r(e),a.d(e,{AnalyticsVisualization:()=>p,EmotionHeatmap:()=>m,default:()=>u});var n=a(9950),s=a(28140),r=a(92150),o=a(97614),c=a(31117),i=a(97077),l=a(53465),d=(a(5989),a(44414));const p=t=>{let{data:e,duration:a}=t;const p=(0,n.useRef)(null),m=(0,n.useRef)(null),[u,h]=(0,n.useState)(null),[y,v]=(0,n.useState)(null);return(0,n.useEffect)((()=>{if(!p.current||!m.current||0===e.length)return;const t=40,n=60,r=60,o=60,c=m.current.clientWidth-o-n,i=400-t-r;s.Ltv(p.current).selectAll("*").remove();const l=s.Ltv(p.current).attr("width",c+o+n).attr("height",i+t+r),d=l.append("g").attr("transform","translate(".concat(o,",").concat(t,")")),u=s.m4Y().domain([0,a]).range([0,c]),y=s.m4Y().domain([0,1]).range([i,0]),v=l.append("defs");[{name:"joy",color:"#FFD700"},{name:"excitement",color:"#FF6B6B"},{name:"interest",color:"#4ECDC4"},{name:"love",color:"#FF69B4"},{name:"sadness",color:"#6C8EBF"},{name:"confusion",color:"#B39BC8"}].forEach((t=>{const e=v.append("linearGradient").attr("id","gradient-".concat(t.name)).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");e.append("stop").attr("offset","0%").attr("stop-color",t.color).attr("stop-opacity",.8),e.append("stop").attr("offset","100%").attr("stop-color",t.color).attr("stop-opacity",.1)})),d.append("g").attr("class","grid").attr("transform","translate(0,".concat(i,")")).call(s.l78(u).tickSize(-i).tickFormat((()=>"")).ticks(10)).style("stroke-dasharray","3,3").style("opacity",.3),d.append("g").attr("class","grid").call(s.V4s(y).tickSize(-c).tickFormat((()=>"")).ticks(5)).style("stroke-dasharray","3,3").style("opacity",.3),d.append("g").attr("transform","translate(0,".concat(i,")")).call(s.l78(u).tickFormat(((t,e)=>"".concat(Math.floor(+t/6e4),":").concat(String(Math.floor(+t%6e4/1e3)).padStart(2,"0"))))).attr("class","x-axis"),d.append("g").call(s.V4s(y).tickFormat(((t,e)=>"".concat((100*+t).toFixed(0),"%")))).attr("class","y-axis");const f=[{key:"userEngagement",name:"Your Engagement",color:"#7C3AED",strokeWidth:3},{key:"partnerEngagement",name:"Partner Engagement",color:"#EC4899",strokeWidth:3},{key:"userPosture",name:"Your Posture",color:"#10B981",strokeWidth:2,dashArray:"5,5"},{key:"partnerPosture",name:"Partner Posture",color:"#F59E0B",strokeWidth:2,dashArray:"5,5"}];f.forEach((t=>{var a;const n=s.n8j().x((t=>u(t.timestamp))).y((e=>y(e[t.key]))).curve(s.nVG),r=d.append("path").datum(e).attr("fill","none").attr("stroke",t.color).attr("stroke-width",t.strokeWidth).attr("class","metric-line ".concat(t.key)).attr("d",n);t.dashArray&&r.attr("stroke-dasharray",t.dashArray);const o=(null===(a=r.node())||void 0===a?void 0:a.getTotalLength())||0;r.attr("stroke-dasharray","".concat(o," ").concat(o)).attr("stroke-dashoffset",o).transition().duration(2e3).attr("stroke-dashoffset",0)}));const g=e.map((t=>({timestamp:t.timestamp,userContact:t.userEyeContact?.05:0,partnerContact:t.partnerEyeContact?.05:0})));d.selectAll(".eye-contact-user").data(g.filter((t=>t.userContact>0))).enter().append("rect").attr("x",(t=>u(t.timestamp)-1)).attr("y",i-10).attr("width",2).attr("height",10).attr("fill","#7C3AED").attr("opacity",.5),d.selectAll(".eye-contact-partner").data(g.filter((t=>t.partnerContact>0))).enter().append("rect").attr("x",(t=>u(t.timestamp)-1)).attr("y",i).attr("width",2).attr("height",10).attr("fill","#EC4899").attr("opacity",.5);const x=s.Wcw().x((t=>u(t.timestamp))).y0(i).y1((t=>{var e;return y((null===(e=t.userEmotions[0])||void 0===e?void 0:e.score)||0)})).curve(s.nVG);e.forEach(((t,e)=>{t.userEmotions[0]&&d.append("path").datum([t]).attr("fill","url(#gradient-".concat(t.userEmotions[0].name,")")).attr("opacity",.3).attr("d",x)}));const E=d.append("g").attr("class","focus").style("display","none");E.append("line").attr("class","focus-line").attr("y1",0).attr("y2",i).style("stroke","#666").style("stroke-dasharray","3,3"),E.append("circle").attr("r",5).style("fill","#7C3AED");const j=s.Ltv("body").append("div").attr("class","analytics-tooltip").style("opacity",0);l.append("rect").attr("transform","translate(".concat(o,",").concat(t,")")).attr("width",c).attr("height",i).style("fill","none").style("pointer-events","all").on("mouseover",(()=>E.style("display",null))).on("mouseout",(()=>{E.style("display","none"),j.style("opacity",0)})).on("mousemove",(function(t){const a=u.invert(s.WnM(t,this)[0]),n=s.ylB((t=>t.timestamp)).left,r=n(e,a,1),o=e[r-1],c=e[r],i=a-o.timestamp>c.timestamp-a?c:o;E.attr("transform","translate(".concat(u(i.timestamp),",").concat(y(i.userEngagement),")")),E.select(".focus-line").attr("transform","translate(0,".concat(-y(i.userEngagement),")")),j.transition().duration(200).style("opacity",.9),j.html('\n          <div class="tooltip-header">\n            '.concat(new Date(i.timestamp).toLocaleTimeString(),'\n          </div>\n          <div class="tooltip-content">\n            <div class="tooltip-row">\n              <span class="tooltip-label">Your Engagement:</span>\n              <span class="tooltip-value">').concat((100*i.userEngagement).toFixed(0),'%</span>\n            </div>\n            <div class="tooltip-row">\n              <span class="tooltip-label">Partner Engagement:</span>\n              <span class="tooltip-value">').concat((100*i.partnerEngagement).toFixed(0),"%</span>\n            </div>\n            ").concat(i.userEmotions[0]?'\n              <div class="tooltip-row">\n                <span class="tooltip-label">Your Emotion:</span>\n                <span class="tooltip-value">'.concat(i.userEmotions[0].name,"</span>\n              </div>\n            "):"","\n            ").concat(i.transcript?'\n              <div class="tooltip-transcript">\n                <strong>'.concat(i.transcript.speaker,':</strong> "').concat(i.transcript.text,'"\n              </div>\n            '):"","\n          </div>\n        ")).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px"),h(i)}));const k=l.append("g").attr("transform","translate(".concat(c-150,", 20)"));return f.forEach(((t,e)=>{const a=k.append("g").attr("transform","translate(0, ".concat(20*e,")"));a.append("line").attr("x1",0).attr("x2",20).attr("y1",10).attr("y2",10).attr("stroke",t.color).attr("stroke-width",t.strokeWidth).attr("stroke-dasharray",t.dashArray||""),a.append("text").attr("x",25).attr("y",10).attr("dy","0.32em").style("font-size","12px").text(t.name)})),()=>{j.remove()}}),[e,a]),(0,d.jsxs)("div",{className:"analytics-visualization",children:[(0,d.jsxs)("div",{className:"visualization-header",children:[(0,d.jsx)("h3",{children:"Engagement & Emotion Timeline"}),(0,d.jsxs)("div",{className:"metric-pills",children:[(0,d.jsxs)("div",{className:"metric-pill ".concat("engagement"===y?"active":""),onMouseEnter:()=>v("engagement"),onMouseLeave:()=>v(null),children:[(0,d.jsx)(r.A,{size:16}),(0,d.jsx)("span",{children:"Engagement"})]}),(0,d.jsxs)("div",{className:"metric-pill ".concat("emotion"===y?"active":""),onMouseEnter:()=>v("emotion"),onMouseLeave:()=>v(null),children:[(0,d.jsx)(o.A,{size:16}),(0,d.jsx)("span",{children:"Emotions"})]}),(0,d.jsxs)("div",{className:"metric-pill ".concat("eyecontact"===y?"active":""),onMouseEnter:()=>v("eyecontact"),onMouseLeave:()=>v(null),children:[(0,d.jsx)(c.A,{size:16}),(0,d.jsx)("span",{children:"Eye Contact"})]}),(0,d.jsxs)("div",{className:"metric-pill ".concat("posture"===y?"active":""),onMouseEnter:()=>v("posture"),onMouseLeave:()=>v(null),children:[(0,d.jsx)(i.A,{size:16}),(0,d.jsx)("span",{children:"Posture"})]})]})]}),(0,d.jsx)("div",{ref:m,className:"visualization-container",children:(0,d.jsx)("svg",{ref:p})}),u&&(0,d.jsx)("div",{className:"point-details",children:(0,d.jsxs)("div",{className:"detail-card",children:[(0,d.jsxs)("h4",{children:["Detailed Metrics at ",new Date(u.timestamp).toLocaleTimeString()]}),(0,d.jsxs)("div",{className:"metrics-grid",children:[(0,d.jsxs)("div",{className:"metric-item",children:[(0,d.jsx)(c.A,{className:u.userEyeContact?"active":""}),(0,d.jsx)("span",{children:"Your Eye Contact"})]}),(0,d.jsxs)("div",{className:"metric-item",children:[(0,d.jsx)(c.A,{className:u.partnerEyeContact?"active":""}),(0,d.jsx)("span",{children:"Partner Eye Contact"})]}),(0,d.jsxs)("div",{className:"metric-item",children:[(0,d.jsx)(l.A,{}),(0,d.jsxs)("span",{children:["Your Posture: ",(100*u.userPosture).toFixed(0),"%"]})]}),(0,d.jsxs)("div",{className:"metric-item",children:[(0,d.jsx)(l.A,{}),(0,d.jsxs)("span",{children:["Partner Posture: ",(100*u.partnerPosture).toFixed(0),"%"]})]})]})]})})]})},m=t=>{let{data:e}=t;const a=(0,n.useRef)(null);return(0,n.useEffect)((()=>{if(!a.current||0===e.length)return;const t=a.current,n=t.getContext("2d");if(!n)return;const s=t.width,r=t.height;n.clearRect(0,0,s,r);const o=["joy","excitement","interest","love","sadness","confusion","fear","anger"],c=r/o.length,i=s/e.length;e.forEach(((t,e)=>{o.forEach(((a,s)=>{var r,o;const l=(((null===(r=t.userEmotions.find((t=>t.name===a)))||void 0===r?void 0:r.score)||0)+((null===(o=t.partnerEmotions.find((t=>t.name===a)))||void 0===o?void 0:o.score)||0))/2;Math.floor(255*l);n.fillStyle="rgba(124, 58, 237, ".concat(l,")"),n.fillRect(e*i,s*c,i,c/2),n.fillStyle="rgba(236, 72, 153, ".concat(l,")"),n.fillRect(e*i,s*c+c/2,i,c/2)}))})),n.fillStyle="#374151",n.font="12px sans-serif",o.forEach(((t,e)=>{n.fillText(t,5,e*c+c/2)}))}),[e]),(0,d.jsxs)("div",{className:"emotion-heatmap",children:[(0,d.jsx)("h3",{children:"Emotion Intensity Heatmap"}),(0,d.jsxs)("div",{className:"heatmap-legend",children:[(0,d.jsx)("span",{children:"Low"}),(0,d.jsx)("div",{className:"gradient-bar"}),(0,d.jsx)("span",{children:"High"})]}),(0,d.jsx)("canvas",{ref:a,width:800,height:400,className:"heatmap-canvas"})]})},u=p}}]);