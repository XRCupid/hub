"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[2995],{32995:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(9950),a=n(99996),s=n(52111),i=n(68057),o=n(44414);const c={neutral:{mouthSmileLeft:0,mouthSmileRight:0,mouthFrownLeft:0,mouthFrownRight:0,eyeBlinkLeft:.2,eyeBlinkRight:.2},happy:{mouthSmileLeft:.7,mouthSmileRight:.7,eyeBlinkLeft:.1,eyeBlinkRight:.1},sad:{mouthFrownLeft:.5,mouthFrownRight:.5,eyeBlinkLeft:.4,eyeBlinkRight:.4},surprised:{jawOpen:.3,eyeWideLeft:.5,eyeWideRight:.5},angry:{browDownLeft:.6,browDownRight:.6,mouthPressLeft:.4,mouthPressRight:.4}},u=e=>{let{characterType:t="coach",avatarUrl:n="https://models.readyplayer.me/681d6cd903879b2f11528470.glb",onEmotionChange:u}=e;const[l,h]=(0,r.useState)("neutral"),[d,m]=(0,r.useState)({}),[f,y]=(0,r.useState)(!1),p=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)((()=>{(async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new AudioContext,n=t.createAnalyser();t.createMediaStreamSource(e).connect(n),p.current=t,g.current=n;const r=()=>{const e=n.frequencyBinCount,t=new Uint8Array(e);n.getByteFrequencyData(t);const a=t.reduce(((e,t)=>e+t))/e;y(a>10),requestAnimationFrame(r)};r()}catch(e){console.error("Audio capture error:",e)}})()}),[]),(0,r.useEffect)((()=>{m(c[l]||c.neutral),u&&u(l)}),[l,u]);return(0,o.jsxs)("div",{className:"interactive-avatar",children:[(0,o.jsxs)(s.Hl,{camera:{position:[0,1.6,3],fov:45},children:[(0,o.jsx)("ambientLight",{intensity:.5}),(0,o.jsx)("pointLight",{position:[10,10,10]}),(0,o.jsx)(a.eu,{modelSrc:n,blendShapes:d,environment:"sunset"}),(0,o.jsx)(i.N,{})]}),(0,o.jsxs)("div",{className:"avatar-controls",children:[(0,o.jsx)("select",{value:l,onChange:e=>{h(e.target.value)},children:Object.keys(c).map((e=>(0,o.jsx)("option",{value:e,children:e},e)))}),(0,o.jsxs)("div",{className:"avatar-info",children:[(0,o.jsxs)("p",{children:["Character Type: ",t]}),(0,o.jsxs)("p",{children:["Speaking: ",f?"Yes":"No"]}),(0,o.jsxs)("p",{children:["Current Emotion: ",l]})]})]})]})}}}]);