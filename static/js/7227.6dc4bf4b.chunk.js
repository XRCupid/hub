"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[5048,7227],{67227:(e,t,n)=>{n.r(t),n.d(t,{InteractiveCoachSession:()=>u});var a=n(65043),r=n(71985),s=n(50007),o=n(19275),i=n(16314),c=(n(95048),n(70579));const l={grace:"/avatars/coach_grace.glb",posie:"/avatars/coach_posie.glb",rizzo:"/avatars/coach_rizzo.glb"},u=e=>{let{coach:t,lessonContext:n="practicing conversation skills"}=e;const[u,d]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[p,m]=(0,a.useState)(""),[x,v]=(0,a.useState)([]),[y,b]=(0,a.useState)(null),[w,f]=(0,a.useState)(""),[j,S]=(0,a.useState)(!1),[k,N]=(0,a.useState)(!1),[C,A]=(0,a.useState)(new Uint8Array(128)),R=(0,a.useRef)(null),z=(0,a.useRef)(null),P=(0,a.useRef)(null),U={grace:"Hello darling! I'm so delighted we're working together today. Tell me, what's been on your mind about dating lately?",posie:"Welcome, beautiful soul. Take a deep breath with me... *pause* ...now, what would you like to explore in your dating journey today?",rizzo:"Hey hot stuff! Ready to level up your dating game? Don't hold back - what's really going on in your love life?"};(0,a.useEffect)((()=>{z.current=new(window.AudioContext||window.webkitAudioContext),P.current=z.current.createAnalyser(),P.current.fftSize=256;i.G.getAvailableProvider();if(v([{role:"coach",text:U[t]}]),"webkitSpeechRecognition"in window){const e=new window.webkitSpeechRecognition;e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onresult=e=>{const t=e.results[0][0].transcript;T(t)},e.onerror=e=>{console.error("Speech recognition error:",e.error),d(!1)},e.onend=()=>{d(!1)},R.current=e}return()=>{R.current&&R.current.stop()}}),[t]);const T=async e=>{if(e.trim()){v((t=>[...t,{role:"user",text:e}])),m("");try{const a=await i.G.getCoachResponse(t,e,n);v((e=>[...e,{role:"coach",text:a}])),D(a)}catch(y){b(y.message),console.error("Coach interaction error:",y)}}},D=async e=>{N(!0);const n=await i.G.speak(e,t);if(n&&z.current&&P.current){z.current.createMediaElementSource(n).connect(P.current),P.current.connect(z.current.destination);const e=()=>{if(P.current&&k){const t=new Uint8Array(P.current.frequencyBinCount);P.current.getByteFrequencyData(t),A(t),requestAnimationFrame(e)}};e()}setTimeout((()=>{N(!1),A(new Uint8Array(128))}),50*e.length)},I=l[t];return(0,c.jsxs)("div",{className:"interactive-coach-session",children:[(0,c.jsxs)("div",{className:"coach-header",children:[(0,c.jsx)("div",{className:"coach-avatar-container",children:(0,c.jsxs)(r.Hl,{camera:{position:[0,0,3],fov:40},style:{background:"transparent"},children:[(0,c.jsx)("ambientLight",{intensity:.5}),(0,c.jsx)("directionalLight",{position:[10,10,5],intensity:1}),(0,c.jsx)(o.ConversationAvatar,{avatarUrl:I,position:[0,-1,0],scale:1.5,isSpeaking:k,audioContext:z.current,audioData:C}),(0,c.jsx)(s.N,{enablePan:!1,enableZoom:!1,minPolarAngle:Math.PI/3,maxPolarAngle:Math.PI/2})]})}),(0,c.jsx)("div",{className:"coach-info",children:(0,c.jsxs)("h3",{children:[t.charAt(0).toUpperCase()+t.slice(1),"'s Coaching Session"]})})]}),(0,c.jsx)("div",{className:"conversation-container",children:x.map(((e,n)=>(0,c.jsxs)("div",{className:"message ".concat(e.role),children:["coach"===e.role&&(0,c.jsx)("span",{className:"message-avatar",children:l[t]}),(0,c.jsx)("div",{className:"message-content",children:(0,c.jsx)("p",{children:e.text})})]},n)))}),(0,c.jsxs)("div",{className:"input-controls",children:[(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),T(p)},className:"text-input-form",children:[(0,c.jsx)("input",{type:"text",placeholder:"Type your response...",value:p,onChange:e=>m(e.target.value),className:"text-input",disabled:h}),(0,c.jsx)("button",{type:"submit",disabled:h||!p.trim(),children:"Send"})]}),(0,c.jsx)("div",{className:"voice-controls",children:(0,c.jsx)("button",{className:"voice-btn ".concat(u?"listening":""),onClick:()=>{R.current?u?R.current.stop():(R.current.start(),d(!0)):b("Speech recognition not available in your browser")},disabled:h,children:u?"\u23f9\ufe0f Stop":"\ud83c\udfa4 Speak"})})]}),y&&(0,c.jsx)("div",{className:"error-message",children:y}),(0,c.jsx)("div",{className:"session-tips",children:(0,c.jsx)("p",{children:"\ud83d\udca1 Try asking about first date ideas, conversation starters, or handling dating anxiety"})})]})}},95048:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a={}}}]);
//# sourceMappingURL=7227.6dc4bf4b.chunk.js.map