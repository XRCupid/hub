"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[8971],{98971:(e,a,n)=>{n.r(a),n.d(a,{ReadyPlayerMeAvatarDebugBox:()=>d,default:()=>c});var t=n(9950),r=n(69104),s=n(42092),o=n(13437),i=n(44414);const l=t.forwardRef(((e,a)=>{let{modelUrl:n,blendShapes:l,position:c,scale:d,onModelLoaded:u,currentAnimationName:f,isSpeaking:p,visemeData:m,additionalClips:h}=e;const v=(0,t.useRef)(null),{scene:y,animations:b}=(0,r.p)(n),{actions:g,mixer:k}=(0,s.f)(b,v);return(0,t.useImperativeHandle)(a,(()=>v.current)),(0,t.useEffect)((()=>{y&&v.current&&u&&u(v.current,b)}),[y,b,u]),(0,t.useEffect)((()=>{v.current&&l&&v.current.traverse((e=>{e instanceof o.SkinnedMesh&&e.morphTargetDictionary&&Object.keys(l).forEach((a=>{const n=l[a],t=e.morphTargetDictionary[a];void 0!==t&&void 0!==n&&(e.morphTargetInfluences[t]=o.MathUtils.clamp(n,0,1))}))}))}),[l]),(0,t.useEffect)((()=>{if(g&&f){const a=g[f];var e;if(a)k.stopAllAction(),a.reset().fadeIn(.3).play();else if(console.warn('[ReadyPlayerMeAvatar] Animation "'.concat(f,'" not found.')),b.length>0&&g[b[0].name])null===(e=g[b[0].name])||void 0===e||e.reset().fadeIn(.3).play()}else if(g&&b.length>0&&g[b[0].name]){var a;null===(a=g[b[0].name])||void 0===a||a.reset().fadeIn(.3).play()}return()=>{var e;g&&f&&(null===(e=g[f])||void 0===e||e.fadeOut(.3))}}),[g,b,k,f]),(0,i.jsx)("primitive",{object:y,ref:v,position:c,scale:d,dispose:null})}));l.displayName="ReadyPlayerMeAvatar";const c=l,d=e=>(0,i.jsxs)("mesh",{position:e.position,scale:e.scale,children:[(0,i.jsx)("boxGeometry",{args:[.5,.5,.5]}),(0,i.jsx)("meshStandardMaterial",{color:"purple"})]})}}]);