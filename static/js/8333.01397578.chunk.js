"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[8333],{18333:(t,e,a)=>{a.r(e),a.d(e,{EmotionalAvatar:()=>r});var i=a(9950);class n{constructor(){this.audioContext=void 0,this.analyser=void 0,this.microphone=null,this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=256}async startListening(t){try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});this.microphone=this.audioContext.createMediaStreamSource(e),this.microphone.connect(this.analyser);const a=this.analyser.frequencyBinCount,i=new Uint8Array(a),n=()=>{this.analyser.getByteFrequencyData(i);const e=i.reduce(((t,e)=>t+e),0)/a/255;e>.1&&t(e),requestAnimationFrame(n)};n()}catch(e){console.error("Speech detection error:",e)}}approximateEmotion(t){const{intensity:e,pitch:a}=t;return e>.8&&a>.7?"excited":e<.3&&a<.4?"sad":e>.5&&a>.5?"happy":e<.4&&a>.6?"nervous":"neutral"}}var s=a(44414);const r=t=>{let{initialEmotion:e="neutral"}=t;const[a,r]=(0,i.useState)(e),[o,c]=(0,i.useState)(!1),l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const t=new n;return l.current=t,t.startListening((e=>{c(!0);const a=t.approximateEmotion({intensity:e,pitch:.6});r(a),setTimeout((()=>c(!1)),500)})),()=>{}}),[]),(0,s.jsx)("div",{className:"emotional-avatar ".concat(a),"aria-label":"Avatar expressing ".concat(a," emotion"),children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"300",height:"400",viewBox:"0 0 300 400",children:[(0,s.jsx)("ellipse",{cx:"150",cy:"200",rx:"120",ry:"150",fill:"#F5D4A0"}),(0,s.jsxs)("g",{className:"avatar-eyes ".concat(o?"blink":""),children:[(0,s.jsx)("circle",{cx:"110",cy:"180",r:"15",fill:"#4A4A4A"}),(0,s.jsx)("circle",{cx:"190",cy:"180",r:"15",fill:"#4A4A4A"})]}),(0,s.jsx)("path",{d:"M110,250 Q150,280 190,250",stroke:"#FF6B6B",strokeWidth:"5",fill:"none",className:"avatar-mouth ".concat(o?"speaking":"")})]})})}}}]);