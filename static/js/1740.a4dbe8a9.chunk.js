"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[1740],{51740:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var n=o(89379),s=o(65043),u=o(71985),h=o(50007),l=o(32070),m=o(70579);const a={mouthClose:.8,mouthFunnel:0,mouthPucker:0,mouthLeft:0,mouthRight:0,mouthSmileLeft:.2,mouthSmileRight:.2,jawOpen:.1},i={AA:{jawOpen:.7,mouthClose:.3},AE:{jawOpen:.6,mouthClose:.4},AH:{jawOpen:.5,mouthClose:.5},AO:{jawOpen:.7,mouthClose:.3},AW:{jawOpen:.6,mouthFunnel:.8},AY:{jawOpen:.5,mouthSmileLeft:.6,mouthSmileRight:.6},EH:{jawOpen:.4,mouthLeft:.5,mouthRight:.5},ER:{mouthFunnel:.7,jawOpen:.3},EY:{jawOpen:.4,mouthSmileLeft:.8,mouthSmileRight:.8},IH:{jawOpen:.3,mouthLeft:.4,mouthRight:.4},IY:{jawOpen:.2,mouthSmileLeft:.9,mouthSmileRight:.9},OW:{jawOpen:.6,mouthPucker:.7},OY:{jawOpen:.5,mouthFunnel:.6},UH:{jawOpen:.4,mouthFunnel:.3},UW:{jawOpen:.3,mouthPucker:.9},B:{mouthClose:1,jawOpen:0},CH:{mouthClose:.8,mouthPucker:.6},D:{mouthClose:.9,jawOpen:.1},DH:{mouthClose:.8,jawOpen:.3},F:{mouthClose:.7},G:{jawOpen:.5,mouthClose:.5},HH:{jawOpen:.4,mouthClose:.6},JH:{mouthClose:.9,mouthPucker:.5},K:{jawOpen:.5,mouthClose:.5},L:{jawOpen:.3},M:{mouthClose:1,jawOpen:0},N:{mouthClose:.9,jawOpen:.1},NG:{mouthClose:.8,jawOpen:.2},P:{mouthClose:1,jawOpen:0},R:{mouthClose:.7,mouthLeft:.6,mouthRight:.6},S:{mouthClose:.8,mouthLeft:.7,mouthRight:.7},SH:{mouthClose:.7,mouthPucker:.8},T:{mouthClose:.9,jawOpen:.1},TH:{mouthClose:.8,jawOpen:.2},V:{mouthClose:.7},W:{jawOpen:.4,mouthPucker:.9},Y:{jawOpen:.3,mouthSmileLeft:.8,mouthSmileRight:.8},Z:{mouthClose:.7,mouthLeft:.8,mouthRight:.8},ZH:{mouthClose:.6,mouthPucker:.7}},r=()=>{const[e,t]=(0,s.useState)(a),[o,r]=(0,s.useState)(!1),[c,p]=(0,s.useState)(!1),[j,d]=(0,s.useState)(null),w=(0,s.useRef)(null);return(0,s.useEffect)((()=>((async()=>{try{const e="wss://api.hume.ai/v0/evi/chat?apiKey=".concat("YOUR_HUME_API_KEY");w.current=new WebSocket(e),w.current.onopen=()=>{var e;console.log("Connected to Hume EVI"),r(!0);null===(e=w.current)||void 0===e||e.send(JSON.stringify({type:"config",data:{models:{prosody:{}},stream_window_ms:50,identify_speakers:!1,identify_emotions:!0,identify_phonemes:!0}}))},w.current.onmessage=e=>{try{const o=JSON.parse(e.data);if("phonemes"===o.type&&o.data){const e=o.data.phonemes;if(e&&e.length>0){const o=e[e.length-1];d(o.phoneme);const s=i[o.phoneme]||{};t((e=>(0,n.A)((0,n.A)({},a),s)))}}"speaking"===o.type&&(p(o.data.is_speaking),o.data.is_speaking||(t(a),d(null)))}catch(o){console.error("Error processing WebSocket message:",o)}},w.current.onerror=e=>{console.error("WebSocket error:",e),r(!1)},w.current.onclose=()=>{console.log("WebSocket connection closed"),r(!1)}}catch(e){console.error("Error setting up WebSocket:",e)}})(),()=>{w.current&&w.current.close()})),[]),(0,s.useEffect)((()=>{if(c&&!j){const e=Object.keys(i);let o=0;const s=()=>{if(!c)return;const u=e[o%e.length];d(u);const h=i[u]||{};t((e=>(0,n.A)((0,n.A)({},a),h))),o++,setTimeout(s,100)};s()}}),[c,j]),(0,m.jsxs)("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column"},children:[(0,m.jsxs)("div",{style:{padding:"1rem",background:"#f0f0f0"},children:[(0,m.jsx)("h2",{children:"Hume EVI + Ready Player Me"}),(0,m.jsxs)("div",{children:["Status: ",o?"Connected to Hume EVI":"Disconnected"]}),(0,m.jsxs)("div",{children:["Speaking: ",c?"Yes":"No"]}),(0,m.jsxs)("div",{children:["Current Phoneme: ",j||"None"]})]}),(0,m.jsx)("div",{style:{flex:1,position:"relative"},children:(0,m.jsxs)(u.Hl,{camera:{position:[0,1.6,2],fov:45},children:[(0,m.jsx)("ambientLight",{intensity:.5}),(0,m.jsx)("pointLight",{position:[10,10,10]}),(0,m.jsx)(h.N,{enableZoom:!0,enablePan:!0,minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/2}),(0,m.jsx)(l.default,{avatarUrl:"/bro.glb",position:[0,-1.6,0],scale:[1,1,1]})]})})]})}}}]);
//# sourceMappingURL=1740.a4dbe8a9.chunk.js.map