"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[6803],{6803:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(9950),o=(n(37026),n(44414));const i=()=>{const[e,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1),[r,s]=(0,a.useState)(0),[l,c]=(0,a.useState)(0),[d,u]=(0,a.useState)("Click Start to begin eye tracking setup"),[h,m]=(0,a.useState)(!1),[p,g]=(0,a.useState)([]),[y,b]=(0,a.useState)(0),[f,w]=(0,a.useState)(!1),[x,j]=(0,a.useState)(null),[v,C]=(0,a.useState)(!1),k=(0,a.useRef)(null),I=(0,a.useRef)(null),z=(0,a.useRef)(null),S=((0,a.useRef)([]),["So there I was, at this amazing coffee shop in Paris...","The waiter came over, and you won't believe what happened next...","He started speaking in perfect English, but with the most charming accent...","And then he asked me if I wanted to see something special...","He led me to this hidden garden behind the caf\xe9...","There were fairy lights everywhere, and live jazz music playing...","It was like stepping into a movie scene, absolutely magical!","That's when I realized... Paris really is the city of love!"]),P={person:[{emoji:"\ud83d\udc69\u200d\ud83e\uddb0",content:"Attractive redhead walks by"},{emoji:"\ud83d\udc68\u200d\ud83d\udcbc",content:"Handsome businessman passes"},{emoji:"\ud83d\udc69\u200d\ud83c\udfa4",content:"Stylish woman struts past"},{emoji:"\ud83d\udd7a",content:"Dancer moves through"}],bird:[{emoji:"\ud83e\udd85",content:"Eagle soars by"},{emoji:"\ud83e\udd9c",content:"Colorful parrot flies"},{emoji:"\ud83d\udd4a\ufe0f",content:"Dove glides past"},{emoji:"\ud83e\udd86",content:"Duck waddles by"}],notification:[{emoji:"\ud83d\udcac",content:"New match on XRCupid!"},{emoji:"\u2764\ufe0f",content:"Someone liked your profile!"},{emoji:"\ud83d\udcf8",content:"Tagged in a photo"},{emoji:"\ud83d\udd25",content:"Your profile is on fire!"}],text:[{emoji:"\ud83d\udcf1",content:'"Hey, are you free tonight?"'},{emoji:"\ud83d\udc8c",content:'"Miss you! Call me?"'},{emoji:"\ud83c\udf55",content:'"Pizza party at my place!"'},{emoji:"\ud83c\udf89",content:'"You won\'t believe what happened!"'}]};(0,a.useEffect)((()=>{const e=document.createElement("script");return e.src="https://api.gazerecorder.com/GazeCloudAPI.js",e.async=!0,e.onload=()=>{console.log("GazeCloudAPI loaded"),C(!0)},e.onerror=()=>{console.error("Failed to load GazeCloudAPI"),u("Failed to load eye tracking API")},document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]);const A=(0,a.useCallback)((()=>{window.GazeCloudAPI?(window.GazeCloudAPI.OnResult=e=>{e({})},window.GazeCloudAPI.OnCalibrationComplete=()=>{console.log("Calibration complete!"),t(!0),u("Calibration complete! Look at the coach to start.")},window.GazeCloudAPI.OnCamDenied=()=>{console.error("Camera access denied"),u("Camera access denied - please check permissions")},window.GazeCloudAPI.OnError=e=>{console.error("GazeCloudAPI error:",e),u("Eye tracking error: ".concat(e))},window.GazeCloudAPI.UseClickRecalibration=!0,window.GazeCloudAPI.StartEyeTracking(),i(!0),u("Follow the red dots with your eyes for calibration")):console.error("GazeCloudAPI not available")}),[e]),E=(0,a.useCallback)((()=>{const e=["person","bird","notification","text"],t=e[Math.floor(Math.random()*e.length)],n=P[t][Math.floor(Math.random()*P[t].length)],a=Math.random()>.5?"left":"right",o=100+Math.random()*(window.innerHeight-300),i={id:Date.now().toString(),type:t,position:{x:"left"===a?-100:window.innerWidth+100,y:o},emoji:n.emoji,content:n.content};g((e=>[...e,i])),setTimeout((()=>{g((e=>e.filter((e=>e.id!==i.id))))}),5e3)}),[]);(0,a.useEffect)((()=>(f&&h?(z.current=setInterval((()=>{s((e=>e+1)),c((e=>e+1))}),100),u(S[y])):f&&!h&&(z.current&&clearInterval(z.current),setTimeout((()=>{h||(c(0),u("Hey! Look at me, not the distractions!"))}),500)),()=>{z.current&&clearInterval(z.current)})),[f,h,y]),(0,a.useEffect)((()=>()=>{window.GazeCloudAPI&&n&&window.GazeCloudAPI.StopEyeTracking(),I.current&&clearInterval(I.current)}),[n]);return(0,o.jsx)("div",{className:"eye-contact-game",children:(0,o.jsxs)("div",{className:"game-container",children:[(0,o.jsxs)("div",{className:"game-header",children:[(0,o.jsxs)("div",{className:"score-display",children:[(0,o.jsxs)("div",{children:["Score: ",r]}),(0,o.jsxs)("div",{children:["Streak: ",l," ",l>50?"\ud83c\udf1f":l>30?"\ud83d\ude0a":l>10?"\ud83d\ude42":"\ud83d\ude15"]})]}),(0,o.jsx)("div",{className:"status",children:v?n?e?"\ud83d\udc41\ufe0f Eye Tracking Active":"\ud83c\udfaf Calibrating...":"\ud83d\udd0c Not tracking":"\u23f3 Loading API..."})]}),x&&e&&(0,o.jsx)("div",{style:{position:"fixed",left:x.x-15,top:x.y-15,width:"30px",height:"30px",borderRadius:"50%",backgroundColor:h?"rgba(0, 255, 0, 0.5)":"rgba(255, 0, 0, 0.5)",border:"2px solid white",pointerEvents:"none",zIndex:9999,transition:"all 0.1s ease",boxShadow:"0 0 10px rgba(0,0,0,0.3)"}}),(0,o.jsx)("div",{ref:k,className:"avatar-area ".concat(h?"gazing":"not-gazing"),style:{opacity:e?1:.3},children:(0,o.jsxs)("div",{className:"avatar-container",children:[(0,o.jsx)("div",{className:"coach-avatar",style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"80px",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:"\ud83d\udc69\u200d\ud83c\udfeb"}),(0,o.jsx)("div",{className:"speech-bubble",children:d})]})}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[!n&&(0,o.jsx)("button",{onClick:()=>{v?A():u("API still loading, please wait...")},className:"start-button",children:"Start Eye Tracking"}),n&&e&&!f&&(0,o.jsx)("button",{onClick:()=>{if(!e)return void u("Please complete calibration first!");w(!0),s(0),c(0),b(0),I.current=setInterval(E,2e3);const t=setInterval((()=>{b((e=>e>=S.length-1?(clearInterval(t),I.current&&clearInterval(I.current),u("Amazing! Final score: ".concat(r," | Best streak: ").concat(l)),w(!1),e):e+1))}),5e3)},className:"start-button",children:"Start Eye Contact Challenge"}),n&&(0,o.jsx)("button",{onClick:()=>{window.GazeCloudAPI.StopEyeTracking(),i(!1),t(!1),w(!1),u("Eye tracking stopped")},className:"start-button",style:{background:"#dc3545"},children:"Stop Tracking"})]}),f&&p.map((e=>(0,o.jsxs)("div",{className:"distraction distraction-".concat(e.type),style:{left:e.position.x,top:e.position.y,animation:"move-distraction 5s linear",fontSize:"bird"===e.type||"person"===e.type?"60px":"16px"},children:[e.emoji&&(0,o.jsx)("span",{style:{fontSize:"bird"===e.type||"person"===e.type?"60px":"24px"},children:e.emoji}),e.content&&(0,o.jsx)("div",{className:"distraction-content",style:{marginLeft:"10px"},children:e.content})]},e.id))),(0,o.jsxs)("div",{className:"instructions",children:[(0,o.jsx)("h3",{children:"How to Play:"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:'Click "Start Eye Tracking" to begin'}),(0,o.jsx)("li",{children:"Follow the red dots with your eyes for calibration"}),(0,o.jsx)("li",{children:"After calibration, keep your eyes on the coach"}),(0,o.jsx)("li",{children:"Don't get distracted by things moving on screen"}),(0,o.jsx)("li",{children:"Build up your streak for bonus points"}),(0,o.jsx)("li",{children:"You can click anywhere to recalibrate if needed"})]}),(0,o.jsx)("p",{style:{marginTop:"10px",fontSize:"12px",fontStyle:"italic"},children:"Powered by GazeCloudAPI - High accuracy webcam eye tracking"})]})]})})}}}]);