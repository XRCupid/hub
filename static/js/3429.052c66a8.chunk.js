"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[3429],{13429:(e,r,n)=>{n.r(r),n.d(r,{default:()=>i});var t=n(65043),c=n(70579);const i=()=>{var e,r;const n=(0,t.useRef)(null),[i,s]=(0,t.useState)("Initializing..."),[a,o]=(0,t.useState)(null),[l,d]=(0,t.useState)(null),u=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const e=()=>{if(!u.current||!n.current)return;const e=()=>{if(u.current&&n.current){try{"function"===typeof u.current.predict?u.current.predict(n.current,(e=>{var r;e&&e.length>0&&(o(e[0]),s("Detecting... ".concat((null===(r=e[0].landmarks)||void 0===r?void 0:r.length)||0," landmarks")))})):"function"===typeof u.current.detect&&u.current.detect(n.current,(e=>{var r;e&&e.length>0&&(o(e[0]),s("Detecting... ".concat((null===(r=e[0].landmarks)||void 0===r?void 0:r.length)||0," landmarks")))}))}catch(r){console.error("Detection error:",r),d(r instanceof Error?r.message:"Detection error")}requestAnimationFrame(e)}};e()};return(async()=>{try{if("undefined"===typeof ml5)return void d("ML5 is not loaded");s("ML5 version: ".concat(ml5.version||"unknown"));const r=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}});n.current&&(n.current.srcObject=r,await new Promise((e=>{n.current&&(n.current.onloadedmetadata=()=>{var r;null===(r=n.current)||void 0===r||r.play(),e()})})),s("Video ready, initializing ML5 FaceMesh..."),"undefined"!==typeof ml5.facemesh?(s("Using ML5 v0.12.2 API"),u.current=ml5.facemesh({maxFaces:1,flipHorizontal:!1},(()=>{s("FaceMesh model loaded successfully"),e()}))):d("ml5.facemesh is not available"))}catch(r){console.error("Initialization error:",r),d(r instanceof Error?r.message:"Unknown error")}})(),()=>{if(n.current&&n.current.srcObject){n.current.srcObject.getTracks().forEach((e=>e.stop()))}u.current&&"function"===typeof u.current.stop&&u.current.stop()}}),[]),(0,c.jsxs)("div",{style:{padding:"20px"},children:[(0,c.jsx)("h2",{children:"ML5 FaceMesh Test"}),(0,c.jsxs)("div",{children:["Status: ",i]}),l&&(0,c.jsxs)("div",{style:{color:"red"},children:["Error: ",l]}),(0,c.jsx)("div",{style:{marginTop:"10px"},children:(0,c.jsx)("video",{ref:n,width:640,height:480,style:{border:"1px solid #ccc"},playsInline:!0,muted:!0})}),a&&(0,c.jsxs)("div",{style:{marginTop:"10px"},children:[(0,c.jsx)("h3",{children:"Predictions:"}),(0,c.jsx)("pre",{children:JSON.stringify({landmarks:(null===(e=a.landmarks)||void 0===e?void 0:e.length)||0,boundingBox:a.boundingBox,faceOval:(null===(r=a.faceOval)||void 0===r?void 0:r.length)||0},null,2)})]})]})}}}]);
//# sourceMappingURL=3429.052c66a8.chunk.js.map