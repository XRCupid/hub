"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[3617,5066,6270],{5066:(n,i,a)=>{a.r(i),a.d(i,{default:()=>f});var e=a(89379),t=a(9950),s=a(12880),l=a(52111),o=a(69104),r=a(42092),c=a(50291),d=a(68057),g=a(13437),_=a(15061);const m={male:{idle:["/animations/M_Standing_Idle_001.glb","/animations/M_Standing_Idle_002.glb","/animations/M_Standing_Idle_Variations_001.glb","/animations/M_Standing_Idle_Variations_002.glb","/animations/M_Standing_Idle_Variations_003.glb"],talk:["/animations/M_Talking_Variations_001.glb","/animations/M_Talking_Variations_002.glb","/animations/M_Talking_Variations_003.glb","/animations/M_Talking_Variations_004.glb","/animations/M_Talking_Variations_005.glb"]},female:{idle:["/animations/feminine/idle/F_Standing_Idle_001.glb","/animations/feminine/idle/F_Standing_Idle_Variations_001.glb","/animations/feminine/idle/F_Standing_Idle_Variations_002.glb","/animations/feminine/idle/F_Standing_Idle_Variations_003.glb","/animations/feminine/idle/F_Standing_Idle_Variations_004.glb","/animations/feminine/idle/F_Standing_Idle_Variations_005.glb","/animations/feminine/idle/F_Standing_Idle_Variations_006.glb","/animations/feminine/idle/F_Standing_Idle_Variations_007.glb","/animations/feminine/idle/F_Standing_Idle_Variations_008.glb","/animations/feminine/idle/F_Standing_Idle_Variations_009.glb"],talk:["/animations/feminine/talk/F_Talking_Variations_001.glb","/animations/feminine/talk/F_Talking_Variations_002.glb","/animations/feminine/talk/F_Talking_Variations_003.glb","/animations/feminine/talk/F_Talking_Variations_004.glb","/animations/feminine/talk/F_Talking_Variations_005.glb","/animations/feminine/talk/F_Talking_Variations_006.glb"]},neutral:{idle:["/animations/M_Standing_Idle_001.glb","/animations/M_Standing_Idle_Variations_001.glb"],talk:["/animations/M_Talking_Variations_001.glb","/animations/M_Talking_Variations_002.glb"]}};var u=a(44414);function h(n){const i=(0,t.useRef)(),{scene:a,animations:l}=(0,o.p)("/avatars/AngelChick.glb"),{actions:c,mixer:d}=(0,r.f)(l,i);return(0,t.useEffect)((()=>((async()=>{try{const n=m.female.idle;if(n&&n.length>0){const i=n[Math.floor(Math.random()*n.length)],a=new _.B,e=await a.loadAsync(i);if(e.animations&&e.animations.length>0){const n=e.animations[0],i=d.clipAction(n);i.play(),i.setLoop(g.LoopRepeat,1/0)}}}catch(n){console.error("Error loading idle animation:",n)}})(),()=>{d.stopAllAction()})),[d]),(0,s.F)(((n,i)=>{d.update(i)})),(0,u.jsx)("group",{ref:i,children:(0,u.jsx)("primitive",(0,e.A)({object:a},n))})}function f(){return(0,u.jsxs)(l.Hl,{dpr:[1,2],camera:{fov:45,position:[0,1.5,4]},style:{width:"100%",height:"100vh"},children:[(0,u.jsx)("color",{attach:"background",args:["#1a1a1a"]}),(0,u.jsx)("ambientLight",{intensity:.5}),(0,u.jsx)("directionalLight",{intensity:1,position:[5,5,5]}),(0,u.jsx)(t.Suspense,{fallback:null,children:(0,u.jsx)(c.B,{environment:"city",intensity:.6,children:(0,u.jsx)(h,{scale:1.5,position:[0,-1,0]})})}),(0,u.jsx)(d.N,{enablePan:!1,minDistance:2,maxDistance:6,target:[0,.5,0]})]})}o.p.preload("/avatars/AngelChick.glb")},36270:(n,i,a)=>{a.r(i),a.d(i,{default:()=>e});const e={}},53617:(n,i,a)=>{a.r(i),a.d(i,{default:()=>o});var e=a(9950),t=a(5066),s=(a(36270),a(64189)),l=a(44414);const o=()=>{const[n,i]=(0,e.useState)(!0),[a,o]=(0,e.useState)(null),r=(0,e.useRef)(null),{connect:c,disconnect:d,status:g,messages:_}=(0,s.c0)();(0,e.useEffect)((()=>{n&&a&&r.current&&(r.current.srcObject=a)}),[n,a]),(0,e.useEffect)((()=>{let e=!0;if(n){(async()=>{try{const n=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});e&&o(n)}catch(n){console.error("Error accessing webcam on initial load:",n),e&&i(!1)}})()}return()=>{e=!1,a&&a.getTracks().forEach((n=>n.stop()))}}),[]),(0,e.useEffect)((()=>{_.length>0&&console.log("Hume EVI Messages:",_)}),[_]);return(0,l.jsxs)("div",{className:"coach-call-container",children:[(0,l.jsxs)("div",{className:"main-panel",children:[(0,l.jsxs)("div",{className:"npc-panel",children:[(0,l.jsx)("h2",{children:"Coach NPC"}),(0,l.jsx)("div",{className:"avatar-container",children:(0,l.jsx)(t.default,{})})]}),(0,l.jsxs)("div",{className:"user-panel",children:[(0,l.jsxs)("div",{className:"user-video-controls",children:[(0,l.jsx)("h3",{children:"You"}),(0,l.jsx)("button",{onClick:async()=>{if(n&&a)a.getTracks().forEach((n=>n.stop())),o(null),i(!1);else try{const n=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});o(n),i(!0)}catch(e){console.error("Error accessing webcam:",e),i(!1)}},type:"button",children:n&&a?"Turn Off Video":"Turn On Video"})]}),n&&a&&(0,l.jsx)("div",{className:"user-video-container",children:(0,l.jsx)("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",transform:"scaleX(-1)"}})}),(!n||!a)&&(0,l.jsx)("div",{className:"user-video-placeholder",children:"Your video is off."})]})]}),(0,l.jsxs)("div",{className:"communication-panel",children:[(0,l.jsx)("button",{onClick:()=>{"connected"===g.value?d():"disconnected"!==g.value&&"error"!==g.value||c().catch((n=>console.error("Hume EVI Connection Error:",n)))},type:"button",disabled:"connecting"===g.value,children:(()=>{switch(g.value){case"disconnected":return"Connect Mic";case"connecting":return"Connecting...";case"connected":return"Disconnect Mic";case"error":return"Mic Error (Retry)";default:return"Mic"}})()}),(0,l.jsx)("input",{type:"text",placeholder:"Type your message (text input coming soon)...",readOnly:!0}),(0,l.jsx)("button",{type:"button",children:"Send (TBD)"})]}),(0,l.jsxs)("div",{className:"chat-history-panel",children:[_.map(((n,i)=>"user_message"===n.type&&n.message&&"string"===typeof n.message.content?(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"You:"})," ",n.message.content]},"user-".concat(i)):"assistant_message"===n.type&&n.message&&"string"===typeof n.message.content?(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"NPC:"})," ",n.message.content]},"assistant-".concat(i)):null)),0===_.length&&(0,l.jsx)("p",{children:"Chat history will appear here..."})]})]})}}}]);