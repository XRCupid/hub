"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[5051],{15051:(r,e,t)=>{t.r(e),t.d(e,{AnimatedAvatar:()=>u});var o=t(89379),a=t(65043),n=t(81597),s=t(5355);const i=(0,a.createContext)(null),l={didCatch:!1,error:null};class c extends a.Component{constructor(r){super(r),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=l}static getDerivedStateFromError(r){return{didCatch:!0,error:r}}resetErrorBoundary(){const{error:r}=this.state;if(null!==r){for(var e,t,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];null===(e=(t=this.props).onReset)||void 0===e||e.call(t,{args:a,reason:"imperative-api"}),this.setState(l)}}componentDidCatch(r,e){var t,o;null===(t=(o=this.props).onError)||void 0===t||t.call(o,r,e)}componentDidUpdate(r,e){const{didCatch:t}=this.state,{resetKeys:o}=this.props;var a,n;t&&null!==e.error&&function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r.length!==e.length||r.some(((r,t)=>!Object.is(r,e[t])))}(r.resetKeys,o)&&(null===(a=(n=this.props).onReset)||void 0===a||a.call(n,{next:o,prev:r.resetKeys,reason:"keys"}),this.setState(l))}render(){const{children:r,fallbackRender:e,FallbackComponent:t,fallback:o}=this.props,{didCatch:n,error:s}=this.state;let l=r;if(n){const r={error:s,resetErrorBoundary:this.resetErrorBoundary};if("function"===typeof e)l=e(r);else if(t)l=(0,a.createElement)(t,r);else{if(void 0===o)throw s;l=o}}return(0,a.createElement)(i.Provider,{value:{didCatch:n,error:s,resetErrorBoundary:this.resetErrorBoundary}},l)}}var d=t(70579);function h(r){let{error:e}=r;return console.error("Avatar loading error:",e),(0,d.jsxs)("mesh",{position:[0,0,0],children:[(0,d.jsx)("boxGeometry",{args:[1,2,.5]}),(0,d.jsx)("meshStandardMaterial",{color:"gray"})]})}function p(r){let{avatarUrl:e,animationUrl:t,position:o=[0,-1.1,0],rotation:i=[0,0,0],scale:l=[1.4,1.4,1.4]}=r;console.log("Loading avatar:",e,"with animation:",t);const{scene:c}=(0,n.p)(e),{animations:h}=(0,n.p)(t),{actions:p}=(0,s.f)(h,c);return(0,a.useEffect)((()=>{var r;p&&h.length>0?(console.log("Playing animation:",h[0].name),null===(r=p[h[0].name])||void 0===r||r.reset().fadeIn(.2).play()):console.log("No animations found or actions not ready");return()=>{Object.values(p).forEach((r=>null===r||void 0===r?void 0:r.stop()))}}),[p,h]),c?(0,d.jsx)("primitive",{object:c,scale:l,position:o,rotation:i}):(console.error("Avatar not loaded:",e),null)}function u(r){return(0,d.jsx)(c,{fallbackRender:r=>{let{error:e}=r;return(0,d.jsx)(h,{error:e})},children:(0,d.jsx)(a.Suspense,{fallback:(0,d.jsxs)("mesh",{position:r.position,children:[(0,d.jsx)("boxGeometry",{args:[1,2,.5]}),(0,d.jsx)("meshStandardMaterial",{color:"lightgray"})]}),children:(0,d.jsx)(p,(0,o.A)({},r))})})}n.p.preload("/avatars/fool.glb"),n.p.preload("/avatars/chickie.glb"),n.p.preload("/avatars/babe.glb"),n.p.preload("/avatars/AngelChick.glb"),n.p.preload("/animations/M_Standing_Idle_001.glb"),n.p.preload("/animations/M_Talking_Variations_001.glb")}}]);
//# sourceMappingURL=5051.e2bb0a80.chunk.js.map