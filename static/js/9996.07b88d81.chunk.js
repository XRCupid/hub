"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[9996],{99996:(e,t,a)=>{a.d(t,{eu:()=>Dt});var n=a(9950),r=a(6005),o=a(69104),i=a(68057),c=a(43824),s=a(13437),l=a(12880),b=a(52111),p=a(27020);function d(e,t,a){const n=a.length-e-1;if(t>=a[n])return n-1;if(t<=a[e])return e;let r=e,o=n,i=Math.floor((r+o)/2);for(;t<a[i]||t>=a[i+1];)t<a[i]?o=i:r=i,i=Math.floor((r+o)/2);return i}function u(e,t,a,n){const r=[],o=[],i=[];r[0]=1;for(let c=1;c<=a;++c){o[c]=t-n[e+1-c],i[c]=n[e+c]-t;let a=0;for(let e=0;e<c;++e){const t=i[e+1],n=o[c-e],s=r[e]/(t+n);r[e]=a+t*s,a=n*s}r[c]=a}return r}function f(e,t){let a=1;for(let r=2;r<=e;++r)a*=r;let n=1;for(let r=2;r<=t;++r)n*=r;for(let r=2;r<=e-t;++r)n*=r;return a/n}function h(e,t,a,n,r){const o=function(e,t,a,n,r){const o=r<e?r:e,i=[],c=d(e,n,t),l=function(e,t,a,n,r){const o=[];for(let p=0;p<=a;++p)o[p]=0;const i=[];for(let p=0;p<=n;++p)i[p]=o.slice(0);const c=[];for(let p=0;p<=a;++p)c[p]=o.slice(0);c[0][0]=1;const s=o.slice(0),l=o.slice(0);for(let p=1;p<=a;++p){s[p]=t-r[e+1-p],l[p]=r[e+p]-t;let a=0;for(let e=0;e<p;++e){const t=l[e+1],n=s[p-e];c[p][e]=t+n;const r=c[e][p-1]/c[p][e];c[e][p]=a+t*r,a=n*r}c[p][p]=a}for(let p=0;p<=a;++p)i[0][p]=c[p][a];for(let p=0;p<=a;++p){let e=0,t=1;const r=[];for(let n=0;n<=a;++n)r[n]=o.slice(0);r[0][0]=1;for(let o=1;o<=n;++o){let n=0;const s=p-o,l=a-o;p>=o&&(r[t][0]=r[e][0]/c[l+1][s],n=r[t][0]*c[s][l]);const b=p-1<=l?o-1:a-p;for(let a=s>=-1?1:-s;a<=b;++a)r[t][a]=(r[e][a]-r[e][a-1])/c[l+1][s+a],n+=r[t][a]*c[s+a][l];p<=l&&(r[t][o]=-r[e][o-1]/c[l+1][p],n+=r[t][o]*c[p][l]),i[o][p]=n;const d=e;e=t,t=d}}let b=a;for(let p=1;p<=n;++p){for(let e=0;e<=a;++e)i[p][e]*=b;b*=a-p}return i}(c,n,e,o,t),b=[];for(let s=0;s<a.length;++s){const e=a[s].clone(),t=e.w;e.x*=t,e.y*=t,e.z*=t,b[s]=e}for(let s=0;s<=o;++s){const t=b[c-e].clone().multiplyScalar(l[s][0]);for(let a=1;a<=e;++a)t.add(b[c-e+a].clone().multiplyScalar(l[s][a]));i[s]=t}for(let p=o+1;p<=r+1;++p)i[p]=new s.Vector4(0,0,0);return i}(e,t,a,n,r);return function(e){const t=e.length,a=[],n=[];for(let o=0;o<t;++o){const t=e[o];a[o]=new s.Vector3(t.x,t.y,t.z),n[o]=t.w}const r=[];for(let o=0;o<t;++o){const e=a[o].clone();for(let t=1;t<=o;++t)e.sub(r[o-t].clone().multiplyScalar(f(o,t)*n[t]));r[o]=e.divideScalar(n[0])}return r}(o)}class g extends s.Curve{constructor(e,t,a,n,r){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=r||this.knots.length-1;for(let o=0;o<a.length;++o){const e=a[o];this.controlPoints[o]=new s.Vector4(e.x,e.y,e.z,e.w)}}getPoint(e,t){const a=t||new s.Vector3,n=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=function(e,t,a,n){const r=d(e,n,t),o=u(r,n,e,t),i=new s.Vector4(0,0,0,0);for(let c=0;c<=e;++c){const t=a[r-e+c],n=o[c],s=t.w*n;i.x+=t.x*s,i.y+=t.y*s,i.z+=t.z*s,i.w+=t.w*n}return i}(this.degree,this.knots,this.controlPoints,n);return 1!=r.w&&r.divideScalar(r.w),a.set(r.x,r.y,r.z)}getTangent(e,t){const a=t||new s.Vector3,n=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=h(this.degree,this.knots,this.controlPoints,n,1);return a.copy(r[1]).normalize(),a}}var m=a(41274);const y=a(9631).r>=125?"uv1":"uv2";let v,k,w;class x extends s.Loader{constructor(e){super(e)}load(e,t,a,n){const r=this,o=""===r.path?s.LoaderUtils.extractUrlBase(e):r.path,i=new s.FileLoader(this.manager);i.setPath(r.path),i.setResponseType("arraybuffer"),i.setRequestHeader(r.requestHeader),i.setWithCredentials(r.withCredentials),i.load(e,(function(a){try{t(r.parse(a,o))}catch(Gt){n?n(Gt):console.error(Gt),r.manager.itemError(e)}}),a,n)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===N(e,0,t.length)}(e))v=(new S).parse(e);else{const t=N(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let a=0;function n(t){const n=e[t-1];return e=e.slice(a+t),a++,n}for(let r=0;r<t.length;++r){if(n(1)===t[r])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(R(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+R(t));v=(new F).parse(t)}const a=new s.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new A(a,this.manager).parse(v)}}class A{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){k=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),a=this.parseMaterials(t),n=this.parseDeformers(),r=(new E).parse(n);return this.parseScene(n,r,a),w}parseConnections(){const e=new Map;if("Connections"in v){v.Connections.connections.forEach((function(t){const a=t[0],n=t[1],r=t[2];e.has(a)||e.set(a,{parents:[],children:[]});const o={ID:n,relationship:r};e.get(a).parents.push(o),e.has(n)||e.set(n,{parents:[],children:[]});const i={ID:a,relationship:r};e.get(n).children.push(i)}))}return e}parseImages(){const e={},t={};if("Video"in v.Objects){const a=v.Objects.Video;for(const n in a){const r=a[n];if(e[parseInt(n)]=r.RelativeFilename||r.Filename,"Content"in r){const e=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,o="string"===typeof r.Content&&""!==r.Content;if(e||o){const e=this.parseImage(a[n]);t[r.RelativeFilename||r.Filename]=e}}}}for(const a in e){const n=e[a];void 0!==t[n]?e[a]=t[n]:e[a]=e[a].split("\\").pop()}return e}parseImage(e){const t=e.Content,a=e.RelativeFilename||e.Filename,n=a.slice(a.lastIndexOf(".")+1).toLowerCase();let r;switch(n){case"bmp":r="image/bmp";break;case"jpg":case"jpeg":r="image/jpeg";break;case"png":r="image/png";break;case"tif":r="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",a),r="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+n+'" is not supported.')}if("string"===typeof t)return"data:"+r+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:r}))}}parseTextures(e){const t=new Map;if("Texture"in v.Objects){const a=v.Objects.Texture;for(const n in a){const r=this.parseTexture(a[n],e);t.set(parseInt(n),r)}}return t}parseTexture(e,t){const a=this.loadTexture(e,t);a.ID=e.id,a.name=e.attrName;const n=e.WrapModeU,r=e.WrapModeV,o=void 0!==n?n.value:0,i=void 0!==r?r.value:0;if(a.wrapS=0===o?s.RepeatWrapping:s.ClampToEdgeWrapping,a.wrapT=0===i?s.RepeatWrapping:s.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;a.repeat.x=t[0],a.repeat.y=t[1]}return a}loadTexture(e,t){let a;const n=this.textureLoader.path,r=k.get(e.id).children;let o;void 0!==r&&r.length>0&&void 0!==t[r[0].ID]&&(a=t[r[0].ID],0!==a.indexOf("blob:")&&0!==a.indexOf("data:")||this.textureLoader.setPath(void 0));const i=e.FileName.slice(-3).toLowerCase();if("tga"===i){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new s.Texture):(t.setPath(this.textureLoader.path),o=t.load(a))}else"psd"===i?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new s.Texture):o=this.textureLoader.load(a);return this.textureLoader.setPath(n),o}parseMaterials(e){const t=new Map;if("Material"in v.Objects){const a=v.Objects.Material;for(const n in a){const r=this.parseMaterial(a[n],e);null!==r&&t.set(parseInt(n),r)}}return t}parseMaterial(e,t){const a=e.id,n=e.attrName;let r=e.ShadingModel;if("object"===typeof r&&(r=r.value),!k.has(a))return null;const o=this.parseParameters(e,t,a);let i;switch(r.toLowerCase()){case"phong":i=new s.MeshPhongMaterial;break;case"lambert":i=new s.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),i=new s.MeshPhongMaterial}return i.setValues(o),i.name=n,i}parseParameters(e,t,a){const n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=(new s.Color).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(n.color=(new s.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=(new s.Color).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(n.emissive=(new s.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(n.opacity=parseFloat(e.Opacity.value)),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=(new s.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(n.specular=(new s.Color).fromArray(e.SpecularColor.value));const r=this;return k.get(a).children.forEach((function(e){const a=e.relationship;switch(a){case"Bump":n.bumpMap=r.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":n.aoMap=r.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=r.getTexture(t,e.ID),void 0!==n.map&&("colorSpace"in n.map?n.map.colorSpace="srgb":n.map.encoding=3001);break;case"DisplacementColor":n.displacementMap=r.getTexture(t,e.ID);break;case"EmissiveColor":n.emissiveMap=r.getTexture(t,e.ID),void 0!==n.emissiveMap&&("colorSpace"in n.emissiveMap?n.emissiveMap.colorSpace="srgb":n.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=r.getTexture(t,e.ID);break;case"ReflectionColor":n.envMap=r.getTexture(t,e.ID),void 0!==n.envMap&&(n.envMap.mapping=s.EquirectangularReflectionMapping,"colorSpace"in n.envMap?n.envMap.colorSpace="srgb":n.envMap.encoding=3001);break;case"SpecularColor":n.specularMap=r.getTexture(t,e.ID),void 0!==n.specularMap&&("colorSpace"in n.specularMap?n.specularMap.colorSpace="srgb":n.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=r.getTexture(t,e.ID),n.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a)}})),n}getTexture(e,t){return"LayeredTexture"in v.Objects&&t in v.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=k.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in v.Objects){const a=v.Objects.Deformer;for(const n in a){const r=a[n],o=k.get(parseInt(n));if("Skin"===r.attrType){const t=this.parseSkeleton(o,a);t.ID=n,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[n]=t}else if("BlendShape"===r.attrType){const e={id:n};e.rawTargets=this.parseMorphTargets(o,a),e.id=n,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const a=[];return e.children.forEach((function(e){const n=t[e.ID];if("Cluster"!==n.attrType)return;const r={ID:e.ID,indices:[],weights:[],transformLink:(new s.Matrix4).fromArray(n.TransformLink.a)};"Indexes"in n&&(r.indices=n.Indexes.a,r.weights=n.Weights.a),a.push(r)})),{rawBones:a,bones:[]}}parseMorphTargets(e,t){const a=[];for(let n=0;n<e.children.length;n++){const r=e.children[n],o=t[r.ID],i={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;i.geoID=k.get(parseInt(r.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,a.push(i)}return a}parseScene(e,t,a){w=new s.Group;const n=this.parseModels(e.skeletons,t,a),r=v.Objects.Model,o=this;n.forEach((function(e){const t=r[e.ID];o.setLookAtProperties(e,t);k.get(e.ID).parents.forEach((function(t){const a=n.get(t.ID);void 0!==a&&a.add(e)})),null===e.parent&&w.add(e)})),this.bindSkeleton(e.skeletons,t,n),this.createAmbientLight(),w.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=D(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const i=(new j).parse();1===w.children.length&&w.children[0].isGroup&&(w.children[0].animations=i,w=w.children[0]),w.animations=i}parseModels(e,t,a){const n=new Map,r=v.Objects.Model;for(const o in r){const i=parseInt(o),c=r[o],l=k.get(i);let b=this.buildSkeleton(l,e,i,c.attrName);if(!b){switch(c.attrType){case"Camera":b=this.createCamera(l);break;case"Light":b=this.createLight(l);break;case"Mesh":b=this.createMesh(l,t,a);break;case"NurbsCurve":b=this.createCurve(l,t);break;case"LimbNode":case"Root":b=new s.Bone;break;default:b=new s.Group}b.name=c.attrName?s.PropertyBinding.sanitizeNodeName(c.attrName):"",b.ID=i}this.getTransformData(b,c),n.set(i,b)}return n}buildSkeleton(e,t,a,n){let r=null;return e.parents.forEach((function(e){for(const o in t){const i=t[o];i.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=r;r=new s.Bone,r.matrixWorld.copy(t.transformLink),r.name=n?s.PropertyBinding.sanitizeNodeName(n):"",r.ID=a,i.bones[o]=r,null!==e&&r.add(e)}}))}})),r}createCamera(e){let t,a;if(e.children.forEach((function(e){const t=v.Objects.NodeAttribute[e.ID];void 0!==t&&(a=t)})),void 0===a)t=new s.Object3D;else{let e=0;void 0!==a.CameraProjectionType&&1===a.CameraProjectionType.value&&(e=1);let n=1;void 0!==a.NearPlane&&(n=a.NearPlane.value/1e3);let r=1e3;void 0!==a.FarPlane&&(r=a.FarPlane.value/1e3);let o=window.innerWidth,i=window.innerHeight;void 0!==a.AspectWidth&&void 0!==a.AspectHeight&&(o=a.AspectWidth.value,i=a.AspectHeight.value);const c=o/i;let l=45;void 0!==a.FieldOfView&&(l=a.FieldOfView.value);const b=a.FocalLength?a.FocalLength.value:null;switch(e){case 0:t=new s.PerspectiveCamera(l,c,n,r),null!==b&&t.setFocalLength(b);break;case 1:t=new s.OrthographicCamera(-o/2,o/2,i/2,-i/2,n,r);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new s.Object3D}}return t}createLight(e){let t,a;if(e.children.forEach((function(e){const t=v.Objects.NodeAttribute[e.ID];void 0!==t&&(a=t)})),void 0===a)t=new s.Object3D;else{let e;e=void 0===a.LightType?0:a.LightType.value;let n=16777215;void 0!==a.Color&&(n=(new s.Color).fromArray(a.Color.value));let r=void 0===a.Intensity?1:a.Intensity.value/100;void 0!==a.CastLightOnObject&&0===a.CastLightOnObject.value&&(r=0);let o=0;void 0!==a.FarAttenuationEnd&&(o=void 0!==a.EnableFarAttenuation&&0===a.EnableFarAttenuation.value?0:a.FarAttenuationEnd.value);const i=1;switch(e){case 0:t=new s.PointLight(n,r,o,i);break;case 1:t=new s.DirectionalLight(n,r);break;case 2:let e=Math.PI/3;void 0!==a.InnerAngle&&(e=s.MathUtils.degToRad(a.InnerAngle.value));let c=0;void 0!==a.OuterAngle&&(c=s.MathUtils.degToRad(a.OuterAngle.value),c=Math.max(c,1)),t=new s.SpotLight(n,r,o,e,c,i);break;default:console.warn("THREE.FBXLoader: Unknown light type "+a.LightType.value+", defaulting to a PointLight."),t=new s.PointLight(n,r)}void 0!==a.CastShadows&&1===a.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,a){let n,r=null,o=null;const i=[];return e.children.forEach((function(e){t.has(e.ID)&&(r=t.get(e.ID)),a.has(e.ID)&&i.push(a.get(e.ID))})),i.length>1?o=i:i.length>0?o=i[0]:(o=new s.MeshPhongMaterial({color:13421772}),i.push(o)),"color"in r.attributes&&i.forEach((function(e){e.vertexColors=!0})),r.FBX_Deformer?(n=new s.SkinnedMesh(r,o),n.normalizeSkinWeights()):n=new s.Mesh(r,o),n}createCurve(e,t){const a=e.children.reduce((function(e,a){return t.has(a.ID)&&(e=t.get(a.ID)),e}),null),n=new s.LineBasicMaterial({color:3342591,linewidth:1});return new s.Line(a,n)}getTransformData(e,t){const a={};"InheritType"in t&&(a.inheritType=parseInt(t.InheritType.value)),a.eulerOrder="RotationOrder"in t?G(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(a.translation=t.Lcl_Translation.value),"PreRotation"in t&&(a.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(a.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(a.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(a.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(a.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(a.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(a.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(a.rotationPivot=t.RotationPivot.value),e.userData.transformData=a}setLookAtProperties(e,t){if("LookAtProperty"in t){k.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const a=v.Objects.Model[t.ID];if("Lcl_Translation"in a){const t=a.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),w.add(e.target)):e.lookAt((new s.Vector3).fromArray(t))}}}))}}bindSkeleton(e,t,a){const n=this.parsePoseNodes();for(const r in e){const o=e[r];k.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;k.get(t).parents.forEach((function(e){if(a.has(e.ID)){a.get(e.ID).bind(new s.Skeleton(o.bones),n[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in v.Objects){const t=v.Objects.Pose;for(const a in t)if("BindPose"===t[a].attrType&&t[a].NbPoseNodes>0){const n=t[a].PoseNode;Array.isArray(n)?n.forEach((function(t){e[t.Node]=(new s.Matrix4).fromArray(t.Matrix.a)})):e[n.Node]=(new s.Matrix4).fromArray(n.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in v&&"AmbientColor"in v.GlobalSettings){const e=v.GlobalSettings.AmbientColor.value,t=e[0],a=e[1],n=e[2];if(0!==t||0!==a||0!==n){const e=new s.Color(t,a,n);w.add(new s.AmbientLight(e,1))}}}}class E{parse(e){const t=new Map;if("Geometry"in v.Objects){const a=v.Objects.Geometry;for(const n in a){const r=k.get(parseInt(n)),o=this.parseGeometry(r,a[n],e);t.set(parseInt(n),o)}}return t}parseGeometry(e,t,a){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,a);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,a){const n=a.skeletons,r=[],o=e.parents.map((function(e){return v.Objects.Model[e.ID]}));if(0===o.length)return;const i=e.children.reduce((function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e}),null);e.children.forEach((function(e){void 0!==a.morphTargets[e.ID]&&r.push(a.morphTargets[e.ID])}));const c=o[0],s={};"RotationOrder"in c&&(s.eulerOrder=G(c.RotationOrder.value)),"InheritType"in c&&(s.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(s.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(s.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(s.scale=c.GeometricScaling.value);const l=D(s);return this.genGeometry(t,i,r,l)}genGeometry(e,t,a,n){const r=new s.BufferGeometry;e.attrName&&(r.name=e.attrName);const o=this.parseGeoNode(e,t),i=this.genBuffers(o),c=new s.Float32BufferAttribute(i.vertex,3);if(c.applyMatrix4(n),r.setAttribute("position",c),i.colors.length>0&&r.setAttribute("color",new s.Float32BufferAttribute(i.colors,3)),t&&(r.setAttribute("skinIndex",new s.Uint16BufferAttribute(i.weightsIndices,4)),r.setAttribute("skinWeight",new s.Float32BufferAttribute(i.vertexWeights,4)),r.FBX_Deformer=t),i.normal.length>0){const e=(new s.Matrix3).getNormalMatrix(n),t=new s.Float32BufferAttribute(i.normal,3);t.applyNormalMatrix(e),r.setAttribute("normal",t)}if(i.uvs.forEach((function(e,t){"uv2"===y&&t++;const a=0===t?"uv":"uv".concat(t);r.setAttribute(a,new s.Float32BufferAttribute(i.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=i.materialIndex[0],t=0;if(i.materialIndex.forEach((function(a,n){a!==e&&(r.addGroup(t,n-t,e),e=a,t=n)})),r.groups.length>0){const t=r.groups[r.groups.length-1],a=t.start+t.count;a!==i.materialIndex.length&&r.addGroup(a,i.materialIndex.length-a,e)}0===r.groups.length&&r.addGroup(0,i.materialIndex.length,i.materialIndex[0])}return this.addMorphTargets(r,e,a,n),r}parseGeoNode(e,t){const a={};if(a.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],a.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(a.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(a.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(a.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){a.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&a.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return a.weightTable={},null!==t&&(a.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(n,r){void 0===a.weightTable[n]&&(a.weightTable[n]=[]),a.weightTable[n].push({id:t,weight:e.weights[r]})}))}))),a}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let a=0,n=0,r=!1,o=[],i=[],c=[],s=[],l=[],b=[];const p=this;return e.vertexIndices.forEach((function(d,u){let f,h=!1;d<0&&(d^=-1,h=!0);let g=[],m=[];if(o.push(3*d,3*d+1,3*d+2),e.color){const t=I(u,a,d,e.color);c.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){m.push(e.weight),g.push(e.id)})),m.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);const e=[0,0,0,0],t=[0,0,0,0];m.forEach((function(a,n){let r=a,o=g[n];t.forEach((function(t,a,n){if(r>t){n[a]=r,r=t;const i=e[a];e[a]=o,o=i}}))})),g=e,m=t}for(;m.length<4;)m.push(0),g.push(0);for(let e=0;e<4;++e)l.push(m[e]),b.push(g[e])}if(e.normal){const t=I(u,a,d,e.normal);i.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=I(u,a,d,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){const n=I(u,a,d,e);void 0===s[t]&&(s[t]=[]),s[t].push(n[0]),s[t].push(n[1])})),n++,h&&(p.genFace(t,e,o,f,i,c,s,l,b,n),a++,n=0,o=[],i=[],c=[],s=[],l=[],b=[])})),t}genFace(e,t,a,n,r,o,i,c,s,l){for(let b=2;b<l;b++)e.vertex.push(t.vertexPositions[a[0]]),e.vertex.push(t.vertexPositions[a[1]]),e.vertex.push(t.vertexPositions[a[2]]),e.vertex.push(t.vertexPositions[a[3*(b-1)]]),e.vertex.push(t.vertexPositions[a[3*(b-1)+1]]),e.vertex.push(t.vertexPositions[a[3*(b-1)+2]]),e.vertex.push(t.vertexPositions[a[3*b]]),e.vertex.push(t.vertexPositions[a[3*b+1]]),e.vertex.push(t.vertexPositions[a[3*b+2]]),t.skeleton&&(e.vertexWeights.push(c[0]),e.vertexWeights.push(c[1]),e.vertexWeights.push(c[2]),e.vertexWeights.push(c[3]),e.vertexWeights.push(c[4*(b-1)]),e.vertexWeights.push(c[4*(b-1)+1]),e.vertexWeights.push(c[4*(b-1)+2]),e.vertexWeights.push(c[4*(b-1)+3]),e.vertexWeights.push(c[4*b]),e.vertexWeights.push(c[4*b+1]),e.vertexWeights.push(c[4*b+2]),e.vertexWeights.push(c[4*b+3]),e.weightsIndices.push(s[0]),e.weightsIndices.push(s[1]),e.weightsIndices.push(s[2]),e.weightsIndices.push(s[3]),e.weightsIndices.push(s[4*(b-1)]),e.weightsIndices.push(s[4*(b-1)+1]),e.weightsIndices.push(s[4*(b-1)+2]),e.weightsIndices.push(s[4*(b-1)+3]),e.weightsIndices.push(s[4*b]),e.weightsIndices.push(s[4*b+1]),e.weightsIndices.push(s[4*b+2]),e.weightsIndices.push(s[4*b+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(b-1)]),e.colors.push(o[3*(b-1)+1]),e.colors.push(o[3*(b-1)+2]),e.colors.push(o[3*b]),e.colors.push(o[3*b+1]),e.colors.push(o[3*b+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(b-1)]),e.normal.push(r[3*(b-1)+1]),e.normal.push(r[3*(b-1)+2]),e.normal.push(r[3*b]),e.normal.push(r[3*b+1]),e.normal.push(r[3*b+2])),t.uv&&t.uv.forEach((function(t,a){void 0===e.uvs[a]&&(e.uvs[a]=[]),e.uvs[a].push(i[a][0]),e.uvs[a].push(i[a][1]),e.uvs[a].push(i[a][2*(b-1)]),e.uvs[a].push(i[a][2*(b-1)+1]),e.uvs[a].push(i[a][2*b]),e.uvs[a].push(i[a][2*b+1])}))}addMorphTargets(e,t,a,n){if(0===a.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const r=this;a.forEach((function(a){a.rawTargets.forEach((function(a){const o=v.Objects.Geometry[a.geoID];void 0!==o&&r.genMorphGeometry(e,t,o,n,a.name)}))}))}genMorphGeometry(e,t,a,n,r){const o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],i=void 0!==a.Vertices?a.Vertices.a:[],c=void 0!==a.Indexes?a.Indexes.a:[],l=3*e.attributes.position.count,b=new Float32Array(l);for(let s=0;s<c.length;s++){const e=3*c[s];b[e]=i[3*s],b[e+1]=i[3*s+1],b[e+2]=i[3*s+2]}const p={vertexIndices:o,vertexPositions:b},d=this.genBuffers(p),u=new s.Float32BufferAttribute(d.vertex,3);u.name=r||a.attrName,u.applyMatrix4(n),e.morphAttributes.position.push(u)}parseNormals(e){const t=e.MappingInformationType,a=e.ReferenceInformationType,n=e.Normals.a;let r=[];return"IndexToDirect"===a&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:r,mappingType:t,referenceType:a}}parseUVs(e){const t=e.MappingInformationType,a=e.ReferenceInformationType,n=e.UV.a;let r=[];return"IndexToDirect"===a&&(r=e.UVIndex.a),{dataSize:2,buffer:n,indices:r,mappingType:t,referenceType:a}}parseVertexColors(e){const t=e.MappingInformationType,a=e.ReferenceInformationType,n=e.Colors.a;let r=[];return"IndexToDirect"===a&&(r=e.ColorIndex.a),{dataSize:4,buffer:n,indices:r,mappingType:t,referenceType:a}}parseMaterialIndices(e){const t=e.MappingInformationType,a=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:a};const n=e.Materials.a,r=[];for(let o=0;o<n.length;++o)r.push(o);return{dataSize:1,buffer:n,indices:r,mappingType:t,referenceType:a}}parseNurbsGeometry(e){if(void 0===g)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new s.BufferGeometry;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new s.BufferGeometry;const a=t-1,n=e.KnotVector.a,r=[],o=e.Points.a;for(let b=0,p=o.length;b<p;b+=4)r.push((new s.Vector4).fromArray(o,b));let i,c;if("Closed"===e.Form)r.push(r[0]);else if("Periodic"===e.Form){i=a,c=n.length-1-i;for(let e=0;e<a;++e)r.push(r[e])}const l=new g(a,n,r,i,c).getPoints(12*r.length);return(new s.BufferGeometry).setFromPoints(l)}}class j{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const a in t){const n=t[a],r=this.addClip(n);e.push(r)}return e}parseClips(){if(void 0===v.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=v.Objects.AnimationCurveNode,t=new Map;for(const a in e){const n=e[a];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){const e={id:n.id,attr:n.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=v.Objects.AnimationCurve;for(const a in t){const n={id:t[a].id,times:t[a].KeyTime.a.map(T),values:t[a].KeyValueFloat.a},r=k.get(n.id);if(void 0!==r){const t=r.parents[0].ID,a=r.parents[0].relationship;a.match(/X/)?e.get(t).curves.x=n:a.match(/Y/)?e.get(t).curves.y=n:a.match(/Z/)?e.get(t).curves.z=n:a.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=n)}}}parseAnimationLayers(e){const t=v.Objects.AnimationLayer,a=new Map;for(const n in t){const t=[],r=k.get(parseInt(n));if(void 0!==r){r.children.forEach((function(a,n){if(e.has(a.ID)){const r=e.get(a.ID);if(void 0!==r.curves.x||void 0!==r.curves.y||void 0!==r.curves.z){if(void 0===t[n]){const e=k.get(a.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const r=v.Objects.Model[e.toString()];if(void 0===r)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",a);const o={modelName:r.attrName?s.PropertyBinding.sanitizeNodeName(r.attrName):"",ID:r.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};w.traverse((function(e){e.ID===r.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new s.Matrix4),"PreRotation"in r&&(o.preRotation=r.PreRotation.value),"PostRotation"in r&&(o.postRotation=r.PostRotation.value),t[n]=o}}t[n]&&(t[n][r.attr]=r)}else if(void 0!==r.curves.morph){if(void 0===t[n]){const e=k.get(a.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,r=k.get(e).parents[0].ID,o=k.get(r).parents[0].ID,i=k.get(o).parents[0].ID,c=v.Objects.Model[i],l={modelName:c.attrName?s.PropertyBinding.sanitizeNodeName(c.attrName):"",morphName:v.Objects.Deformer[e].attrName};t[n]=l}t[n][r.attr]=r}}})),a.set(parseInt(n),t)}}return a}parseAnimStacks(e){const t=v.Objects.AnimationStack,a={};for(const n in t){const r=k.get(parseInt(n)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(r[0].ID);a[n]={name:t[n].attrName,layer:o}}return a}addClip(e){let t=[];const a=this;return e.layer.forEach((function(e){t=t.concat(a.generateTracks(e))})),new s.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let a=new s.Vector3,n=new s.Quaternion,r=new s.Vector3;if(e.transform&&e.transform.decompose(a,n,r),a=a.toArray(),n=(new s.Euler).setFromQuaternion(n,e.eulerOrder).toArray(),r=r.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.T.curves,a,"position");void 0!==n&&t.push(n)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,n,e.preRotation,e.postRotation,e.eulerOrder);void 0!==a&&t.push(a)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");void 0!==a&&t.push(a)}if(void 0!==e.DeformPercent){const a=this.generateMorphTrack(e);void 0!==a&&t.push(a)}return t}generateVectorTrack(e,t,a,n){const r=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(r,t,a);return new s.VectorKeyframeTrack(e+"."+n,r,o)}generateRotationTrack(e,t,a,n,r,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(s.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(s.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(s.MathUtils.degToRad));const i=this.getTimesForAllAxes(t),c=this.getKeyframeTrackValues(i,t,a);void 0!==n&&((n=n.map(s.MathUtils.degToRad)).push(o),n=(new s.Euler).fromArray(n),n=(new s.Quaternion).setFromEuler(n)),void 0!==r&&((r=r.map(s.MathUtils.degToRad)).push(o),r=(new s.Euler).fromArray(r),r=(new s.Quaternion).setFromEuler(r).invert());const l=new s.Quaternion,b=new s.Euler,p=[];for(let s=0;s<c.length;s+=3)b.set(c[s],c[s+1],c[s+2],o),l.setFromEuler(b),void 0!==n&&l.premultiply(n),void 0!==r&&l.multiply(r),l.toArray(p,s/3*4);return new s.QuaternionKeyframeTrack(e+".quaternion",i,p)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,a=t.values.map((function(e){return e/100})),n=w.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new s.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+n+"]",t.times,a)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,a=t[0];for(let n=1;n<t.length;n++){const r=t[n];r!==a&&(t[e]=r,a=r,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,a){const n=a,r=[];let o=-1,i=-1,c=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(i=t.y.times.indexOf(e)),t.z&&(c=t.z.times.indexOf(e)),-1!==o){const e=t.x.values[o];r.push(e),n[0]=e}else r.push(n[0]);if(-1!==i){const e=t.y.values[i];r.push(e),n[1]=e}else r.push(n[1]);if(-1!==c){const e=t.z.values[c];r.push(e),n[2]=e}else r.push(n[2])})),r}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const a=e.values[t-1],n=e.values[t]-a,r=Math.abs(n);if(r>=180){const o=r/180,i=n/o;let c=a+i;const s=e.times[t-1],l=(e.times[t]-s)/o;let b=s+l;const p=[],d=[];for(;b<e.times[t];)p.push(b),b+=l,d.push(c),c+=i;e.times=z(e.times,t,p),e.values=z(e.values,t,d)}}}}class F{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new O,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,a=e.split(/[\r\n]+/);return a.forEach((function(e,n){const r=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(r||o)return;const i=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),s=e.match("^\\t{"+(t.currentIndent-1)+"}}");i?t.parseNodeBegin(e,i):c?t.parseNodeProperty(e,c,a[++n]):s?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const a=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),r={name:a},o=this.parseNodeAttr(n),i=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(a,r):a in i?("PoseNode"===a?i.PoseNode.push(r):void 0!==i[a].id&&(i[a]={},i[a][i[a].id]=i[a]),""!==o.id&&(i[a][o.id]=r)):"number"===typeof o.id?(i[a]={},i[a][o.id]=r):"Properties70"!==a&&(i[a]="PoseNode"===a?[r]:r),"number"===typeof o.id&&(r.id=o.id),""!==o.name&&(r.attrName=o.name),""!==o.type&&(r.attrType=o.type),this.pushStack(r)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let a="",n="";return e.length>1&&(a=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:a,type:n}}parseNodeProperty(e,t,a){let n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===r&&(r=a.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===n){const e=r.split(",").slice(1),t=parseInt(e[0]),a=parseInt(e[1]);let i=r.split(",").slice(3);i=i.map((function(e){return e.trim().replace(/^"/,"")})),n="connections",r=[t,a],function(e,t){for(let a=0,n=e.length,r=t.length;a<r;a++,n++)e[n]=t[a]}(r,i),void 0===o[n]&&(o[n]=[])}"Node"===n&&(o.id=r),n in o&&Array.isArray(o[n])?o[n].push(r):"a"!==n?o[n]=r:o.a=r,this.setCurrentProp(o,n),"a"===n&&","!==r.slice(-1)&&(o.a=B(r))}else this.parseNodeSpecialProperty(e,n,r)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=B(t.a))}parseNodeSpecialProperty(e,t,a){const n=a.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),r=n[0],o=n[1],i=n[2],c=n[3];let s=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":s=parseFloat(s);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":s=B(s)}this.getPrevNode()[r]={type:o,type2:i,flag:c,value:s},this.setCurrentProp(this.getPrevNode(),r)}}class S{parse(e){const t=new P(e);t.skip(23);const a=t.getUint32();if(a<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+a);const n=new O;for(;!this.endOfContent(t);){const e=this.parseNode(t,a);null!==e&&n.add(e.name,e)}return n}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const a={},n=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),i=e.getString(o);if(0===n)return null;const c=[];for(let p=0;p<r;p++)c.push(this.parseProperty(e));const s=c.length>0?c[0]:"",l=c.length>1?c[1]:"",b=c.length>2?c[2]:"";for(a.singleProperty=1===r&&e.getOffset()===n;n>e.getOffset();){const n=this.parseNode(e,t);null!==n&&this.parseSubNode(i,a,n)}return a.propertyList=c,"number"===typeof s&&(a.id=s),""!==l&&(a.attrName=l),""!==b&&(a.attrType=b),""!==i&&(a.name=i),a}parseSubNode(e,t,a){if(!0===a.singleProperty){const e=a.propertyList[0];Array.isArray(e)?(t[a.name]=a,a.a=e):t[a.name]=e}else if("Connections"===e&&"C"===a.name){const e=[];a.propertyList.forEach((function(t,a){0!==a&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===a.name){Object.keys(a).forEach((function(e){t[e]=a[e]}))}else if("Properties70"===e&&"P"===a.name){let e=a.propertyList[0],n=a.propertyList[1];const r=a.propertyList[2],o=a.propertyList[3];let i;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),i="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[a.propertyList[4],a.propertyList[5],a.propertyList[6]]:a.propertyList[4],t[e]={type:n,type2:r,flag:o,value:i}}else void 0===t[a.name]?"number"===typeof a.id?(t[a.name]={},t[a.name][a.id]=a):t[a.name]=a:"PoseNode"===a.name?(Array.isArray(t[a.name])||(t[a.name]=[t[a.name]]),t[a.name].push(a)):void 0===t[a.name][a.id]&&(t[a.name][a.id]=a)}parseProperty(e){const t=e.getString(1);let a;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return a=e.getUint32(),e.getArrayBuffer(a);case"S":return a=e.getUint32(),e.getString(a);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const n=e.getUint32(),r=e.getUint32(),o=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}const i=(0,p.a8)(new Uint8Array(e.getArrayBuffer(o))),c=new P(i.buffer);switch(t){case"b":case"c":return c.getBooleanArray(n);case"d":return c.getFloat64Array(n);case"f":return c.getFloat32Array(n);case"i":return c.getInt32Array(n);case"l":return c.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class P{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(e){const t=[];for(let a=0;a<e;a++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let a=0;a<e;a++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let a=0;a<e;a++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let a=0;a<e;a++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let a=0;a<e;a++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let n=0;n<e;n++)t[n]=this.getUint8();const a=t.indexOf(0);return a>=0&&(t=t.slice(0,a)),(0,m.g)(new Uint8Array(t))}}class O{add(e,t){this[e]=t}}function R(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function T(e){return e/46186158e3}const L=[];function I(e,t,a,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=a;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(r=n.indices[r]);const o=r*n.dataSize,i=o+n.dataSize;return function(e,t,a,n){for(let r=a,o=0;r<n;r++,o++)e[o]=t[r];return e}(L,n.buffer,o,i)}const M=new s.Euler,C=new s.Vector3;function D(e){const t=new s.Matrix4,a=new s.Matrix4,n=new s.Matrix4,r=new s.Matrix4,o=new s.Matrix4,i=new s.Matrix4,c=new s.Matrix4,l=new s.Matrix4,b=new s.Matrix4,p=new s.Matrix4,d=new s.Matrix4,u=new s.Matrix4,f=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(C.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(s.MathUtils.degToRad);t.push(e.eulerOrder),a.makeRotationFromEuler(M.fromArray(t))}if(e.rotation){const t=e.rotation.map(s.MathUtils.degToRad);t.push(e.eulerOrder),n.makeRotationFromEuler(M.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(s.MathUtils.degToRad);t.push(e.eulerOrder),r.makeRotationFromEuler(M.fromArray(t)),r.invert()}e.scale&&o.scale(C.fromArray(e.scale)),e.scalingOffset&&c.setPosition(C.fromArray(e.scalingOffset)),e.scalingPivot&&i.setPosition(C.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(C.fromArray(e.rotationOffset)),e.rotationPivot&&b.setPosition(C.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(d.copy(e.parentMatrix),p.copy(e.parentMatrixWorld));const h=a.clone().multiply(n).multiply(r),g=new s.Matrix4;g.extractRotation(p);const m=new s.Matrix4;m.copyPosition(p);const y=m.clone().invert().multiply(p),v=g.clone().invert().multiply(y),k=o,w=new s.Matrix4;if(0===f)w.copy(g).multiply(h).multiply(v).multiply(k);else if(1===f)w.copy(g).multiply(v).multiply(h).multiply(k);else{const e=(new s.Matrix4).scale((new s.Vector3).setFromMatrixScale(d)).clone().invert(),t=v.clone().multiply(e);w.copy(g).multiply(h).multiply(t).multiply(k)}const x=b.clone().invert(),A=i.clone().invert();let E=t.clone().multiply(l).multiply(b).multiply(a).multiply(n).multiply(r).multiply(x).multiply(c).multiply(i).multiply(o).multiply(A);const j=(new s.Matrix4).copyPosition(E),F=p.clone().multiply(j);return u.copyPosition(F),E=u.clone().multiply(w),E.premultiply(p.invert()),E}function G(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function B(e){return e.split(",").map((function(e){return parseFloat(e)}))}function N(e,t,a){return void 0===t&&(t=0),void 0===a&&(a=e.byteLength),(0,m.g)(new Uint8Array(e,t,a))}function z(e,t,a){return e.slice(0,t).concat(a).concat(e.slice(t))}var _=a(48115),W=a(60612),q=a(83571),H=a(65415),U=a(53575),K=a.n(U);const V={hub:"hub",sunset:"sunset",dawn:"dawn",night:"night",warehouse:"warehouse",forest:"forest",apartment:"apartment",studio:"studio",city:"city",park:"park",lobby:"lobby",soft:"soft"},Q=e=>{let{environment:t,enablePostProcessing:a}=e;const o=(0,n.useMemo)((()=>({files:t in V?"https://files.readyplayer.me/visage/environment/".concat(t,".hdr"):t})),[t]),i=a?12:4;return n.createElement(r.OH,{files:o.files,environmentIntensity:i})};function X(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}function J(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{s(n.next(e))}catch(Gt){o(Gt)}}function c(e){try{s(n.throw(e))}catch(Gt){o(Gt)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}s((n=n.apply(e,t||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;var Y=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!==typeof WebAssembly)return{supported:!1};var a,n=WebAssembly.validate(e)?"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb":"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",r=WebAssembly.instantiate(o(n),{}).then((function(e){(a=e.instance).exports.__wasm_call_ctors()}));function o(e){for(var a=new Uint8Array(e.length),n=0;n<e.length;++n){var r=e.charCodeAt(n);a[n]=r>96?r-97:r>64?r-39:r+4}var o=0;for(n=0;n<e.length;++n)a[o++]=a[n]<60?t[a[n]]:64*(a[n]-60)+a[++n];return a.buffer.slice(0,o)}function i(e,t,n,r,o,i){var c=a.exports.sbrk,s=n+3&-4,l=c(s*r),b=c(o.length),p=new Uint8Array(a.exports.memory.buffer);p.set(o,b);var d=e(l,n,r,b,o.length);if(0==d&&i&&i(l,s,r),t.set(p.subarray(l,l+n*r)),c(l-c(0)),0!=d)throw new Error("Malformed buffer data: "+d)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},l=[],b=0;function p(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var a=e.data;t.pending-=a.count,t.requests[a.id][a.action](a.value),delete t.requests[a.id]},t}function d(e){for(var t="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(o(n))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+i.toString()+u.toString(),a=new Blob([t],{type:"text/javascript"}),r=URL.createObjectURL(a),c=0;c<e;++c)l[c]=p(r);URL.revokeObjectURL(r)}function u(e){r.then((function(){var t=e.data;try{var n=new Uint8Array(t.count*t.size);i(a.exports[t.mode],n,t.count,t.size,t.source,a.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:n},[n.buffer])}catch(r){self.postMessage({id:t.id,count:t.count,action:"reject",value:r})}}))}return{ready:r,supported:!0,useWorkers:function(e){d(e)},decodeVertexBuffer:function(e,t,n,r,o){i(a.exports.meshopt_decodeVertexBuffer,e,t,n,r,a.exports[c[o]])},decodeIndexBuffer:function(e,t,n,r){i(a.exports.meshopt_decodeIndexBuffer,e,t,n,r)},decodeIndexSequence:function(e,t,n,r){i(a.exports.meshopt_decodeIndexSequence,e,t,n,r)},decodeGltfBuffer:function(e,t,n,r,o,l){i(a.exports[s[o]],e,t,n,r,a.exports[c[l]])},decodeGltfBufferAsync:function(e,t,n,o,p){return l.length>0?function(e,t,a,n,r){for(var o=l[0],i=1;i<l.length;++i)l[i].pending<o.pending&&(o=l[i]);return new Promise((function(i,c){var s=new Uint8Array(a),l=b++;o.pending+=e,o.requests[l]={resolve:i,reject:c},o.object.postMessage({id:l,count:e,size:t,source:s,mode:n,filter:r},[s.buffer])}))}(e,t,n,s[o],c[p]):r.then((function(){var r=new Uint8Array(e*t);return i(a.exports[s[o]],r,e,t,n,a.exports[c[p]]),r}))}}}();const Z="node",$="material",ee="camera",te="light",ae="KHR_animation_pointer",ne={CUBICSPLINE:void 0,LINEAR:s.InterpolateLinear,STEP:s.InterpolateDiscrete},re=s.PropertyBinding.findNode;let oe=!1;class ie{constructor(e){this.parser=e,this.name=ae,this.animationPointerResolver=null}setAnimationPointerResolver(e){return this.animationPointerResolver=e,this}_patchPropertyBindingFindNode(){oe||(oe=!0,s.PropertyBinding.findNode=function(e,t){if(t.startsWith(".materials.")){const a=t.substring(11).substring(t.indexOf(".")),n=a.indexOf("."),r=n<0?a:a.substring(0,n);let o=null;return e.traverse((e=>{null===o&&e.isMesh&&(!e.material||e.material.uuid!==r&&e.material.name!==r||(o=e.material,null!==o&&(a.endsWith(".map")?o=o.map:a.endsWith(".emissiveMap")&&(o=o.emissiveMap))))})),o}if(t.startsWith(".nodes.")||t.startsWith(".lights.")||t.startsWith(".cameras.")){const a=t.split(".");let n;for(let t=1;t<a.length;t++){const r=a[t];if(36==r.length)n=e.getObjectByProperty("uuid",r);else if(n&&n[r]){const e=Number.parseInt(r);let t=r;e>=0&&(t=e),n=n[t]}else{const t=e.getObjectByName(r);t&&(n=t)}}if(!n){const n=re(e,a[2]);return n||console.warn("".concat(ae,": Property binding not found"),t,e,e.name,a),n}return n}return re(e,t)})}loadAnimationTargetFromChannel(e){const{target:t}=e,a=void 0!==t.node?t.node:t.id;return this.parser.getDependency("node",a)}loadAnimationTargetFromChannelWithAnimationPointer(e){this._havePatchedPropertyBindings||this._patchPropertyBindingFindNode();const{target:t}=e,a=t.extensions&&t.extensions[ae]&&t.path&&"pointer"===t.path;if(!a)return null;let n,r,o,i=Z;if(a){const e=t.extensions[ae];let a=e.pointer;if(!a)return void console.warn("Invalid path",e,t);if(a.startsWith("/materials/")?i=$:a.startsWith("/extensions/KHR_lights_punctual/lights/")?i=te:a.startsWith("/cameras/")&&(i=ee),r=this._tryResolveTargetId(a,i),null===r||isNaN(r))return void console.warn("Failed resolving animation node id: ".concat(r),a);switch(i){case $:const e="/materials/".concat(r.toString(),"/").length,t=a.substring(0,e);switch(n=a.substring(e),n){case"pbrMetallicRoughness/baseColorFactor":n="color";break;case"pbrMetallicRoughness/roughnessFactor":n="roughness";break;case"pbrMetallicRoughness/metallicFactor":n="metalness";break;case"emissiveFactor":n="emissive";break;case"alphaCutoff":n="alphaTest";break;case"occlusionTexture/strength":n="aoMapIntensity";break;case"normalTexture/scale":n="normalScale";break;case"pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/scale":n="map/repeat";break;case"pbrMetallicRoughness/baseColorTexture/extensions/KHR_texture_transform/offset":n="map/offset";break;case"emissiveTexture/extensions/KHR_texture_transform/scale":n="emissiveMap/repeat";break;case"emissiveTexture/extensions/KHR_texture_transform/offset":n="emissiveMap/offset";break;case"extensions/KHR_materials_emissive_strength/emissiveStrength":n="emissiveIntensity";break;case"extensions/KHR_materials_transmission/transmissionFactor":n="transmission";break;case"extensions/KHR_materials_ior/ior":n="ior";break;case"extensions/KHR_materials_volume/thicknessFactor":n="thickness";break;case"extensions/KHR_materials_volume/attenuationColor":n="attenuationColor";break;case"extensions/KHR_materials_volume/attenuationDistance":n="attenuationDistance";break;case"extensions/KHR_materials_iridescence/iridescenceFactor":n="iridescence";break;case"extensions/KHR_materials_iridescence/iridescenceIor":n="iridescenceIOR";break;case"extensions/KHR_materials_iridescence/iridescenceThicknessMinimum":n="iridescenceThicknessRange[0]";break;case"extensions/KHR_materials_iridescence/iridescenceThicknessMaximum":n="iridescenceThicknessRange[1]";break;case"extensions/KHR_materials_clearcoat/clearcoatFactor":n="clearcoat";break;case"extensions/KHR_materials_clearcoat/clearcoatRoughnessFactor":n="clearcoatRoughness";break;case"extensions/KHR_materials_sheen/sheenColorFactor":n="sheenColor";break;case"extensions/KHR_materials_sheen/sheenRoughnessFactor":n="sheenRoughness";break;case"extensions/KHR_materials_specular/specularFactor":n="specularIntensity";break;case"extensions/KHR_materials_specular/specularColorFactor":n="specularColor"}a=t+n;break;case Z:const o="/nodes/".concat(r.toString(),"/").length,i=a.substring(0,o);switch(n=a.substring(o),n){case"translation":n="position";break;case"rotation":n="quaternion";break;case"scale":n="scale";break;case"weights":n="morphTargetInfluences"}a=i+n;break;case te:const c="/extensions/KHR_lights_punctual/lights/".concat(r.toString(),"/").length;switch(n=a.substring(c),n){case"color":case"intensity":break;case"spot/innerConeAngle":n="penumbra";break;case"spot/outerConeAngle":n="angle";break;case"range":n="distance"}a="/lights/".concat(r.toString(),"/").concat(n);break;case ee:const s="/cameras/".concat(r.toString(),"/").length,l=a.substring(0,s);switch(n=a.substring(s),n){case"perspective/yfov":n="fov";break;case"perspective/znear":case"orthographic/znear":n="near";break;case"perspective/zfar":case"orthographic/zfar":n="far";break;case"perspective/aspect":n="aspect";break;case"orthographic/xmag":case"orthographic/ymag":n="zoom"}a=l+n}const o=this.animationPointerResolver;o&&o.resolvePath&&(a=o.resolvePath(a)),t.extensions[ae].pointer=a}if(null!==r&&!isNaN(r))return i===Z?o=this.parser.getDependency("node",r):i===$?o=this.parser.getDependency("material",r):i===te?o=this.parser.getDependency("light",r):i===ee?o=this.parser.getDependency("camera",r):console.error("Unhandled type",i),o;console.warn("Failed resolving animation node id: ".concat(r),t)}createAnimationTracksWithAnimationPointer(e,t,a,n,r){if(!(r.extensions&&r.extensions[ae]&&r.path&&"pointer"===r.path))return null;let o=r.extensions[ae].pointer;if(!o)return null;const i=[];o=o.replaceAll("/",".");const c=o.split(".");let l;switch(c[2]=void 0!==e.name&&null!==e.name?e.name:e.uuid,o=c.join("."),a.itemSize){case 1:l=s.NumberKeyframeTrack;break;case 2:case 3:l=s.VectorKeyframeTrack;break;case 4:l=o.endsWith(".quaternion")?s.QuaternionKeyframeTrack:s.ColorKeyframeTrack}const b=void 0!==n.interpolation?ne[n.interpolation]:s.InterpolateLinear;let p=this.parser._getArrayFromAccessor(a);o.endsWith(".fov")&&(p=p.map((e=>e/Math.PI*180)));const d=new l(o,t.array,p,b);if("CUBICSPLINE"===b&&this.parser._createCubicSplineTrackInterpolant(d),i.push(d),o&&4===a.itemSize&&o.startsWith(".materials.")&&o.endsWith(".color")){const e=new Float32Array(p.length/4);for(let t=0,n=p.length/4;t<n;t+=1)e[t]=p[4*t+3];const a=new l(o.replace(".color",".opacity"),t.array,e,b);"CUBICSPLINE"===b&&this.parser._createCubicSplineTrackInterpolant(d),i.push(a)}return i}_tryResolveTargetId(e,t){let a="";"node"===t?a=e.substring(7):"material"===t?a=e.substring(11):"light"===t?a=e.substring(39):"camera"===t&&(a=e.substring(9)),a=a.substring(0,a.indexOf("/"));return Number.parseInt(a)}loadAnimation(e){const t=this,{json:a}=this.parser,{parser:n}=this,r=a.animations[e],o=r.name?r.name:"animation_".concat(e),i=[],c=[],l=[],b=[],p=[];for(let s=0,d=r.channels.length;s<d;s++){const e=r.channels[s],a=r.samplers[e.sampler],{target:o}=e,d=void 0!==r.parameters?r.parameters[a.input]:a.input,u=void 0!==r.parameters?r.parameters[a.output]:a.output;let f=t.loadAnimationTargetFromChannelWithAnimationPointer(e);f||(f=t.loadAnimationTargetFromChannel(e)),i.push(f),c.push(n.getDependency("accessor",d)),l.push(n.getDependency("accessor",u)),b.push(a),p.push(o)}return Promise.all([Promise.all(i),Promise.all(c),Promise.all(l),Promise.all(b),Promise.all(p)]).then((e=>{const a=e[0],r=e[1],i=e[2],c=e[3],l=e[4],b=[];for(let o=0,s=a.length;o<s;o++){const e=a[o],s=r[o],p=i[o],d=c[o],u=l[o];if(void 0===e)continue;e.updateMatrix&&(e.updateMatrix(),e.matrixAutoUpdate=!0);let f=t.createAnimationTracksWithAnimationPointer(e,s,p,d,u);if(f||(f=n._createAnimationTracks(e,s,p,d,u)),f)for(let t=0;t<f.length;t++)b.push(f[t])}return new s.AnimationClip(o,void 0,b)}))}}const ce="mixamorig",se=new x,le=new _.B;le.setMeshoptDecoder(Y);const be=e=>J(void 0,void 0,void 0,(function*(){const t=e instanceof Blob?yield(a=e,J(void 0,void 0,void 0,(function*(){try{const e=yield a.arrayBuffer();return{group:yield le.parseAsync(e,""),isFbx:!1}}catch(Gt){return{group:yield se.loadAsync(URL.createObjectURL(a)),isFbx:!0}}}))):yield(e=>J(void 0,void 0,void 0,(function*(){try{return{group:yield le.loadAsync(e),isFbx:!1}}catch(Gt){return{group:yield se.loadAsync(e),isFbx:!0}}})))(e);var a;return t.isFbx?function(e){for(let t=0;t<e.animations.length;t+=1){const{tracks:a}=e.animations[t];for(let e=0;e<a.length;e+=1)if(a[e].name.includes(ce)&&(a[e].name=a[e].name.replace(ce,"")),a[e].name.includes(".position"))for(let t=0;t<a[e].values.length;t+=1)a[e].values[t]=.01*a[e].values[t]}return e.animations}(t.group):t.group.animations})),pe=(e,t)=>{if(!e||!t)return null;const a=new s.AnimationMixer(e),n=a.clipAction(t);return n.setLoop(s.LoopRepeat,1/0),n.play(),a},de=(e,t,a)=>{const n=s.PropertyBinding.findNode(e,a);if(!n)return null;const r=[];if(e.traverse((e=>{const t=e;t.isMesh&&t.material===n&&r.push(t)})),!r.length)return null;const o=r[0],i=new s.AnimationMixer(o),c=i.clipAction(t),l=c._propertyBindings;if(!l.length)return null;const b=l[0];return b.binding.node=b.binding.rootNode,c.setLoop(s.LoopRepeat,1/0),c.play(),i},ue=(e,t)=>{var a;if(!e||!t.length)return null;const n=t.filter((e=>e.name.toLowerCase().includes("idle")));if(!n.length)return null;const r=[];for(const o of n){if(!o.tracks.length)return null;null===(a=o.tracks)||void 0===a||a.forEach((t=>{const a=t.name;let n=null;a.endsWith("morphTargetInfluences")&&(n=pe(e,o));a.endsWith("map.offset")&&(n=de(e,o,a)),n&&r.push(n)}))}return r},fe=(e,t)=>{if(!e)return!1;for(const a of e)a.update(t);return!0},he=(e,t)=>{if(!e||!t)return!1;for(const a of e)a.stopAllAction(),a.uncacheRoot(t);return!0},ge=e=>{if(Array.isArray(e))return e.length>0&&e.every(ge);if("string"===typeof e){const t=new RegExp(/(.glb|.fbx|.fbx[?].*|.glb[?].*)$/g),a=new RegExp(/^data:application\/octet-stream;base64,/g),n=new RegExp(/^data:model\/gltf-binary;base64,/g);return t.test(e)||a.test(e)||n.test(e)}return e instanceof Blob&&"model/gltf-binary"===e.type},me=e=>{const t=ge(e);return e&&!t&&console.warn("Provided GLB/FBX is invalid. Check docs for supported formats: https://github.com/readyplayerme/visage"),t},ye=(e,t,a)=>Math.min(Math.max(a,e),t),ve=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05;return e*(1-a)+t*a};function ke(e,t){e.traverse((e=>{const a=e;if(!a.geometry)return;(Array.isArray(a.material)?a.material:[a.material]).forEach(t)}))}const we=e=>{e.traverse((e=>{e instanceof s.SkinnedMesh&&e.skeleton&&(e.geometry.dispose(),e.skeleton.dispose()),e instanceof s.Mesh&&e.geometry.dispose()})),ke(e,(e=>{Object.values(e).forEach((e=>{e instanceof s.Texture&&e.dispose()})),e.dispose()})),e.clear()},xe=(e,t,a)=>{ke(e,(e=>{var n,r;const o=e;o.map&&(o.map.minFilter=s.LinearFilter,o.depthWrite=!0),o.name.toLowerCase().includes("hair")&&(o.roughness=.9),o.emissiveMap&&(o.emissiveIntensity=null!==(r=null!==(n=null===t||void 0===t?void 0:t.materialIntensity)&&void 0!==n?n:null===a||void 0===a?void 0:a.emissiveIntensity)&&void 0!==r?r:3.3)}))},Ae=e=>{let{nodes:t,isHalfBody:a=!1,distance:n=2,activeRotation:r=.2,rotationMargin:o=new s.Vector2(5,10),enabled:i=!1}=e;const c=Math.PI/180,b=new s.Vector2(0,0),p=new s.Vector2(0,0),d=n-(a?1:0),u=a?90*c:0,f=(a?-5:10)*c,h=(e,t,a,n,r)=>(ye(e,a,t)-t)*(r-n)/(a-t)+n;(0,l.F)((e=>{if(!i||!t.Neck||!t.Head||!t.RightEye||!t.LeftEye)return;const n=e.camera.position.distanceTo(t.Head.position),s=Math.abs(e.camera.rotation.z);n<d&&s<r?(p.x=h(e.mouse.y,-.5,1,o.x*c,-o.x*c),p.y=h(e.mouse.x,-.5,.5,-o.y*c,o.y*c)):p.set(0,0),b.x=ve(b.x,p.x),b.y=ve(b.y,p.y),t.Neck.rotation.x=b.x+f,t.Neck.rotation.y=b.y,t.Head.rotation.x=b.x,t.Head.rotation.y=b.y,t.RightEye.rotation.x=b.x-u,t.LeftEye.rotation.x=b.x-u,a?(t.RightEye.rotation.z=2*b.y+Math.PI,t.LeftEye.rotation.z=2*b.y+Math.PI):(t.RightEye.rotation.y=2*b.y,t.LeftEye.rotation.y=2*b.y)}))},Ee=(e,t)=>{(0,n.useEffect)((()=>{let a=[];e instanceof s.Group?e.traverse((e=>{e instanceof s.SkinnedMesh&&e.morphTargetInfluences&&a.push(e)})):a=Object.values(e).filter((e=>null===e||void 0===e?void 0:e.morphTargetInfluences));const n=()=>{a.forEach((e=>{e.morphTargetInfluences&&e.morphTargetInfluences.fill(0)}))};t?(n(),a.forEach((e=>{Object.entries(t).forEach((t=>{let[a,n]=t;var r;const o=null===(r=null===e||void 0===e?void 0:e.morphTargetDictionary)||void 0===r?void 0:r[a];o&&(e.morphTargetInfluences[o]=n)}))}))):n()}),[t,e])},je=new _.B;je.setMeshoptDecoder(Y),je.register((e=>new ie(e)));const Fe=new W.Z;function Se(e){return J(this,void 0,void 0,(function*(){let t;if(e instanceof Blob){const a=URL.createObjectURL(e);try{t=yield je.loadAsync(a)}finally{URL.revokeObjectURL(a)}}else t=yield je.loadAsync(e);return t}))}Fe.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),je.setDRACOLoader(Fe);const Pe=e=>(0,q.DY)((()=>J(void 0,void 0,void 0,(function*(){return Se(e)}))),[e],{lifespan:100});function Oe(e){const t=(0,n.useRef)(e);(0,n.useEffect)((()=>{t.current!==e&&(e.rotation.y=t.current.rotation.y,t.current=e)}),[e])}class Re{constructor(){this.scale=new s.Vector3(1,1,1),this.rotation=new s.Euler(0,0,0),this.position=new s.Vector3(0,0,0)}}const Te=(e,t)=>{const a=(0,n.useRef)();(0,n.useEffect)((()=>{const r=e.clone();return"function"===typeof t&&t(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Re;return n.createElement("primitive",{object:e,scale:t.scale,rotation:t.rotation,position:t.position})}(r)),a.current&&we(a.current),a.current=r,()=>{a.current&&we(a.current)}}),[e,t])};const Le=(e,t)=>(0,n.useEffect)((()=>{"function"===typeof t&&t(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Re;return n.createElement("group",null,Object.keys(e).map((a=>{const r=e[a];return"SkinnedMesh"===r.type?n.createElement("skinnedMesh",{castShadow:!0,receiveShadow:!0,key:r.name,scale:t.scale,position:t.position,rotation:t.rotation,geometry:r.geometry,material:r.material,skeleton:r.skeleton,morphTargetInfluences:r.morphTargetInfluences||[]}):"Mesh"===r.type?n.createElement("mesh",{attach:(e,t)=>(e.add(t),t.parent=r.parent,()=>e.remove(t)),castShadow:!0,receiveShadow:!0,key:r.name,scale:r.scale,position:r.position,rotation:r.rotation,geometry:r.geometry,material:r.material,morphTargetInfluences:r.morphTargetInfluences||[]}):null})))}(e))}),[t,e]),Ie=e=>{"function"===typeof e&&e()},Me={blink:[{morphTarget:"eyesClosed",morphTargetIndex:-1,offset:0,duration:.2},{morphTarget:"eyeSquintLeft",morphTargetIndex:-1,offset:0,duration:.2},{morphTarget:"eyeSquintRight",morphTargetIndex:-1,offset:0,duration:.2}]},Ce=(e,t)=>{let a;a=t instanceof s.Group?t.getObjectByName("Wolf3D_Head")||t.getObjectByName("Wolf3D_Avatar")||t.getObjectByName("head"):t.Wolf3D_Head||t.Wolf3D_Avatar||t.head;const r=e in Me?Me[e]:void 0,o=(0,n.useRef)(),i=(0,n.useRef)(Number.POSITIVE_INFINITY);(0,n.useEffect)((()=>{if((null===a||void 0===a?void 0:a.morphTargetDictionary)&&r)for(let e=0;e<r.length;e++)r[e].morphTargetIndex=a.morphTargetDictionary[r[e].morphTarget]}),[r,null===a||void 0===a?void 0:a.morphTargetDictionary]);const c=(0,n.useCallback)((e=>{if((null===a||void 0===a?void 0:a.morphTargetInfluences)&&r){i.current+=e;for(let e=0;e<r.length;e++){const t=r[e];if(i.current<t.duration+t.offset){if(i.current>t.offset){const e=(i.current-t.offset)/t.duration*Math.PI,n=Math.sin(e);a.morphTargetInfluences[t.morphTargetIndex]=n}}else a.morphTargetInfluences[t.morphTargetIndex]=0}}}),[null===a||void 0===a?void 0:a.morphTargetInfluences,r,i.current,o.current]),b=()=>{i.current=0;const e=3e3*Math.random()+3e3;clearTimeout(o.current),o.current=setTimeout(b,e)};(0,n.useEffect)((()=>(r&&(o.current=setTimeout(b,3e3)),()=>{clearTimeout(o.current)})),[r]),(0,l.F)(((e,t)=>{a&&r&&c(t)}))},De="undefined"!==typeof window;let Ge=0;const Be=e=>"init"in e,Ne=e=>!!e.write,ze=new WeakMap,_e=(e,t)=>{const a=ze.get(e);a&&(ze.delete(e),a(t))},We=(e,t)=>{e.status="fulfilled",e.value=t},qe=(e,t)=>{e.status="rejected",e.reason=t},He=(e,t)=>"v"in e&&"v"in t&&Object.is(e.v,t.v),Ue=(e,t)=>"e"in e&&"e"in t&&Object.is(e.e,t.e),Ke=e=>"v"in e&&e.v instanceof Promise,Ve=e=>{if("e"in e)throw e.e;return e.v},Qe=()=>{const e=new WeakMap,t=new WeakMap,a=new Map;let n,r,o;n=new Set,r=new Set,o=new Set;const i=t=>e.get(t),c=(t,n)=>{Object.freeze(n);const r=e.get(t);if(e.set(t,n),a.has(t)||a.set(t,r),r&&Ke(r)){const e="v"in n?n.v instanceof Promise?n.v:Promise.resolve(n.v):Promise.reject(n.e);_e(r.v,e)}},s=(e,t,a)=>{const n=new Map;let r=!1;a.forEach(((a,o)=>{a||o!==e||(a=t),a?(n.set(o,a),t.d.get(o)!==a&&(r=!0)):console.warn("[Bug] atom state not found")})),(r||t.d.size!==n.size)&&(t.d=n)},l=(e,t,a)=>{const n=i(e),r={d:(null==n?void 0:n.d)||new Map,v:t};if(a&&s(e,r,a),n&&He(n,r)&&n.d===r.d)return n;if(n&&Ke(n)&&Ke(r)&&((e,t)=>"v"in e&&"v"in t&&e.v.orig&&e.v.orig===t.v.orig)(n,r)){if(n.d===r.d)return n;r.v=n.v}return c(e,r),r},b=(e,t,a,n)=>{if("function"===typeof(null==(r=t)?void 0:r.then)){let r;const o=new Promise(((n,c)=>{let s=!1;t.then((t=>{if(!s){s=!0;const r=i(e),c=l(e,o,a);We(o,t),n(t),(null==r?void 0:r.d)!==c.d&&v(e,c,null==r?void 0:r.d)}}),(t=>{if(!s){s=!0;const n=i(e),r=l(e,o,a);qe(o,t),c(t),(null==n?void 0:n.d)!==r.d&&v(e,r,null==n?void 0:n.d)}})),r=e=>{s||(s=!0,e.then((e=>We(o,e)),(e=>qe(o,e))),n(e))}}));return o.orig=t,o.status="pending",((e,t)=>{ze.set(e,t),e.catch((()=>{})).finally((()=>ze.delete(e)))})(o,(e=>{e&&r(e),null==n||n()})),l(e,o,a)}var r;return l(e,t,a)},p=e=>{const a=i(e);if(a&&(a.d.forEach(((a,n)=>{n===e||t.has(n)||p(n)})),Array.from(a.d).every((t=>{let[a,n]=t;const r=i(a);return a===e||r===n||r&&!Ke(r)&&He(r,n)}))))return a;const n=new Map;let r=!0;const o=t=>{if(t===e){const e=i(t);if(e)return n.set(t,e),Ve(e);if(Be(t))return n.set(t,void 0),t.init;throw new Error("no atom init")}const a=p(t);return n.set(t,a),Ve(a)};let l,d;const u={get signal(){return l||(l=new AbortController),l.signal},get setSelf(){return Ne(e)||console.warn("setSelf function cannot be used with read-only atom"),!d&&Ne(e)&&(d=function(){if(r&&console.warn("setSelf function cannot be called in sync"),!r){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return g(e,...a)}}),d}};try{const t=e.read(o,u);return b(e,t,n,(()=>null==l?void 0:l.abort()))}catch(f){return((e,t,a)=>{const n=i(e),r={d:(null==n?void 0:n.d)||new Map,e:t};return a&&s(e,r,a),n&&Ue(n,r)&&n.d===r.d?n:(c(e,r),r)})(e,f,n)}finally{r=!1}},d=e=>Ve(p(e)),u=(e,t)=>!t.l.size&&(!t.t.size||1===t.t.size&&t.t.has(e)),f=e=>{const a=new Map,n=new WeakMap,r=e=>{const o=t.get(e);null==o||o.t.forEach((t=>{t!==e&&(a.set(t,(a.get(t)||new Set).add(e)),n.set(t,(n.get(t)||0)+1),r(t))}))};r(e);const o=e=>{const r=t.get(e);null==r||r.t.forEach((t=>{var r;if(t!==e){let e=n.get(t);if(e&&n.set(t,--e),!e){let e=!!(null==(r=a.get(t))?void 0:r.size);if(e){const a=i(t),n=p(t);e=!a||!He(a,n)}e||a.forEach((e=>e.delete(t)))}o(t)}}))};o(e)},h=function(e){let t=!0;for(var a=arguments.length,n=new Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];const c=e.write((e=>Ve(p(e))),(function(a){let n;for(var o=arguments.length,c=new Array(o>1?o-1:0),s=1;s<o;s++)c[s-1]=arguments[s];if(a===e){if(!Be(a))throw new Error("atom not writable");const e=i(a),t=b(a,c[0]);e&&He(e,t)||f(a)}else n=h(a,...c);if(!t){const e=k();r.forEach((t=>t({type:"async-write",flushed:e})))}return n}),...n);return t=!1,c},g=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];const o=h(e,...a),i=k();return r.forEach((e=>e({type:"write",flushed:i}))),o},m=(e,a)=>{const n={t:new Set(a&&[a]),l:new Set};if(t.set(e,n),o.add(e),p(e).d.forEach(((a,n)=>{const r=t.get(n);r?r.t.add(e):n!==e&&m(n,e)})),p(e),Ne(e)&&e.onMount){const t=e.onMount((function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return g(e,...a)}));t&&(n.u=t)}return n},y=e=>{var a;const n=null==(a=t.get(e))?void 0:a.u;n&&n(),t.delete(e),o.delete(e);const r=i(e);r?(Ke(r)&&_e(r.v),r.d.forEach(((a,n)=>{if(n!==e){const a=t.get(n);a&&(a.t.delete(e),u(n,a)&&y(n))}}))):console.warn("[Bug] could not find atom state to unmount",e)},v=(e,a,n)=>{const r=new Set(a.d.keys());null==n||n.forEach(((a,n)=>{if(r.has(n))return void r.delete(n);const o=t.get(n);o&&(o.t.delete(e),u(n,o)&&y(n))})),r.forEach((a=>{const n=t.get(a);n?n.t.add(e):t.has(e)&&m(a,e)}))},k=()=>{let e;for(e=new Set;a.size;){const n=Array.from(a);a.clear(),n.forEach((a=>{let[n,r]=a;const o=i(n);if(o){o.d!==(null==r?void 0:r.d)&&v(n,o,null==r?void 0:r.d);const a=t.get(n);!a||r&&!Ke(r)&&(He(r,o)||Ue(r,o))||(a.l.forEach((e=>e())),e.add(n))}else console.warn("[Bug] no atom state to flush")}))}return n.forEach((e=>e("state"))),e},w=(e,a)=>{const o=(e=>{let a=t.get(e);return a||(a=m(e)),a})(e),i=k(),c=o.l;return c.add(a),n.forEach((e=>e("sub"))),r.forEach((e=>e({type:"sub",flushed:i}))),()=>{c.delete(a),(e=>{const a=t.get(e);a&&u(e,a)&&y(e)})(e),n.forEach((e=>e("unsub"))),r.forEach((e=>e({type:"unsub"})))}};return{get:d,set:g,sub:w,dev_subscribe_store:(e,t)=>2!==t?(console.warn("The current StoreListener revision is 2. The older ones are deprecated."),n.add(e),()=>{n.delete(e)}):(r.add(e),()=>{r.delete(e)}),dev_get_mounted_atoms:()=>o.values(),dev_get_atom_state:t=>e.get(t),dev_get_mounted:e=>t.get(e),dev_restore_atoms:e=>{for(const[a,n]of e)Be(a)&&(b(a,n),f(a));const t=k();r.forEach((e=>e({type:"restore",flushed:t})))}}};let Xe;globalThis.__JOTAI_PACKAGE_IS_LOADED__?console.warn("Detected multiple Jotai instances. It may cause unexpected behavior. https://github.com/pmndrs/jotai/discussions/2044"):globalThis.__JOTAI_PACKAGE_IS_LOADED__=!0;const Je=(0,n.createContext)(void 0),Ye=e=>{const t=(0,n.useContext)(Je);return(null==e?void 0:e.store)||t||(Xe||(Xe=Qe()),Xe)},Ze=e=>{let{children:t,store:a}=e;const r=(0,n.useRef)();return a||r.current||(r.current=Qe()),(0,n.createElement)(Je.Provider,{value:a||r.current},t)},$e=n.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)});const et=e=>{let{onLoadedEffect:t,onLoadedEffectFinish:a}=e;const r=(0,n.useRef)(null),[o,i]=n.useState(!0),{scene:c}=Pe(t.src),{nodes:b}=(0,l.G)(c);(0,n.useEffect)((()=>{o||Ie(a)}),[a,o]);const p=(0,n.useMemo)((()=>J(void 0,void 0,void 0,(function*(){return(yield be((null===t||void 0===t?void 0:t.animationSrc)||t.src))[0]}))),[null===t||void 0===t?void 0:t.animationSrc,t.src]),d=(0,n.useMemo)((()=>J(void 0,void 0,void 0,(function*(){const e=new s.AnimationMixer(b.Scene),a=yield p;if(!a)return i(!1),e;const n=e.clipAction(a);return n.setLoop(s.LoopRepeat,(null===t||void 0===t?void 0:t.loop)||1),n.clampWhenFinished=!0,n.play(),e.addEventListener("finished",(()=>{n.fadeOut(.5),i(!1)})),e}))),[b.Scene,p,null===t||void 0===t?void 0:t.loop]);return(0,l.F)(((e,t)=>J(void 0,void 0,void 0,(function*(){var e;null===(e=yield d)||void 0===e||e.update(t)})))),n.createElement(n.Fragment,null,o&&n.createElement("primitive",{modelRef:r,object:c}))},tt=e=>{let{avatar:t,onLoadedAnimationFinish:a,onLoadedAnimation:r}=e;const[o,i]=n.useState(!0);(0,n.useEffect)((()=>{o||Ie(a)}),[a,o]);const{nodes:c}=(0,l.G)(t),b=(0,n.useMemo)((()=>J(void 0,void 0,void 0,(function*(){return(yield be((null===r||void 0===r?void 0:r.src)||""))[0]}))),[null===r||void 0===r?void 0:r.src]),p=(0,n.useMemo)((()=>J(void 0,void 0,void 0,(function*(){const e=new s.AnimationMixer(c.Armature);if(!c.Armature)return e;const t=e.clipAction(yield b);return t.setLoop(s.LoopRepeat,(null===r||void 0===r?void 0:r.loop)||1),t.clampWhenFinished=!0,t.play(),e.addEventListener("finished",(()=>{t.fadeOut(.5),i(!1)})),e}))),[c.Armature,null===r||void 0===r?void 0:r.loop,b]);return(0,l.F)(((e,t)=>J(void 0,void 0,void 0,(function*(){var e;null===(e=yield p)||void 0===e||e.update(t)})))),n.createElement(n.Fragment,null)},at=function(e,t){const a="atom".concat(++Ge),n={toString:()=>a};return"function"===typeof e?n.read=e:(n.init=e,n.read=e=>e(n),n.write=(e,t,a)=>t(n,"function"===typeof a?a(e(n)):a)),t&&(n.write=t),n}({onLoadedEffect:null,onLoadedAnimation:null}),nt=e=>{let{avatar:t,onSpawnFinish:a}=e;var r,o;const i=function(e,t){const a=Ye(t),[[r,o,i],c]=(0,n.useReducer)((t=>{const n=a.get(e);return Object.is(t[0],n)&&t[1]===a&&t[2]===e?t:[n,a,e]}),void 0,(()=>[a.get(e),a,e]));let s=r;o===a&&i===e||(c(),s=a.get(e));const l=null==t?void 0:t.delay;return(0,n.useEffect)((()=>{const t=a.sub(e,(()=>{"number"!==typeof l?c():setTimeout(c,l)}));return c(),t}),[a,e,l]),(0,n.useDebugValue)(s),"function"===typeof(null==(b=s)?void 0:b.then)?$e(s):s;var b}(at),c=me(null===(r=null===i||void 0===i?void 0:i.onLoadedEffect)||void 0===r?void 0:r.src),s=me(null===(o=null===i||void 0===i?void 0:i.onLoadedAnimation)||void 0===o?void 0:o.src),[l,b]=n.useState(c),[p,d]=n.useState(s);(0,n.useEffect)((()=>{p||l||Ie(a)}),[a,l,p]);return n.createElement(n.Fragment,null,c&&n.createElement(et,{onLoadedEffect:i.onLoadedEffect,onLoadedEffectFinish:()=>{b(!1)}}),s&&n.createElement(tt,{onLoadedAnimation:i.onLoadedAnimation,avatar:t,onLoadedAnimationFinish:()=>{d(!1)}}))},rt=e=>{let{scene:t,scale:a=1,modelRef:r,onLoaded:o,onSpawnAnimationFinish:i,bloom:c,materialConfig:s}=e;const{gl:b}=(0,l.D)(),[p,d]=(0,n.useState)(!1),[u,f]=(0,n.useState)(null),h=e=>{De&&window.TouchEvent&&e instanceof TouchEvent&&f(e),d(!0)},g=e=>{De&&window.TouchEvent&&e instanceof TouchEvent&&f(null),d(!1)};Oe(t);const m=(0,n.useCallback)((e=>{if(p&&e instanceof MouseEvent&&(t.rotation.y+=.005*e.movementX),De&&p&&window.TouchEvent&&e instanceof TouchEvent){const a=Math.round(e.touches[0].pageX-u.touches[0].pageX);t.rotation.y+=.005*a,f(e)}}),[p,u,t]);xe(t,c,s),t.traverse((e=>{const t=e;t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0)})),(0,n.useEffect)((()=>Ie(o)),[t,o]),(0,n.useEffect)((()=>(b.domElement.addEventListener("mousedown",h),b.domElement.addEventListener("touchstart",h,{passive:!0}),window.addEventListener("mouseup",g),b.domElement.addEventListener("touchend",g),b.domElement.addEventListener("touchcancel",g),window.addEventListener("mousemove",m),b.domElement.addEventListener("touchmove",m,{passive:!0}),()=>{b.domElement.removeEventListener("mousedown",h),b.domElement.removeEventListener("touchstart",h),window.removeEventListener("mouseup",g),b.domElement.removeEventListener("touchend",g),b.domElement.removeEventListener("touchcancel",g),window.removeEventListener("mousemove",m),b.domElement.removeEventListener("touchmove",m)})));const y=(0,n.useMemo)((()=>n.createElement(nt,{avatar:t,onSpawnFinish:i})),[i]);return n.createElement("group",{ref:r,dispose:null,rotation:[0,0,0]},n.createElement("primitive",{object:t,scale:a}),y)},ot=e=>{let{modelSrc:t,modelRef:a,scale:r=1,setModelFallback:o,onLoaded:i,emotion:c,bloom:s,materialConfig:b}=e;const{scene:p}=Pe(t),{nodes:d}=(0,l.G)(p);return Ee(d,c),Le(d,o),n.createElement(rt,{modelRef:a,scene:p,scale:r,onLoaded:i,bloom:s,materialConfig:b})},it=e=>{const[t,a]=(0,n.useState)(n.createElement(n.Fragment,null));return n.createElement(n.Suspense,{fallback:t},n.createElement(ot,Object.assign({setModelFallback:a},e)))};function ct(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!==typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===a&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var st="BaseCanvas-module_base-canvas__Xjohd";ct(".BaseCanvas-module_base-canvas__Xjohd {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}");const lt=De?window.devicePixelRatio:1,bt=e=>{let{enablePostProcessing:t,children:a,fov:r=50,position:o=new s.Vector3(0,0,5),style:i,dpr:c=[.5*lt,1],className:l,canvasConfig:p={alpha:!0}}=e;return n.createElement(b.Hl,{key:r,className:"".concat(st," ").concat(null!==l&&void 0!==l?l:""),shadows:"soft",gl:{preserveDrawingBuffer:!0,alpha:p.alpha,toneMapping:s.ACESFilmicToneMapping,toneMappingExposure:1.8},flat:t,dpr:c,camera:{fov:r,position:o},resize:{scroll:!0,debounce:{scroll:50,resize:0}},style:Object.assign(Object.assign({},i),{background:p.alpha?"transparent":null===i||void 0===i?void 0:i.background})},a)},pt=e=>{let{trigger:t,settings:a,callBack:r}=e;const o=(0,l.D)((e=>e.gl)),i=(null===a||void 0===a?void 0:a.type)||"image/png",c=(null===a||void 0===a?void 0:a.quality)||.1;return(0,n.useEffect)((()=>{if(t){const e=o.domElement.toDataURL(i,c);r(e)}}),[t]),n.createElement(n.Fragment,null)},dt=e=>{let{color:t}=e;return n.createElement("color",{attach:"background",args:[t]})},ut=e=>{var{src:t=""}=e,a=X(e,["src"]);const r=(0,n.useRef)(null),o=(0,l.H)(s.TextureLoader,t);return n.createElement("mesh",Object.assign({ref:r,castShadow:!0,receiveShadow:!0},a),n.createElement("boxGeometry",null),n.createElement("meshPhysicalMaterial",{map:o}))};let ft=0;const ht=e=>{let{modelSrc:t,animationSrc:a,rotation:r=Math.PI/180*20,scale:o=1,idleRotation:i=!1,setModelFallback:c,onLoaded:b,headMovement:p=!1,emotion:d,bloom:u,materialConfig:f}=e;const h=(0,n.useRef)(null),[g,m]=(0,n.useState)(!0),{scene:y,animations:v}=Pe(t),{nodes:k}=(0,l.G)(y),w=(0,n.useRef)(null);(0,n.useEffect)((()=>(w.current=ue(y,v),()=>{he(w.current,y),w.current=null})),[y]);const x=(0,n.useMemo)((()=>J(void 0,void 0,void 0,(function*(){return(yield be(a))[0]}))),[a]),A=(0,n.useMemo)((()=>J(void 0,void 0,void 0,(function*(){const e=new s.AnimationMixer(k.Armature);if(g)return e;const t=e.clipAction(yield x);return t.fadeIn(0),t.play(),e.update(0),e}))),[g,x,k.Armature]);return(0,l.F)(((e,t)=>J(void 0,void 0,void 0,(function*(){var e;fe(w.current,t),null===(e=yield A)||void 0===e||e.update(t),i&&(null===h||void 0===h?void 0:h.current)&&(ft+=.2*t,h.current.rotation.y=r+Math.sin(ft)/3)})))),Ae({nodes:k,enabled:p}),Ee(k,d),Ce("blink",k),Le(k,c),n.createElement(rt,{modelRef:h,scene:y,scale:o,onLoaded:b,onSpawnAnimationFinish:()=>{m(!1)},bloom:u,materialConfig:f})},gt=e=>{const[t,a]=(0,n.useState)(n.createElement(n.Fragment,null));return n.createElement(n.Suspense,{fallback:t},n.createElement(ht,Object.assign({setModelFallback:a},e)))};let mt=0;const yt=e=>{let{modelSrc:t,scale:a=1,rotation:r=Math.PI/180*20,idleRotation:o=!1,emotion:i,setModelFallback:c,onLoaded:s,headMovement:b=!1,bloom:p,materialConfig:d}=e;const u=(0,n.useRef)(null),{scene:f}=Pe(t),{nodes:h}=(0,l.G)(f);return f.traverse((e=>{const t=e;"Wolf3D_Hands"===t.name&&(t.visible=!1),"RightHand"===t.name&&t.position.set(0,-2,0),"LeftHand"===t.name&&t.position.set(0,-2,0)})),(0,l.F)(((e,t)=>{o&&(null===u||void 0===u?void 0:u.current)&&(mt+=.2*t,u.current.rotation.y=r+Math.sin(mt)/3)})),Ae({nodes:h,isHalfBody:!0,enabled:b}),Ce("blink",h),Ee(h,i),Le(h,c),n.createElement(rt,{modelRef:u,scene:f,scale:a,onLoaded:s,bloom:p,materialConfig:d})},vt=e=>{const[t,a]=(0,n.useState)(n.createElement(n.Fragment,null));return n.createElement(n.Suspense,{fallback:t},n.createElement(yt,Object.assign({setModelFallback:a},e)))},kt=e=>{let{modelSrc:t,poseSrc:a,modelRef:r,scale:o=1,emotion:i,setModelFallback:c,onLoaded:s,bloom:b,materialConfig:p}=e;const{scene:d}=Pe(t),{nodes:u}=(0,l.G)(d),f=Pe(a),{nodes:h}=(0,l.G)(f.scene);return((e,t)=>{e&&t&&Object.keys(e).forEach((a=>{if("Bone"===e[a].type&&t[a]){const n=t[a].position;e[a].position.set(n.x,n.y,n.z);const r=t[a].rotation;e[a].rotation.set(r.x,r.y,r.z)}}))})(u,h),Ee(u,i),Le(u,c),n.createElement(rt,{modelRef:r,scene:d,scale:o,onLoaded:s,bloom:b,materialConfig:p})},wt=e=>{const[t,a]=(0,n.useState)(n.createElement(n.Fragment,null));return n.createElement(n.Suspense,{fallback:t},n.createElement(kt,Object.assign({setModelFallback:a},e)))},xt=e=>{let{animatedCameraSrc:t}=e;const{camera:a}=(0,l.D)(),{scene:r,animations:i}=(0,o.p)(t),c=(0,n.useRef)(null),[b,p]=(0,n.useState)(null);return(0,n.useEffect)((()=>{i.length>0&&(c.current=new s.AnimationMixer(r),i.forEach((e=>{c.current.clipAction(e).play()})));const e=r.getObjectByName("camera");e&&p(e)}),[r,i]),(0,l.F)(((e,t)=>{c.current&&c.current.update(t),b&&(a.position.copy(b.position),a.quaternion.copy(b.quaternion))})),null},At=e=>{let{cameraTarget:t,cameraInitialDistance:a,cameraZoomTarget:r,headScale:o=1,controlsMinDistance:c=.4,controlsMaxDistance:s=2.5,updateCameraTargetOnZoom:b=!1}=e;const p=(0,n.useRef)(r),{camera:d,gl:u}=(0,l.D)(),f=(0,n.useRef)(null),h=(0,n.useRef)(Number.POSITIVE_INFINITY),g=t||1.475+o/10,m=c+o/10;return(0,n.useEffect)((()=>{var e,t,n;(null===(e=p.current)||void 0===e?void 0:e.x)===(null===r||void 0===r?void 0:r.x)&&(null===(t=p.current)||void 0===t?void 0:t.y)===(null===r||void 0===r?void 0:r.y)&&(null===(n=p.current)||void 0===n?void 0:n.z)===(null===r||void 0===r?void 0:r.z)||(p.current=r,h.current=0);const o=f.current;o&&(o.target.set(0,g,0),o.update(),a&&h.current===Number.POSITIVE_INFINITY&&(d.position.z=a,o.update()))}),[a,d,u.domElement,r,g]),(0,l.F)(((e,t)=>{var a;b&&f.current&&((e,t,a,n,r)=>{if(e){let o=e.target.distanceTo(t.position);o=ye(o,r,n);const i=(o-n)/(r-n);e.target.set(0,a-.6*i,0)}})(f.current,d,g,m,s),((e,t)=>{t&&h.current<=1&&(d.position.setX(ve(d.position.x,t.x,h.current)),d.position.setZ(ve(d.position.z,t.z,h.current)),h.current+=e)})(t,r),null===(a=f.current)||void 0===a||a.update()})),n.createElement(i.N,{ref:f,enableRotate:!1,enablePan:!1,target:[0,g,0],minDistance:m,maxDistance:s,minPolarAngle:1.4,maxPolarAngle:1.4})},Et=e=>{let{modelSrc:t,animations:a,activeAnimation:r,scale:o=1,setModelFallback:i,onLoaded:c,emotion:b,bloom:p,materialConfig:d,onAnimationEnd:u}=e;const f=(0,n.useRef)(null),h=(0,n.useRef)(null),g=(0,n.useRef)(null),m=(0,n.useRef)(0),y=(e=>(0,q.DY)((()=>J(void 0,void 0,void 0,(function*(){const t={};return yield Promise.all(Object.entries(e).map((a=>{let[n,{key:r}]=a;return J(void 0,void 0,void 0,(function*(){const a=yield be(e[n].source),o=r&&a.find((e=>(null===e||void 0===e?void 0:e.name)===r))||a[0];o?t[n]=o:console.warn("Could not load animation ".concat(n))}))}))),t}))),[e]))(a),{scene:v,animations:k}=(e=>{const t=(0,n.useRef)(null),a=(0,n.useRef)(null),r=(0,q.DY)((()=>J(void 0,void 0,void 0,(function*(){if(e===a.current&&t.current)return t.current;const n=yield Se(e);return t.current=n,a.current=e,n}))),[e],{lifespan:100});return(0,n.useEffect)((()=>()=>{r&&we(r.scene)}),[r]),r})(t);return(0,n.useEffect)((()=>{if(v){const e=new s.AnimationMixer(v);if(f.current=e,g.current){const t=e.clipAction(g.current.getClip());t.play(),e.update(m.current),g.current=t}h.current=ue(v,k)}return()=>{var e,t;null===(e=f.current)||void 0===e||e.stopAllAction(),null===(t=f.current)||void 0===t||t.uncacheRoot(v),f.current=null,he(h.current,v),h.current=null}}),[v]),(0,n.useEffect)((()=>{var e,t;const n=f.current,o=g.current,i=y[r],c=a[r];if(!i||!n||!c)return;if(o&&o.getClip().uuid===i.uuid)return;const l=n.clipAction(i),b=null!==(e=c.repeat)&&void 0!==e?e:1/0,p=null!==(t=c.fadeTime)&&void 0!==t?t:.5;l.setLoop(b===1/0?s.LoopRepeat:s.LoopOnce,b),l.clampWhenFinished=!0;const d=e=>{e.action===l&&(null===u||void 0===u||u(l))};return n.addEventListener("finished",d),o?(o.fadeOut(p),l.reset().fadeIn(p)):l.reset(),l.play(),g.current=l,()=>{n.removeEventListener("finished",d)}}),[r,a,y,u]),(0,l.F)(((e,t)=>{var a,n;null===(a=f.current)||void 0===a||a.update(t),m.current=(null===(n=g.current)||void 0===n?void 0:n.time)||0,fe(h.current,t)})),Ee(v,b),Ce("blink",v),Te(v,i),n.createElement(rt,{scene:v,scale:o,onLoaded:c,bloom:p,materialConfig:d})},jt=e=>{const[t,a]=(0,n.useState)(n.createElement(n.Fragment,null));return n.createElement(n.Suspense,{fallback:t},n.createElement(Et,Object.assign({setModelFallback:a},e)))};var Ft="Loader-module_loader__Ukoov",St="Loader-module_dots__KfhUo",Pt="Loader-module_dot__qTWRh";ct(".Loader-module_loader__Ukoov {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n}\n\n.Loader-module_dots__KfhUo {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.Loader-module_dot__qTWRh {\n  background-color: rgb(236, 236, 236);\n  width: 8px;\n  height: 8px;\n  margin: 2px;\n  border-radius: 100%;\n  display: inline-block;\n}\n.Loader-module_dot__qTWRh:nth-child(1) {\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.12s infinite normal both running Loader-module_glowing__nwo3q;\n}\n.Loader-module_dot__qTWRh:nth-child(2) {\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.24s infinite normal both running Loader-module_glowing__nwo3q;\n}\n.Loader-module_dot__qTWRh:nth-child(3) {\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.36s infinite normal both running Loader-module_glowing__nwo3q;\n}\n\n@keyframes Loader-module_glowing__nwo3q {\n  0% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  45% {\n    transform: scale(0.1);\n    opacity: 0.7;\n  }\n  80% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}");const Ot=()=>n.createElement("div",{className:Ft},n.createElement("div",{className:St},[1,2,3].map((e=>n.createElement("div",{key:e,className:Pt}))))),Rt=e=>{let{luminanceThreshold:t=1,luminanceSmoothing:a=1,mipmapBlur:r=!0,intensity:o=.1,kernelSize:i=0}=e;return n.createElement(H.mK,{luminanceThreshold:t,luminanceSmoothing:a,mipmapBlur:r,intensity:o,kernelSize:i})},Tt=e=>{return t=Object.entries(e).filter((e=>{let[t,a]=e;return void 0!==a})),Object.assign({},...t.map((e=>{let[t,a]=e;return{[t]:a}})));var t},Lt=Object.freeze({fillLightAngle:Math.PI/3,backLightAngle:Math.PI/8,keyLightAngle:Math.PI,silhouetteLightAngle:1.5*Math.PI,keyLightPosition:new s.Vector3(.5,1.55,.5),liftLightPosition:new s.Vector3(.25,1.7,2),dirLightPosition:new s.Vector3(-.75,2.5,-1),silhouetteLightPosition:new s.Vector3(-1.5,.1,-1.5),defaultProps:{keyLightIntensity:.8,keyLightColor:"#FFFFFF",fillLightIntensity:3,fillLightColor:"#6794FF",fillLightPosition:new s.Vector3(-.5,1.6,-.5),backLightIntensity:6,backLightColor:"#FFB878",backLightPosition:new s.Vector3(.5,1.6,-1),lightTarget:new s.Vector3(0,1.7,0)}}),It=e=>{const{keyLightIntensity:t,keyLightColor:a,fillLightIntensity:r,fillLightColor:o,fillLightPosition:i,backLightIntensity:c,backLightColor:b,backLightPosition:p,lightTarget:d}=Object.assign(Lt.defaultProps,Tt(e)),{scene:u}=(0,l.D)(),[f]=(0,n.useState)({head:new s.Object3D,shoe:new s.Object3D});return(0,n.useEffect)((()=>{f.head.position.copy(d),f.shoe.position.set(0,0,0),u.add(f.head),u.add(f.shoe)}),[]),n.createElement("group",null,n.createElement("spotLight",{position:i,target:f.head,angle:Lt.fillLightAngle,color:o,intensity:r,castShadow:!0}),n.createElement("spotLight",{position:p,target:f.head,angle:Lt.backLightAngle,color:b,intensity:c,castShadow:!0}),n.createElement("spotLight",{position:Lt.keyLightPosition,target:f.head,angle:Lt.keyLightAngle,color:a,intensity:t}),n.createElement("spotLight",{position:Lt.liftLightPosition,target:f.shoe,angle:Lt.keyLightAngle,color:a,intensity:.25*t}),n.createElement("spotLight",{position:Lt.silhouetteLightPosition,target:f.head,angle:Lt.silhouetteLightAngle,color:a,intensity:.25*t}))},Mt={TARGET:{FULL_BODY:{MALE:1.65,FEMALE:1.55},HALF_BODY:.6},INITIAL_DISTANCE:{FULL_BODY:.4,HALF_BODY:.5},CONTROLS:{FULL_BODY:{MIN_DISTANCE:.5,MAX_DISTANCE:3.2,ZOOM_TARGET:new s.Vector3(-.11,0,3.2)},HALF_BODY:{MIN_DISTANCE:.4,MAX_DISTANCE:1.4,ZOOM_TARGET:new s.Vector3(-.15,0,.55)}}},Ct=e=>{let{modelSrc:t,animationSrc:a,animations:r,activeAnimation:o,poseSrc:i,environment:l="soft",halfBody:b=!1,shadows:p=!1,scale:d=1,animatedCameraSrc:u,cameraTarget:f=Mt.TARGET.FULL_BODY.MALE,cameraInitialDistance:h=Mt.INITIAL_DISTANCE.FULL_BODY,style:g,emotion:m,idleRotation:y=!1,capture:v,background:k,onLoaded:w,onLoading:x,dpr:A,className:E,headMovement:j=!1,cameraZoomTarget:F=Mt.CONTROLS.FULL_BODY.ZOOM_TARGET,onLoadedEffect:S,onLoadedAnimation:P,children:O,effects:R,keyLightIntensity:T,keyLightColor:L,fillLightIntensity:I,fillLightColor:M,fillLightPosition:C,backLightIntensity:D,backLightColor:G,backLightPosition:B,lightTarget:N,fov:z=50,onAnimationEnd:_,materialConfig:W,controlsMinDistance:q,controlsMaxDistance:U,canvasConfig:K}=e;var V,X,J,Y,Z;const $=function(e,t){const a=Ye(t),r=(0,n.useCallback)((function(){if(!("write"in e))throw new Error("not writable atom");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.set(e,...n)}),[a,e]);return r}(at);(0,n.useEffect)((()=>{$({onLoadedEffect:S,onLoadedAnimation:P})}),[P,S,$]);const ee=(0,n.useMemo)((()=>me(t)?o&&!b&&r?n.createElement(jt,{emotion:m,modelSrc:t,animations:r,activeAnimation:o,scale:d,onLoaded:w,bloom:null===R||void 0===R?void 0:R.bloom,onAnimationEnd:_,materialConfig:W}):a&&!b&&me(a)?n.createElement(gt,{emotion:m,modelSrc:t,animationSrc:a,scale:d,idleRotation:y,onLoaded:w,headMovement:j,bloom:null===R||void 0===R?void 0:R.bloom,materialConfig:W}):b?n.createElement(vt,{emotion:m,modelSrc:t,scale:d,idleRotation:y,onLoaded:w,headMovement:j,bloom:null===R||void 0===R?void 0:R.bloom,materialConfig:W}):me(i)?n.createElement(wt,{emotion:m,modelSrc:t,scale:d,poseSrc:i,onLoaded:w,bloom:null===R||void 0===R?void 0:R.bloom,materialConfig:W}):n.createElement(it,{modelSrc:t,scale:d,onLoaded:w,emotion:m,bloom:null===R||void 0===R?void 0:R.bloom,materialConfig:W}):null),[t,o,b,r,a,i,d,w,m,null===R||void 0===R?void 0:R.bloom,W,_,y,j]);(0,n.useEffect)((()=>Ie(x)),[t,a,x]);const te=Boolean((null===R||void 0===R?void 0:R.ambientOcclusion)||(null===R||void 0===R?void 0:R.bloom)||(null===R||void 0===R?void 0:R.vignette)),ae=(0,n.useMemo)((()=>q||(b?Mt.CONTROLS.HALF_BODY.MIN_DISTANCE:Mt.CONTROLS.FULL_BODY.MIN_DISTANCE)),[q,b]),ne=(0,n.useMemo)((()=>U||(b?Mt.CONTROLS.HALF_BODY.MAX_DISTANCE:Mt.CONTROLS.FULL_BODY.MAX_DISTANCE)),[U,b]);return n.createElement(bt,{enablePostProcessing:te,position:new s.Vector3(0,0,3),fov:z,style:g,dpr:A,className:E,canvasConfig:K},n.createElement(Q,{environment:l,enablePostProcessing:te}),u?n.createElement(xt,{animatedCameraSrc:u}):n.createElement(At,{cameraTarget:f,cameraInitialDistance:h,cameraZoomTarget:F,controlsMinDistance:ae,controlsMaxDistance:ne,updateCameraTargetOnZoom:!b}),ee,O,p&&n.createElement(c._,{opacity:(null===R||void 0===R?void 0:R.ambientOcclusion)?1.25:2,scale:4,blur:2,far:1,resolution:256}),(null===k||void 0===k?void 0:k.src)&&n.createElement(ut,Object.assign({},k)),v&&n.createElement(pt,Object.assign({},v)),(null===k||void 0===k?void 0:k.color)&&n.createElement(dt,{color:k.color}),te&&n.createElement(H.s0,{autoClear:!0},n.createElement(n.Fragment,null,(null===R||void 0===R?void 0:R.ambientOcclusion)&&n.createElement(H.jW,{quality:"performance",aoRadius:.08,distanceFalloff:1,intensity:5,screenSpaceRadius:!0,halfRes:!0}),(null===R||void 0===R?void 0:R.bloom)&&n.createElement(Rt,{luminanceThreshold:null===(V=null===R||void 0===R?void 0:R.bloom)||void 0===V?void 0:V.luminanceThreshold,luminanceSmoothing:null===(X=null===R||void 0===R?void 0:R.bloom)||void 0===X?void 0:X.luminanceSmoothing,intensity:null===(J=null===R||void 0===R?void 0:R.bloom)||void 0===J?void 0:J.intensity,kernelSize:null===(Y=null===R||void 0===R?void 0:R.bloom)||void 0===Y?void 0:Y.kernelSize,mipmapBlur:null===(Z=null===R||void 0===R?void 0:R.bloom)||void 0===Z?void 0:Z.mipmapBlur}),(null===R||void 0===R?void 0:R.vignette)&&n.createElement(H.fE,{eskil:!1,offset:.5,darkness:.5}),n.createElement(H.UN,{brightness:.025,contrast:.1}),n.createElement(H.Tl,{hue:0,saturation:-.1}))),n.createElement(It,{keyLightIntensity:T,keyLightColor:L,fillLightIntensity:I,fillLightColor:M,fillLightPosition:C,backLightIntensity:D,backLightColor:G,backLightPosition:B,lightTarget:N}))},Dt=e=>{var t;return n.createElement(n.Suspense,{fallback:null!==(t=e.loader)&&void 0!==t?t:n.createElement(Ot,null)},n.createElement(Ze,null,n.createElement(Ct,Object.assign({},e))))};function Gt(e,t,a,n){return new(a||(a=Promise))((function(r,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}s((n=n.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const Bt="undefined"==typeof window;(()=>{if(Bt)return;const{userAgent:e,platform:t,maxTouchPoints:a}=window.navigator,n=/(iphone|ipod|ipad)/i.test(e),r="iPad"===t||"MacIntel"===t&&a>0&&!window.MSStream;/android/i.test(e),/Version\/12.+Safari/.test(e),/Firefox/.test(e)})();Error;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof a.g?a.g:"undefined"!==typeof self&&self;var Nt,zt=Error,_t=EvalError,Wt=RangeError,qt=ReferenceError,Ht=SyntaxError,Ut=TypeError,Kt=URIError,Vt="undefined"!==typeof Symbol&&Symbol,Qt=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),a=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(a))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(e,t);if(42!==r.value||!0!==r.enumerable)return!1}return!0},Xt={foo:{}},Jt=Object,Yt=Object.prototype.toString,Zt=Math.max,$t=function(e,t){for(var a=[],n=0;n<e.length;n+=1)a[n]=e[n];for(var r=0;r<t.length;r+=1)a[r+e.length]=t[r];return a},ea=function(e){var t=this;if("function"!==typeof t||"[object Function]"!==Yt.apply(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var a,n=function(e,t){for(var a=[],n=t||0,r=0;n<e.length;n+=1,r+=1)a[r]=e[n];return a}(arguments,1),r=Zt(0,t.length-n.length),o=[],i=0;i<r;i++)o[i]="$"+i;if(a=Function("binder","return function ("+function(e,t){for(var a="",n=0;n<e.length;n+=1)a+=e[n],n+1<e.length&&(a+=t);return a}(o,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var r=t.apply(this,$t(n,arguments));return Object(r)===r?r:this}return t.apply(e,$t(n,arguments))})),t.prototype){var c=function(){};c.prototype=t.prototype,a.prototype=new c,c.prototype=null}return a},ta=Function.prototype.bind||ea,aa=Function.prototype.call,na=Object.prototype.hasOwnProperty,ra=ta.call(aa,na),oa=zt,ia=_t,ca=Wt,sa=qt,la=Ht,ba=Ut,pa=Kt,da=Function,ua=function(e){try{return da('"use strict"; return ('+e+").constructor;")()}catch(Gt){}},fa=Object.getOwnPropertyDescriptor;if(fa)try{fa({},"")}catch(Gt){fa=null}var ha=function(){throw new ba},ga=fa?function(){try{return ha}catch(e){try{return fa(arguments,"callee").get}catch(t){return ha}}}():ha,ma="function"===typeof Vt&&"function"===typeof Symbol&&"symbol"===typeof Vt("foo")&&"symbol"===typeof Symbol("bar")&&Qt(),ya={__proto__:Xt}.foo===Xt.foo&&!({__proto__:null}instanceof Jt),va=Object.getPrototypeOf||(ya?function(e){return e.__proto__}:null),ka={},wa="undefined"!==typeof Uint8Array&&va?va(Uint8Array):Nt,xa={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?Nt:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?Nt:ArrayBuffer,"%ArrayIteratorPrototype%":ma&&va?va([][Symbol.iterator]()):Nt,"%AsyncFromSyncIteratorPrototype%":Nt,"%AsyncFunction%":ka,"%AsyncGenerator%":ka,"%AsyncGeneratorFunction%":ka,"%AsyncIteratorPrototype%":ka,"%Atomics%":"undefined"===typeof Atomics?Nt:Atomics,"%BigInt%":"undefined"===typeof BigInt?Nt:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?Nt:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?Nt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?Nt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":oa,"%eval%":eval,"%EvalError%":ia,"%Float32Array%":"undefined"===typeof Float32Array?Nt:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?Nt:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?Nt:FinalizationRegistry,"%Function%":da,"%GeneratorFunction%":ka,"%Int8Array%":"undefined"===typeof Int8Array?Nt:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?Nt:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?Nt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ma&&va?va(va([][Symbol.iterator]())):Nt,"%JSON%":"object"===typeof JSON?JSON:Nt,"%Map%":"undefined"===typeof Map?Nt:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&ma&&va?va((new Map)[Symbol.iterator]()):Nt,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?Nt:Promise,"%Proxy%":"undefined"===typeof Proxy?Nt:Proxy,"%RangeError%":ca,"%ReferenceError%":sa,"%Reflect%":"undefined"===typeof Reflect?Nt:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?Nt:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&ma&&va?va((new Set)[Symbol.iterator]()):Nt,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?Nt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ma&&va?va(""[Symbol.iterator]()):Nt,"%Symbol%":ma?Symbol:Nt,"%SyntaxError%":la,"%ThrowTypeError%":ga,"%TypedArray%":wa,"%TypeError%":ba,"%Uint8Array%":"undefined"===typeof Uint8Array?Nt:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?Nt:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?Nt:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?Nt:Uint32Array,"%URIError%":pa,"%WeakMap%":"undefined"===typeof WeakMap?Nt:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?Nt:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?Nt:WeakSet};if(va)try{null.error}catch(Gt){var Aa=va(va(Gt));xa["%Error.prototype%"]=Aa}var Ea,ja,Fa=function e(t){var a;if("%AsyncFunction%"===t)a=ua("async function () {}");else if("%GeneratorFunction%"===t)a=ua("function* () {}");else if("%AsyncGeneratorFunction%"===t)a=ua("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(a=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var r=e("%AsyncGenerator%");r&&va&&(a=va(r.prototype))}return xa[t]=a,a},Sa={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pa=ta,Oa=ra,Ra=Pa.call(Function.call,Array.prototype.concat),Ta=Pa.call(Function.apply,Array.prototype.splice),La=Pa.call(Function.call,String.prototype.replace),Ia=Pa.call(Function.call,String.prototype.slice),Ma=Pa.call(Function.call,RegExp.prototype.exec),Ca=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Da=/\\(\\)?/g,Ga=function(e,t){var a,n=e;if(Oa(Sa,n)&&(n="%"+(a=Sa[n])[0]+"%"),Oa(xa,n)){var r=xa[n];if(r===ka&&(r=Fa(n)),"undefined"===typeof r&&!t)throw new ba("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:n,value:r}}throw new la("intrinsic "+e+" does not exist!")},Ba=function(e,t){if("string"!==typeof e||0===e.length)throw new ba("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new ba('"allowMissing" argument must be a boolean');if(null===Ma(/^%?[^%]*%?$/,e))throw new la("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=function(e){var t=Ia(e,0,1),a=Ia(e,-1);if("%"===t&&"%"!==a)throw new la("invalid intrinsic syntax, expected closing `%`");if("%"===a&&"%"!==t)throw new la("invalid intrinsic syntax, expected opening `%`");var n=[];return La(e,Ca,(function(e,t,a,r){n[n.length]=a?La(r,Da,"$1"):t||e})),n}(e),n=a.length>0?a[0]:"",r=Ga("%"+n+"%",t),o=r.name,i=r.value,c=!1,s=r.alias;s&&(n=s[0],Ta(a,Ra([0,1],s)));for(var l=1,b=!0;l<a.length;l+=1){var p=a[l],d=Ia(p,0,1),u=Ia(p,-1);if(('"'===d||"'"===d||"`"===d||'"'===u||"'"===u||"`"===u)&&d!==u)throw new la("property names with quotes must have matching quotes");if("constructor"!==p&&b||(c=!0),Oa(xa,o="%"+(n+="."+p)+"%"))i=xa[o];else if(null!=i){if(!(p in i)){if(!t)throw new ba("base intrinsic for "+e+" exists, but the property is not available.");return}if(fa&&l+1>=a.length){var f=fa(i,p);i=(b=!!f)&&"get"in f&&!("originalValue"in f.get)?f.get:i[p]}else b=Oa(i,p),i=i[p];b&&!c&&(xa[o]=i)}}return i},Na={exports:{}};function za(){if(ja)return Ea;ja=1;var e=Ba("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch(Gt){e=!1}return Ea=e}var _a=Ba("%Object.getOwnPropertyDescriptor%",!0);if(_a)try{_a([],"length")}catch(Gt){_a=null}var Wa=_a,qa=za(),Ha=Ht,Ua=Ut,Ka=Wa,Va=za(),Qa=function(){return!!Va};Qa.hasArrayLengthDefineBug=function(){if(!Va)return null;try{return 1!==Va([],"length",{value:1}).length}catch(Gt){return!0}};var Xa=Ba,Ja=function(e,t,a){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new Ua("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new Ua("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new Ua("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new Ua("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new Ua("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new Ua("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,r=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,i=arguments.length>6&&arguments[6],c=!!Ka&&Ka(e,t);if(qa)qa(e,t,{configurable:null===o&&c?c.configurable:!o,enumerable:null===n&&c?c.enumerable:!n,value:a,writable:null===r&&c?c.writable:!r});else{if(!i&&(n||r||o))throw new Ha("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=a}},Ya=Qa(),Za=Wa,$a=Ut,en=Xa("%Math.floor%"),tn=function(e,t){if("function"!==typeof e)throw new $a("`fn` is not a function");if("number"!==typeof t||t<0||t>4294967295||en(t)!==t)throw new $a("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],n=!0,r=!0;if("length"in e&&Za){var o=Za(e,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(r=!1)}return(n||r||!a)&&(Ya?Ja(e,"length",t,!0,!0):Ja(e,"length",t)),e};!function(e){var t=ta,a=Ba,n=tn,r=Ut,o=a("%Function.prototype.apply%"),i=a("%Function.prototype.call%"),c=a("%Reflect.apply%",!0)||t.call(i,o),s=za(),l=a("%Math.max%");e.exports=function(e){if("function"!==typeof e)throw new r("a function is required");var a=c(t,i,arguments);return n(a,1+l(0,e.length-(arguments.length-1)),!0)};var b=function(){return c(t,o,arguments)};s?s(e.exports,"apply",{value:b}):e.exports.apply=b}(Na);var an=Ba,nn=Na.exports,rn=nn(an("String.prototype.indexOf")),on=K().inspect,cn="function"===typeof Map&&Map.prototype,sn=Object.getOwnPropertyDescriptor&&cn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ln=(cn&&sn&&"function"===typeof sn.get&&sn.get,cn&&Map.prototype.forEach,"function"===typeof Set&&Set.prototype),bn=Object.getOwnPropertyDescriptor&&ln?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,pn=(ln&&bn&&"function"===typeof bn.get&&bn.get,ln&&Set.prototype.forEach,"function"===typeof WeakMap&&WeakMap.prototype&&WeakMap.prototype.has,"function"===typeof WeakSet&&WeakSet.prototype&&WeakSet.prototype.has,"function"===typeof WeakRef&&WeakRef.prototype&&WeakRef.prototype.deref,Boolean.prototype.valueOf,Object.prototype.toString,Function.prototype.toString,String.prototype.match,String.prototype.slice,String.prototype.replace,String.prototype.toUpperCase,String.prototype.toLowerCase,RegExp.prototype.test,Array.prototype.concat,Array.prototype.join,Array.prototype.slice,Math.floor,"function"===typeof BigInt&&BigInt.prototype.valueOf,Object.getOwnPropertySymbols,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null),dn="function"===typeof Symbol&&"object"===typeof Symbol.iterator;"function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===dn||"symbol")&&Symbol.toStringTag,Object.prototype.propertyIsEnumerable,("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||Array.prototype;var un=on,fn=un.custom;hn(fn);function hn(e){if(dn)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!pn)return!1;try{return pn.call(e),!0}catch(Gt){}return!1}Object.prototype.hasOwnProperty;var gn=Ba,mn=function(e,t){var a=an(e,!!t);return"function"===typeof a&&rn(e,".prototype.")>-1?nn(a):a},yn=(gn("%WeakMap%",!0),gn("%Map%",!0),mn("WeakMap.prototype.get",!0),mn("WeakMap.prototype.set",!0),mn("WeakMap.prototype.has",!0),mn("Map.prototype.get",!0),mn("Map.prototype.set",!0),mn("Map.prototype.has",!0),String.prototype.replace),vn=/%20/g,kn="RFC3986",wn={default:kn,formatters:{RFC1738:function(e){return yn.call(e,vn,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:kn},xn=wn,An=Object.prototype.hasOwnProperty,En=Array.isArray,jn=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Fn=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!==typeof e[n]&&(a[n]=e[n]);return a},Sn=1024,Pn={arrayToObject:Fn,assign:function(e,t){return Object.keys(t).reduce((function(e,a){return e[a]=t[a],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],n=0;n<t.length;++n)for(var r=t[n],o=r.obj[r.prop],i=Object.keys(o),c=0;c<i.length;++c){var s=i[c],l=o[s];"object"===typeof l&&null!==l&&-1===a.indexOf(l)&&(t.push({obj:o,prop:s}),a.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),a=t.obj[t.prop];if(En(a)){for(var n=[],r=0;r<a.length;++r)"undefined"!==typeof a[r]&&n.push(a[r]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,a){var n=e.replace(/\+/g," ");if("iso-8859-1"===a)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(Gt){return n}},encode:function(e,t,a,n,r){if(0===e.length)return e;var o=e;if("symbol"===typeof e?o=Symbol.prototype.toString.call(e):"string"!==typeof e&&(o=String(e)),"iso-8859-1"===a)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var i="",c=0;c<o.length;c+=Sn){for(var s=o.length>=Sn?o.slice(c,c+Sn):o,l=[],b=0;b<s.length;++b){var p=s.charCodeAt(b);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||r===xn.RFC1738&&(40===p||41===p)?l[l.length]=s.charAt(b):p<128?l[l.length]=jn[p]:p<2048?l[l.length]=jn[192|p>>6]+jn[128|63&p]:p<55296||p>=57344?l[l.length]=jn[224|p>>12]+jn[128|p>>6&63]+jn[128|63&p]:(b+=1,p=65536+((1023&p)<<10|1023&s.charCodeAt(b)),l[l.length]=jn[240|p>>18]+jn[128|p>>12&63]+jn[128|p>>6&63]+jn[128|63&p])}i+=l.join("")}return i},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(En(e)){for(var a=[],n=0;n<e.length;n+=1)a.push(t(e[n]));return a}return t(e)},merge:function e(t,a,n){if(!a)return t;if("object"!==typeof a){if(En(t))t.push(a);else{if(!t||"object"!==typeof t)return[t,a];(n&&(n.plainObjects||n.allowPrototypes)||!An.call(Object.prototype,a))&&(t[a]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(a);var r=t;return En(t)&&!En(a)&&(r=Fn(t,n)),En(t)&&En(a)?(a.forEach((function(a,r){if(An.call(t,r)){var o=t[r];o&&"object"===typeof o&&a&&"object"===typeof a?t[r]=e(o,a,n):t.push(a)}else t[r]=a})),t):Object.keys(a).reduce((function(t,r){var o=a[r];return An.call(t,r)?t[r]=e(t[r],o,n):t[r]=o,t}),r)}},On=Pn,Rn=wn,Tn=(Object.prototype.hasOwnProperty,Array.isArray,Array.prototype.push,Date.prototype.toISOString),Ln=Rn.default,In=(On.encode,Rn.formatters[Ln],Pn);Object.prototype.hasOwnProperty,Array.isArray,In.decode}}]);