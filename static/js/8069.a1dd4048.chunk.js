"use strict";(self.webpackChunkhub=self.webpackChunkhub||[]).push([[8069],{28069:(e,t,r)=>{r.r(t),r.d(t,{SimpleAttentionTracker:()=>s});var n=r(65043),i=r(70579);const s=e=>{let{onAttentionChange:t,showVideo:r=!0}=e;const[s,o]=(0,n.useState)(!1),[a,c]=(0,n.useState)(0),d=(0,n.useRef)(null),l=(0,n.useRef)(null),h=(0,n.useRef)(),u=(0,n.useRef)([]);return(0,n.useEffect)((()=>{let e=null;return(async()=>{try{e=await navigator.mediaDevices.getUserMedia({video:{width:320,height:240,facingMode:"user"}}),d.current&&(d.current.srcObject=e),h.current=window.setInterval((()=>{if(d.current&&l.current){const e=d.current,r=l.current,n=r.getContext("2d");if(!n)return;r.width=320,r.height=240,n.drawImage(e,0,0,r.width,r.height);const i=n.getImageData(0,0,r.width,r.height).data;let s=0;const a=r.width/2,h=r.height/2,g=60;for(let t=h-g;t<h+g;t++)for(let e=a-g;e<a+g;e++){const n=4*(t*r.width+e),o=i[n],a=i[n+1],c=i[n+2];o>95&&a>40&&c>20&&o>a&&o>c&&Math.abs(o-a)>15&&s++}const x=s/(g*g*4)>.15;o(x),u.current.push(x),u.current.length>30&&u.current.shift();const f=u.current.filter((e=>e)).length,p=Math.round(f/u.current.length*100);c(p),t&&t(x)}}),333)}catch(r){console.error("Failed to start attention tracking:",r)}})(),()=>{h.current&&clearInterval(h.current),e&&e.getTracks().forEach((e=>e.stop()))}}),[t]),(0,i.jsxs)("div",{style:{padding:"20px",backgroundColor:"rgba(0, 0, 0, 0.8)",borderRadius:"8px",color:"white"},children:[(0,i.jsx)("h3",{children:"Attention Tracker"}),(0,i.jsxs)("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsx)("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"160px",height:"120px",display:r?"block":"none",borderRadius:"4px"}}),(0,i.jsx)("canvas",{ref:l,style:{display:"none"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"24px",marginBottom:"10px",color:s?"#4CAF50":"#f44336"},children:s?"\ud83d\udc40 Looking":"\ud83d\ude34 Not Looking"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{marginBottom:"5px"},children:["Engagement: ",a,"%"]}),(0,i.jsx)("div",{style:{width:"200px",height:"20px",backgroundColor:"#333",borderRadius:"10px",overflow:"hidden"},children:(0,i.jsx)("div",{style:{width:"".concat(a,"%"),height:"100%",backgroundColor:a>70?"#4CAF50":a>40?"#ff9800":"#f44336",transition:"width 0.3s ease"}})})]})]})]})]})}}}]);
//# sourceMappingURL=8069.a1dd4048.chunk.js.map